    function compartirPorEmail() {
        try {
            const nombre = $("#nombreProductoVistaRapida").text();
            const precio = $("#precioProductoVistaRapida").text();
            const stock = $("#stockProductoVistaRapida").text();
            const descripcion = $("#descripcionVistaRapida").text();
            const productoId = $("#btnVerDetallesCompletos").attr("href").split('/').pop();

            const urlProducto = `${window.location.origin}/Inventario/DetalleProducto/${productoId}`;
            const asunto = `Producto: ${nombre}`;
            const cuerpo = `Hola,

                Te comparto informaci√≥n sobre este producto:

                üõû PRODUCTO: ${nombre}

                üí∞ PRECIO: ${precio}
                üì¶ STOCK DISPONIBLE: ${stock} unidades
                üìù DESCRIPCI√ìN: ${descripcion}

                üîó Ver detalles completos:
                ${urlProducto}

                Saludos.`;

            const emailUrl = `mailto:?subject=${encodeURIComponent(asunto)}&body=${encodeURIComponent(cuerpo)}`;
            window.location.href = emailUrl;
            console.log('‚úÖ Compartido por Email');
        } catch (error) {
            console.error('‚ùå Error al compartir por Email:', error);
            mostrarNotificacion("Error", "No se pudo compartir por Email", "danger");
        }
    }

    // ‚úÖ FUNCI√ìN PARA ENVIAR PRODUCTO POR WHATSAPP USANDO LA API
    function enviarProductoPorWhatsApp() {
        console.log('üì± === ENVIANDO PRODUCTO POR WHATSAPP ===');

        // Validar que tenemos los datos del producto
        if (!productoParaCompartir) {
            mostrarNotificacion("Error: No se han cargado los datos del producto", "danger");
            return;
        }

        // Obtener n√∫mero ingresado
        const numeroIngresado = $("#numeroWhatsApp").val().trim();
        if (!numeroIngresado || numeroIngresado.length !== 8) {
            mostrarNotificacion("Por favor ingrese un n√∫mero v√°lido de 8 d√≠gitos", "warning");
            $("#numeroWhatsApp").focus();
            return;
        }

        // Formar n√∫mero completo con c√≥digo de pa√≠s
        const numeroCompleto = `506${numeroIngresado}`;
        const incluirImagen = $("#incluirImagen").is(':checked');

        console.log('üì± Datos a enviar:', {
            numero: numeroCompleto,
            producto: productoParaCompartir.nombre,
            incluirImagen: incluirImagen
        });

        // Mostrar estado de carga
        const $btn = $("#btnEnviarWhatsApp");
        $btn.prop('disabled', true);
        $btn.find('.normal-state').hide();
        $btn.find('.loading-state').show();

        // Preparar datos para la API
        const datosEnvio = {
            numero: numeroCompleto,
            nombreProducto: productoParaCompartir.nombre,
            precio: productoParaCompartir.precio,
            stock: productoParaCompartir.stock,
            urlProducto: productoParaCompartir.urlProducto,
            urlImagen: incluirImagen ? productoParaCompartir.urlImagen : null
        };

        // Enviar usando la API
        $.ajax({
            url: 'https://localhost:7273/api/WhatsApp/compartir-producto',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(datosEnvio),
            success: function(response) {
                console.log('‚úÖ Respuesta exitosa:', response);
                
                // Cerrar modal
                $("#modalWhatsAppNumero").modal("hide");
                
                // Mostrar mensaje de √©xito
                mostrarNotificacion(`Producto enviado exitosamente a +${numeroCompleto}`, "success");
                
                console.log('‚úÖ Producto compartido por WhatsApp exitosamente');
            },
            error: function(xhr, status, error) {
                console.error('‚ùå Error enviando por WhatsApp:', error);
                console.error('‚ùå Response:', xhr.responseText);
                
                let mensajeError = 'Error al enviar el mensaje por WhatsApp';
                
                if (xhr.responseText) {
                    try {
                        const errorResponse = JSON.parse(xhr.responseText);
                        mensajeError = errorResponse.message || mensajeError;
                    } catch (e) {
                        mensajeError = `Error ${xhr.status}: ${error}`;
                    }
                }
                
                mostrarNotificacion(mensajeError, "danger");
            },
            complete: function() {
                // Rehabilitar bot√≥n
                $btn.prop('disabled', false);
                $btn.find('.normal-state').show();
                $btn.find('.loading-state').hide();
            }
        });
    }
