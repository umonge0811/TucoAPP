'API.exe' (CoreCLR: DefaultDomain): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.CoreLib.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\API.dll' cargado. Símbolos cargados.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\extensions\microsoft\web tools\projectsystem\net7.0\Microsoft.WebTools.ApiEndpointDiscovery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\SDK\9.0.302\DotnetTools\dotnet-watch\9.0.302-servicing.25319.7\tools\net9.0\any\middleware\Microsoft.AspNetCore.Watch.BrowserRefresh.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\IDE\Extensions\Microsoft\Web Tools\Browser Link\Microsoft.WebTools.BrowserLink.Net.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\commonextensions\microsoft\hotreload\Microsoft.Extensions.DotNetDeltaApplier.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.Pipes.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Overlapped.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.AccessControl.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Principal.Windows.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Claims.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Loader.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Concurrent.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Tuco.Clases.dll' cargado. Símbolos cargados.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.ConfigurationExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ApiExplorer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: DefaultDomain): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.CoreLib.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\GestionLlantera.Web.dll' cargado. Símbolos cargados.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Swashbuckle.AspNetCore.SwaggerGen.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.AspNetCore.Authentication.JwtBearer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.Policy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\extensions\microsoft\web tools\projectsystem\net7.0\Microsoft.WebTools.ApiEndpointDiscovery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpsPolicy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.StaticFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\SDK\9.0.302\DotnetTools\dotnet-watch\9.0.302-servicing.25319.7\tools\net9.0\any\middleware\Microsoft.AspNetCore.Watch.BrowserRefresh.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\IDE\Extensions\Microsoft\Web Tools\Browser Link\Microsoft.WebTools.BrowserLink.Net.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\commonextensions\microsoft\hotreload\Microsoft.Extensions.DotNetDeltaApplier.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.Pipes.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Overlapped.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Swashbuckle.AspNetCore.Swagger.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.AccessControl.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Principal.Windows.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Claims.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Loader.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Concurrent.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Swashbuckle.AspNetCore.SwaggerUI.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Ir a: paso a paso por procedimientos en código 'Program.<>c__DisplayClass0_0..ctor' que no es de usuario
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\API.dll' cargado. Símbolos cargados.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.EnvironmentVariables.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Session.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Physical.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Antiforgery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.FileExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Cookies.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Binder.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.Policy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.FileSystem.Watcher.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpsPolicy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.StaticFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Ir a: paso a paso por procedimientos en código 'Program.<>c__DisplayClass0_0..ctor' que no es de usuario
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Numerics.Vectors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.UserSecrets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.EnvironmentVariables.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Physical.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Debug.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.FileExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Tracing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Binder.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.FileSystem.Watcher.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Registry.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IIS.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IISIntegration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Composite.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Numerics.Vectors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encodings.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Intrinsics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.UserSecrets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.ConfigurationExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Debug.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Tracing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.DiagnosticSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Connections.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Server.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HostFiltering.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpOverrides.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.ObjectPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ObjectModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Registry.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IIS.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IISIntegration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.DataAnnotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.RazorPages.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Composite.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encodings.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ViewFeatures.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Intrinsics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Expressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.JSInterop.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.DiagnosticSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cryptography.Internal.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ApiExplorer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Antiforgery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Connections.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.WebEncoders.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.TagHelpers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Server.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HostFiltering.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.OpenApi.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpOverrides.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.ObjectPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ObjectModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Localization.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Thread.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.Diagnostics.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Specialized.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.TypeConverter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.ThreadPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.IO.Pipelines.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.Lightweight.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.ILGeneration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\netstandard.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Net.Http.Headers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Uri.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Numerics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Swashbuckle.AspNetCore.SwaggerGen.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.Relational.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.DataAnnotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ViewFeatures.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Expressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.JSInterop.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cryptography.Internal.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.WebEncoders.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.TagHelpers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Metadata.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.RegularExpressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileSystemGlobbing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Html.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Annotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Localization.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Thread.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.XDocument.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.Diagnostics.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Specialized.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.TypeConverter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.ThreadPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.IO.Pipelines.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.MemoryMappedFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.Lightweight.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.ILGeneration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Net.Http.Headers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'Anonymously Hosted DynamicMethods Assembly' cargado. 
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Uri.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Embedded.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Numerics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.NonGeneric.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Security.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Tuco.Clases.dll' cargado. Símbolos cargados.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Html.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.Hosting.Lifetime: Information: Now listening on: https://localhost:7273
Microsoft.Hosting.Lifetime: Information: Now listening on: http://localhost:5049
Microsoft.Hosting.Lifetime: Information: Application started. Press Ctrl+C to shut down.
Microsoft.Hosting.Lifetime: Information: Hosting environment: Development
Microsoft.Hosting.Lifetime: Information: Content root path: C:\Users\UMA08\source\repos\Tuco\API
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\itextsharp.dll' cargado. El módulo se compiló sin símbolos.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\mscorlib.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Metadata.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.Relational.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.RegularExpressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Swashbuckle.AspNetCore.Swagger.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.OpenApi.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\netstandard.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileSystemGlobbing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Annotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.XDocument.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.MemoryMappedFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.NonGeneric.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Security.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.Hosting.Lifetime: Information: Now listening on: https://localhost:7038
Microsoft.Hosting.Lifetime: Information: Now listening on: http://localhost:5244
Microsoft.Hosting.Lifetime: Information: Application started. Press Ctrl+C to shut down.
Microsoft.Hosting.Lifetime: Information: Hosting environment: Development
Microsoft.Hosting.Lifetime: Information: Content root path: C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web
Verbose logs are written to:
C:\Users\UMA08\AppData\Local\Temp\visualstudio-js-debugger.txt
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Channels.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebSockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Tasks.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Verbose logs are written to:
C:\Users\UMA08\AppData\Local\Temp\visualstudio-js-debugger.txt
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NameResolution.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
CSS Hot Reload ignoring https://localhost:7273/swagger/swagger-ui.css because it was inaccessible or had more than 7000 rules.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Channels.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebSockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Tasks.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NameResolution.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\System.IdentityModel.Tokens.Jwt.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.Tokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.ReaderWriter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'Anonymously Hosted DynamicMethods Assembly' cargado. 
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.WebUtilities.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Immutable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.SqlServer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Data.Common.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Transactions.Local.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Queryable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
El subproceso 1 terminó con código 0 (0x0).
El programa 'clearBrowserData « Adaptador de depuración de JavaScript' terminó con código 4294967295 (0xffffffff).
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Http.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\System.IdentityModel.Tokens.Jwt.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Tokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.ReaderWriter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Protocols.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Protocols.OpenIdConnect.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.JsonWebTokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Immutable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.SqlServer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Data.Common.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Transactions.Local.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.WebUtilities.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\BCrypt.Net-Next.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Queryable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NetworkInformation.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'Activo' on entity type 'Proveedore' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'EstaActiva' on entity type 'SesionUsuario' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\runtimes\win\lib\net6.0\Microsoft.Data.SqlClient.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.StackTrace.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\System.Configuration.ConfigurationManager.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Process.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.RuntimeInformation.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebClient.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.EventBasedAsync.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.Algorithms.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.Identity.Client.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.CodePages.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.TraceSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
El subproceso 5500 terminó con código 0 (0x0).
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.SqlServer.Server.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (26ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Colaborador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.X509Certificates.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario umongegds@gmail.com (ID: 1)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 1682.2877ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 1690.9766ms - 200
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.JsonWebTokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.X509Certificates.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: umongegds@gmail.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Newtonsoft.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.CSharp.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Ver Facturación para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__userId_Value_0
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: 🔍 No encontrado en caché, consultando base de datos...
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
INNER JOIN [RolPermisos] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r0].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioId] = @__userId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__userId_0
API.ServicesAPI.PermisosService: Information: Usuario 1 tiene 5 permisos: Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios
API.ServicesAPI.PermisosService: Information: ✅ Permisos del usuario 1 cargados en caché
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Facturación': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 118.8055ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 123.1432ms - 200
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Serialization.Formatters.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.TraceSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Serialization.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
PermisosController: Information: 🔍 Verificando permiso Ver Productos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Productos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Productos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 60.1321ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 63.6499ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
PermisosController: Information: 🔍 Verificando permiso Entregar Pendientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Entregar Pendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Entregar Pendientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 22.9969ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 25.8408ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
PermisosController: Information: 🔍 Verificando permiso Ver Clientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Clientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 21.4601ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 24.711ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
PermisosController: Information: 🔍 Verificando permiso Ver Reportes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Reportes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 20.9556ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 23.9118ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
PermisosController: Information: 🔍 Verificando permiso Configuracion Sistema para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Configuracion Sistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Configuracion Sistema': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 25.4265ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 28.8285ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
PermisosController: Information: 🔍 Verificando permiso Menu_Inventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Inventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 23.4897ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 27.8042ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_VerProductos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_VerProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_VerProductos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 26.3806ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 29.4304ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_AgregarProductos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_AgregarProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_AgregarProductos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 24.9907ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 28.3974ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ProgramarInventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ProgramarInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_ProgramarInventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 22.7121ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 25.7635ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_HistorialInventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_HistorialInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_HistorialInventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 47.5519ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 51.1334ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
PermisosController: Information: 🔍 Verificando permiso Menu_Ventas para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Ventas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Ventas': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 22.1145ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 25.1782ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
PermisosController: Information: 🔍 Verificando permiso Menu_Proveedores para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Proveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Proveedores': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 24.0502ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 27.3305ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
PermisosController: Information: 🔍 Verificando permiso Menu_Reportes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Reportes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 22.9835ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 26.3027ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Menu_Configuración para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Configuración'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Configuración': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 24.3606ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 27.6845ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistemaDEV para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_HerramientasSistemaDEV': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 25.0353ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 28.5518ms - 200
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NetworkInformation.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'Activo' on entity type 'Proveedore' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'EstaActiva' on entity type 'SesionUsuario' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\runtimes\win\lib\net6.0\Microsoft.Data.SqlClient.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.StackTrace.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\System.Configuration.ConfigurationManager.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Process.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.RuntimeInformation.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebClient.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.EventBasedAsync.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.Algorithms.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.Identity.Client.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.CodePages.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
El subproceso 13752 terminó con código 0 (0x0).
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.SqlServer.Server.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (29ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistema para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_HerramientasSistema': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 24.1297ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 27.3939ms - 200
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090269
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📚 === CARGANDO HISTORIAL DE INVENTARIOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📚 Usuario: Ulises Monge Aguilar
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Historial%20Inventarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Historial%20Inventarios
PermisosController: Information: 🔍 Verificando permiso Ver Historial Inventarios para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Historial Inventarios'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Historial Inventarios'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Historial Inventarios': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Ver Historial Inventarios'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 21.4026ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 24.5511ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Historial%20Inventarios%20Completo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Historial%20Inventarios%20Completo
PermisosController: Information: 🔍 Verificando permiso Ver Historial Inventarios Completo para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Historial Inventarios Completo'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Historial Inventarios Completo'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Historial Inventarios Completo': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Historial Inventarios Completo'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 20.7664ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 24.0759ms - 200
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 === PERMISOS DE HISTORIAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Usuario ID: 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ver historial básico: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ver historial completo: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 👤 Cargando historial personal del usuario 1
GestionLlantera.Web.Services.InventarioService: Information: 🔍 Obteniendo todos los inventarios del sistema
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener todos los inventarios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], COALESCE((
    SELECT TOP(1) [u].[NombreUsuario]
    FROM [Usuarios] AS [u]
    WHERE [u].[UsuarioID] = [i].[UsuarioCreadorId]), 'Desconocido'), [t].[AsignacionId], [t].[InventarioProgramadoId], [t].[UsuarioId], [t].[NombreUsuario], [t].[EmailUsuario], [t].[PermisoConteo], [t].[PermisoAjuste], [t].[PermisoValidacion], [t].[PermisoCompletar], [t].[FechaAsignacion], [t].[UsuarioID0], CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d]
        WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d0]
        WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d1]
        WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
    ELSE 0
END
FROM [InventariosProgramados] AS [i]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u0].[NombreUsuario], [u0].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u0].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u0] ON [a].[UsuarioId] = [u0].[UsuarioID]
) AS [t] ON [i].[InventarioProgramadoId] = [t].[InventarioProgramadoId]
ORDER BY [i].[FechaCreacion] DESC, [i].[InventarioProgramadoId], [t].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 62.1333ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 65.7275ms - 200
GestionLlantera.Web.Services.InventarioService: Information: ✅ Contenido recibido de la API para todos los inventarios
GestionLlantera.Web.Services.InventarioService: Information: ✅ Se obtuvieron 3 inventarios del sistema
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Inventarios con historial: 3
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
🚀 Inicializando módulo de historial de inventarios...
✅ Módulo de historial de inventarios cargado completamente
🔧 Configuración de usuario cargada: {userId: 1, userName: 'Ulises Monge Aguilar', roles: Array(0)}
📚 DOM cargado, inicializando historial...
👤 Usuario actual: {id: 1, nombre: 'Ulises Monge Aguilar', roles: Array(0)}
🔗 Configurando event listeners para filtros avanzados...
✅ Event listeners de filtros avanzados configurados
📦 === CARGANDO HISTORIAL DE INVENTARIOS ===
📦 Llamando al controlador para obtener inventarios...
📦 Usuario ID: 1
✅ Módulo de historial inicializado correctamente
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.TomaInventarioController: Information: 📚 === OBTENIENDO INVENTARIOS ASIGNADOS ===
API.Controllers.TomaInventarioController: Information: 📚 Usuario ID: 1
API.Services.TomaInventarioService: Information: 📋 Obteniendo inventarios asignados al usuario: 1
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090269
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === OBTENIENDO INVENTARIOS PARA HISTORIAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 👤 Usuario actual ID: 1, Es Admin: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 👤 Usuario regular - obteniendo inventarios asignados
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO INVENTARIOS ASIGNADOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Usuario ID: 1
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/inventarios-asignados/1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/inventarios-asignados/1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/inventarios-asignados/1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[FechaAsignacion], CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d]
        WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d0]
        WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d1]
        WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
    ELSE 0
END
FROM [AsignacionesUsuariosInventario] AS [a]
INNER JOIN [InventariosProgramados] AS [i] ON [a].[InventarioProgramadoId] = [i].[InventarioProgramadoId]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[UsuarioId] = @__usuarioId_0
ORDER BY [i].[FechaCreacion] DESC
API.Services.TomaInventarioService: Information: ✅ Se encontraron 3 inventarios asignados
API.Controllers.TomaInventarioController: Information: 📚 Inventarios encontrados: 3
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 26.319ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 29.5908ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): [{"inventarioProgramadoId":5110,"titulo":"Inventario de Prueba ","descripcion":"","fechaInicio":"2025-08-01T00:00:00","fechaFin":"2025-08-08T00:00:00","tipoInventario":"Completo","estado":"Completado","fechaCreacion":"2025-08-01T16:02:28.6260169","usuarioCreadorId":4,"usuarioCreadorNombre":null,"ubicacionEspecifica":null,"incluirStockBajo":false,"asignacionesUsuarios":[{"asignacionId":5110,"inventarioProgramadoId":5110,"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","emailUsuario":"umongegd...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Inventarios: 3
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 3 inventarios del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📊 Inventarios encontrados: 3
📦 Respuesta del servidor: 200 
📦 Datos recibidos: {success: true, data: Array(3), count: 3, usuarioId: 1, esAdmin: false}
✅ Inventarios cargados: 3
👤 Usuario ID: 1
🔑 Es Administrador: false
🔍 DEBUG - Primer inventario recibido: {inventarioProgramadoId: 5110, titulo: 'Inventario de Prueba ', descripcion: '', fechaInicio: '2025-08-01T00:00:00', fechaFin: '2025-08-08T00:00:00', …}
🔍 DEBUG - Propiedades disponibles: (17) ['inventarioProgramadoId', 'titulo', 'descripcion', 'fechaInicio', 'fechaFin', 'tipoInventario', 'estado', 'fechaCreacion', 'usuarioCreadorId', 'usuarioCreadorNombre', 'ubicacionEspecifica', 'incluirStockBajo', 'asignacionesUsuarios', 'totalProductos', 'productosContados', 'discrepancias', 'porcentajeProgreso']
🔍 === APLICANDO FILTROS AVANZADOS ===
🔍 Estado seleccionado: 
🔍 === TOTAL INVENTARIOS FILTRADOS ===: 3
🎨 Renderizando inventarios: 3
✅ Contador de inventarios actualizado: 3
✅ Inventarios renderizados correctamente
✅ Contador de inventarios actualizado: 3
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 === MÉTODO EJECUTAR LLAMADO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 ID del inventario: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 URL solicitada: /TomaInventario/Ejecutar/5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Token JWT obtenido correctamente
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5109
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 20.4087ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 23.541ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === INFORMACIÓN DEL INVENTARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 ID: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Título: Prueba de Inventario Permisos y notificacion
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Estado: En Progreso
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha inicio: 08/01/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha fin: 08/08/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Total asignaciones: 1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Programar%20Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Programar%20Inventario
PermisosController: Information: 🔍 Verificando permiso Programar Inventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 17.451ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 20.1459ms - 200
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 === PERMISOS DEL USUARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Usuario ID: 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede contar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ajustar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede validar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Es admin: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 === DATOS PREPARADOS PARA LA VISTA ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.InventarioId: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.UsuarioId: 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RETORNANDO VISTA CON MODELO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Titulo: Prueba de Inventario Permisos y notificacion
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Estado: En Progreso
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090269
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
🔧 === CONFIGURACIÓN INICIAL ===
🔧 Model.InventarioProgramadoId: 5109
🔧 Model.Estado: En Progreso
🔧 Model.Titulo: Prueba de Inventario Permisos y notificacion
🔧 ViewBag.UsuarioId: 1
🔧 ViewBag.PuedeContar: true
🔧 window.inventarioConfig: {inventarioId: 5109, usuarioId: 1, permisos: {…}}
🚀 === DEPURACIÓN: INICIALIZANDO EJECUTAR INVENTARIO ===
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMjY5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.NMLy5S4avaxEowXtgPFoNpPOu4npk85lqOgcdgf2QXE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
🚀 Document ready ejecutado
🚀 window.inventarioConfig: {inventarioId: 5109, usuarioId: 1, permisos: {…}}
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
🚀 URL actual: https://localhost:7038/TomaInventario/Ejecutar/5109
🚀 ID obtenido de config: 5109
🔍 Obteniendo ID del inventario desde URL...
🔍 Path actual: /TomaInventario/Ejecutar/5109
🔍 Partes del path: (4) ['', 'TomaInventario', 'Ejecutar', '5109']
🔍 ID extraído: 5109
🚀 ID obtenido de URL: 5109
🚀 ID final seleccionado: 5109
✅ ID del inventario obtenido: 5109
✅ Tipo del ID: number
🚀 Llamando a inicializarEjecutorInventario...
📋 Inicializando ejecutor para inventario ID: 5109
🔒 === CARGANDO PERMISOS ESPECÍFICOS DEL INVENTARIO ===
🔒 Inventario ID: 5109
🔒 Usuario ID: 1
🔐 === VERIFICANDO PERMISOS DE ADMINISTRADOR ===
🔐 Configuración local esAdmin: false
✅ Event listeners de filtrado configurados
🕵️ Detective activado - monitoreando cambios en la barra
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090269
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
Excepción producida: 'System.InvalidOperationException' en Microsoft.AspNetCore.Routing.dll
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Excepción producida: 'System.InvalidOperationException' en System.Private.CoreLib.dll
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Metadata.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: Error: An unhandled exception has occurred while executing the request.

System.InvalidOperationException: Endpoint PermisosController.VerificarAdmin (API) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at GestionLlantera.Web.Middleware.PermisosAuditoriaMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\PermisosAuditoriaMiddleware.cs:line 22
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at GestionLlantera.Web.Middleware.JwtClaimsMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\JwtClaimsMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
⚠️ No se pudo verificar con servidor, usando configuración local
🔐 Resultado verificación admin: false
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔒 Obteniendo permisos del usuario 1 en inventario 5109
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5109
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.3493ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.0146ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5109
✅ Permisos específicos cargados: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
📋 Cargando información del inventario 5109...
✅ Usando información del inventario desde configuración global
✅ Información del inventario cargada desde configuración
🔄 Cargando ajustes pendientes ANTES que productos...
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5109
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5109/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5109/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 21.7862ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 24.7122ms - 200
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 0 ajustes para inventario 5109
✅ Cargados 0 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
📦 Cargando productos CON ajustes ya cargados...
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5109
📦 Tipo de inventarioId: number
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5109
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5109
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5109/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5109/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5109/productos
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.CSharp.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5109, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 7 contados, 0 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 121.8249ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 124.6142ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5487,"inventarioProgramadoId":5109,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T15:49:00.4182894","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=7, Pendientes=0, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔍 Primer producto: {detalleId: 5487, inventarioProgramadoId: 5109, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
📝 Usuario solo puede notificar conteo completado
⚠️ Panel conteoCompletadoPanel no existe, creando dinámicamente...
🔨 Creando panel de conteo completado dinámicamente...
✅ Event listeners configurados para panel de conteo completado
✅ Panel de conteo completado creado y configurado
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5109
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5109/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5109/progreso
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5109
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 33.4118ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 36.2915ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
📊 Estadísticas actualizadas correctamente: 0% completado
🔒 Aplicando control de permisos en la interfaz...
✅ Info de permisos mostrada: 📝 Conteo
✅ Control de permisos aplicado correctamente
✅ Ejecutor de inventario inicializado correctamente
🛡️ Barra restaurada a: 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
📧 Notificando supervisor - conteo completado
👁️ Iniciando monitor del badge de estado...
✅ Observer del badge configurado
🔍 Badges encontrados: (31) ['📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para revisión', 'Listo para finalizar', 'ID: -', 'Tipo']
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📧 === NOTIFICANDO CONTEO COMPLETADO DESDE WEB ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📧 Inventario ID: 5109, Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5109
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.8219ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.603ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5109
GestionLlantera.Web.Services.TomaInventarioService: Information: 📧 === NOTIFICANDO CONTEO COMPLETADO DESDE SERVICIO WEB ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📧 Inventario ID: 5109
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/NotificarConteoCompletado/5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/NotificarConteoCompletado/5109
API.Controllers.TomaInventarioController: Information: 📧 === NOTIFICANDO CONTEO COMPLETADO AL CREADOR ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId], [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [InventariosProgramados] AS [i]
INNER JOIN [Usuarios] AS [u] ON [i].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioActualId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = @__usuarioActualId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 100), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 50), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notificaciones] ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
OUTPUT INSERTED.[NotificacionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.NotificacionService: Information: Notificación creada exitosamente para usuario 4: 📝 Conteo Completado - Requiere Supervisión
API.Controllers.TomaInventarioController: Information: ✅ Notificación enviada al creador del inventario: Julissa Mejias (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 47.2932ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 50.1649ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Notificación enviada exitosamente para inventario 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Notificación enviada exitosamente para inventario 5109
✅ Supervisor notificado exitosamente
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32), @p11='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 255), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
UPDATE [SesionUsuario] SET [EstaActiva] = @p6, [FechaHoraInicio] = @p7, [FechaInvalidacion] = @p8, [TokenHash] = @p9, [UsuarioID] = @p10
OUTPUT 1
WHERE [SesionID] = @p11;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 1. Total: 2
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 38.0021ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 41.5406ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Administrador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario zlktmbs334@tormails.com (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 208.4642ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 211.637ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: zlktmbs334@tormails.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Ver Facturación para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__userId_Value_0
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Facturación
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.7009ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.3893ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
PermisosController: Information: 🔍 Verificando permiso Ver Productos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Productos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Productos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5572ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.1305ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
PermisosController: Information: 🔍 Verificando permiso Entregar Pendientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Entregar Pendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Entregar Pendientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.0733ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.8372ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
PermisosController: Information: 🔍 Verificando permiso Ver Clientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Clientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.7387ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.4536ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
PermisosController: Information: 🔍 Verificando permiso Ver Reportes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Reportes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4714ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.0411ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
PermisosController: Information: 🔍 Verificando permiso Configuracion Sistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Configuracion Sistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Configuracion Sistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.0464ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.6633ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
PermisosController: Information: 🔍 Verificando permiso Menu_Inventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.2399ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.965ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_VerProductos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_VerProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_VerProductos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4373ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.0968ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_AgregarProductos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_AgregarProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_AgregarProductos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4749ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.0121ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ProgramarInventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ProgramarInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ProgramarInventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.8779ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.4547ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_HistorialInventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_HistorialInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_HistorialInventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.892ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.6001ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
PermisosController: Information: 🔍 Verificando permiso Menu_Ventas para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Ventas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Ventas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1251ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.8016ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Clientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_Clientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.1001ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.6975ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Facturación para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_Facturación
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5462ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.2306ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_EntregasPendientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_EntregasPendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_EntregasPendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_EntregasPendientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5849ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.3189ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
PermisosController: Information: 🔍 Verificando permiso Menu_Proveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Proveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Proveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.294ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.9729ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionProveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionProveedores
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_GestionProveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_GestionProveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_GestionProveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_GestionProveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1305ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.8906ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_PedidosProveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_PedidosProveedores
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_PedidosProveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_PedidosProveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_PedidosProveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_PedidosProveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5572ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.3438ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
PermisosController: Information: 🔍 Verificando permiso Menu_Reportes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Reportes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4957ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.0887ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarExcel
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarExcel
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ExportarExcel para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ExportarExcel'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ExportarExcel'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ExportarExcel
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.9875ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.6765ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarPDF
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarPDF
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ExportarPDF para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ExportarPDF'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ExportarPDF'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ExportarPDF
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.01ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.7876ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ReportesVentas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ReportesVentas
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ReportesVentas para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ReportesVentas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ReportesVentas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ReportesVentas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.9792ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.7799ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Menu_Configuración para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Configuración'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Configuración
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.6259ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.6707ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_RolesPermisos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_RolesPermisos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_RolesPermisos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_RolesPermisos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_RolesPermisos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_RolesPermisos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.4266ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.3959ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionUsuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionUsuarios
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_GestionUsuarios para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_GestionUsuarios'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_GestionUsuarios'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_GestionUsuarios
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.678ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.4395ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistemaDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_HerramientasSistemaDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.5128ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.3291ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisosDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisosDEV
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_DiagnosticoPermisosDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_DiagnosticoPermisosDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_DiagnosticoPermisosDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_DiagnosticoPermisosDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1278ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.8934ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_LogsSistemaDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_LogsSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_LogsSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_LogsSistemaDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.7226ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.4961ms - 200
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 1 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_HerramientasSistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.0962ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.1545ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_DiagnosticoPermisos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_DiagnosticoPermisos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_DiagnosticoPermisos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_DiagnosticoPermisos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.1445ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.7174ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistema
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_LogsSistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_LogsSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_LogsSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_LogsSistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4404ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.9535ms - 200
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 1 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
El subproceso 18952 terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 === MÉTODO EJECUTAR LLAMADO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 ID del inventario: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 URL solicitada: /TomaInventario/Ejecutar/5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Token JWT obtenido correctamente
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5109
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.0894ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 6.8857ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === INFORMACIÓN DEL INVENTARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 ID: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Título: Prueba de Inventario Permisos y notificacion
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Estado: En Progreso
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha inicio: 08/01/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha fin: 08/08/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Total asignaciones: 1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Programar%20Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Programar%20Inventario
PermisosController: Information: 🔍 Verificando permiso Programar Inventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Programar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.3745ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.0407ms - 200
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 === PERMISOS DEL USUARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Usuario ID: 4
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ajustar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede validar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Es admin: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 === DATOS PREPARADOS PARA LA VISTA ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.InventarioId: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.UsuarioId: 4
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RETORNANDO VISTA CON MODELO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Titulo: Prueba de Inventario Permisos y notificacion
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Estado: En Progreso
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
🔧 === CONFIGURACIÓN INICIAL ===
🔧 Model.InventarioProgramadoId: 5109
🔧 Model.Estado: En Progreso
🔧 Model.Titulo: Prueba de Inventario Permisos y notificacion
🔧 ViewBag.UsuarioId: 4
🔧 ViewBag.PuedeContar: true
🔧 window.inventarioConfig: {inventarioId: 5109, usuarioId: 4, permisos: {…}}
🚀 === DEPURACIÓN: INICIALIZANDO EJECUTAR INVENTARIO ===
🚀 Document ready ejecutado
🚀 window.inventarioConfig: {inventarioId: 5109, usuarioId: 4, permisos: {…}}
🚀 URL actual: https://localhost:7038/TomaInventario/Ejecutar/5109
🚀 ID obtenido de config: 5109
🔍 Obteniendo ID del inventario desde URL...
🔍 Path actual: /TomaInventario/Ejecutar/5109
🔍 Partes del path: (4) ['', 'TomaInventario', 'Ejecutar', '5109']
🔍 ID extraído: 5109
🚀 ID obtenido de URL: 5109
🚀 ID final seleccionado: 5109
✅ ID del inventario obtenido: 5109
✅ Tipo del ID: number
🚀 Llamando a inicializarEjecutorInventario...
📋 Inicializando ejecutor para inventario ID: 5109
🔒 === CARGANDO PERMISOS ESPECÍFICOS DEL INVENTARIO ===
🔒 Inventario ID: 5109
🔒 Usuario ID: 4
🔐 === VERIFICANDO PERMISOS DE ADMINISTRADOR ===
🔐 Configuración local esAdmin: true
✅ Event listeners de filtrado configurados
🕵️ Detective activado - monitoreando cambios en la barra
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
⚠️ No se pudo verificar con servidor, usando configuración local
🔐 Resultado verificación admin: true
👑 Usuario detectado como administrador
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: Error: An unhandled exception has occurred while executing the request.

System.InvalidOperationException: Endpoint PermisosController.VerificarAdmin (API) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at GestionLlantera.Web.Middleware.PermisosAuditoriaMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\PermisosAuditoriaMiddleware.cs:line 22
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at GestionLlantera.Web.Middleware.JwtClaimsMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\JwtClaimsMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔒 Obteniendo permisos del usuario 4 en inventario 5109
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5109
Excepción producida: 'System.InvalidOperationException' en Microsoft.AspNetCore.Routing.dll
Excepción producida: 'System.InvalidOperationException' en System.Private.CoreLib.dll
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 3.544ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 6.0733ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Warning: 🚫 Usuario no asignado intentó acceder al inventario 5109
⚠️ Usuario sin permisos específicos en este inventario
📋 Cargando información del inventario 5109...
✅ Usando información del inventario desde configuración global
✅ Información del inventario cargada desde configuración
🔄 Cargando ajustes pendientes ANTES que productos...
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5109
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5109/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5109/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5109
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 0 ajustes para inventario 5109
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.2279ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.961ms - 200
✅ Cargados 0 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
📦 Cargando productos CON ajustes ya cargados...
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5109
📦 Tipo de inventarioId: number
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5109
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5109
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5109
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5109/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5109/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5109/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5109, Usuario: Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Programar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por permisos de administrador
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 7 contados, 0 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 30.4945ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 33.172ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5487,"inventarioProgramadoId":5109,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T15:49:00.4182894","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=7, Pendientes=0, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔍 Primer producto: {detalleId: 5487, inventarioProgramadoId: 5109, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5109
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5109/progreso
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5109/progreso
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5109
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5109
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: false, puedeAjustar: false, puedeValidar: false, esAdmin: false, usuarioId: 4}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: false
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
❌ Usuario sin permisos suficientes
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.2851ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.3369ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
📊 Estadísticas actualizadas correctamente: 0% completado
🔒 Aplicando control de permisos en la interfaz...
✅ Info de permisos mostrada: 👁️ Solo lectura
✅ Control de permisos aplicado correctamente
✅ Ejecutor de inventario inicializado correctamente
🛡️ Barra restaurada a: 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
👁️ Iniciando monitor del badge de estado...
✅ Observer del badge configurado
🔍 Badges encontrados: (30) ['👁️ Solo lectura', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
El subproceso 5952 terminó con código 0 (0x0).
🔍 Badges encontrados: (30) ['👁️ Solo lectura', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (30) ['👁️ Solo lectura', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔐 Token JWT obtenido correctamente para cargar página de programar inventario
GestionLlantera.Web.Services.UsuariosService: Information: Obteniendo todos los usuarios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Usuarios/usuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Usuarios/usuarios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID], [u].[NombreUsuario], [u].[Email], [u].[Activo], [t].[NombreRol], [t].[UsuarioId], [t].[RolId], [t].[RolID0]
FROM [Usuarios] AS [u]
LEFT JOIN (
    SELECT [r].[NombreRol], [u0].[UsuarioId], [u0].[RolId], [r].[RolID] AS [RolID0]
    FROM [UsuarioRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RolId] = [r].[RolID]
) AS [t] ON [u].[UsuarioID] = [t].[UsuarioId]
ORDER BY [u].[UsuarioID], [t].[UsuarioId], [t].[RolId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 19.2493ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 23.1679ms - 200
GestionLlantera.Web.Services.UsuariosService: Information: Respuesta recibida para ObtenerTodosAsync: 717 caracteres
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventarios programados
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventarios programados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], COALESCE((
    SELECT TOP(1) [u].[NombreUsuario]
    FROM [Usuarios] AS [u]
    WHERE [u].[UsuarioID] = [i].[UsuarioCreadorId]), 'Desconocido'), [t].[AsignacionId], [t].[InventarioProgramadoId], [t].[UsuarioId], [t].[NombreUsuario], [t].[EmailUsuario], [t].[PermisoConteo], [t].[PermisoAjuste], [t].[PermisoValidacion], [t].[PermisoCompletar], [t].[FechaAsignacion], [t].[UsuarioID0], CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d]
        WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d0]
        WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d1]
        WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
    ELSE 0
END
FROM [InventariosProgramados] AS [i]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u0].[NombreUsuario], [u0].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u0].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u0] ON [a].[UsuarioId] = [u0].[UsuarioID]
) AS [t] ON [i].[InventarioProgramadoId] = [t].[InventarioProgramadoId]
ORDER BY [i].[FechaCreacion] DESC, [i].[InventarioProgramadoId], [t].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.9585ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.72ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventarios programados
GestionLlantera.Web.Controllers.InventarioController: Information: === OBTENIENDO ID USUARIO ACTUAL ===
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: JwtToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: userId = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Administrador
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Facturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Costos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Utilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Programar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Completa
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ajustar Stock
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Usuarios
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerCostos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerUtilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = ProgramarInventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Iniciar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Completar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Descargar Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Facturación
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = CompletarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = EditarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = AnularFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Entregar Pendientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: exp = 1754090296
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: iss = Tuco.API
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: aud = Tuco.Client
GestionLlantera.Web.Controllers.InventarioController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.InventarioController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: ID parseado de NameIdentifier: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
Formulario encontrado: form#formNuevoInventario
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
El subproceso '.NET ThreadPool Worker' (30072) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30496) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (33640) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (26732) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (27272) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (9396) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (17600) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (27968) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (8592) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (2100) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (25384) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (3464) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (28616) terminó con código 0 (0x0).
=== SUBMIT EJECUTADO ===
=== VALIDACIONES PASADAS ===
=== DATOS QUE SE ENVÍAN AL SERVIDOR ===
{
  "titulo": "Inventario de Prueba 1",
  "descripcion": "Prueba de Enviar a recontar",
  "fechaInicio": "2025-08-01",
  "fechaFin": "2025-08-08",
  "tipoInventario": "Completo",
  "ubicacionEspecifica": "",
  "incluirStockBajo": true,
  "usuarioCreadorId": 4,
  "usuarioCreadorNombre": "Usuario Actual",
  "asignacionesUsuarios": [
    {
      "usuarioId": 1,
      "nombreUsuario": "Ulises Monge Aguilar",
      "emailUsuario": "umongegds@gmail.com",
      "permisoConteo": true,
      "permisoAjuste": false,
      "permisoValidacion": false,
      "permisoCompletar": false
    }
  ]
}
=== FIN DATOS ===
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: === MÉTODO JSON EJECUTADO ===
GestionLlantera.Web.Controllers.InventarioController: Information: 🔐 Token JWT obtenido correctamente para JSON
GestionLlantera.Web.Controllers.InventarioController: Information: Datos recibidos:
GestionLlantera.Web.Controllers.InventarioController: Information: - Título: Inventario de Prueba 1
GestionLlantera.Web.Controllers.InventarioController: Information: - UsuarioCreadorId recibido: 4
GestionLlantera.Web.Controllers.InventarioController: Information: === OBTENIENDO ID USUARIO ACTUAL ===
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: JwtToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: userId = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Administrador
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Facturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Costos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Utilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Programar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Completa
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ajustar Stock
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Usuarios
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerCostos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerUtilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = ProgramarInventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Iniciar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Completar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Descargar Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Facturación
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = CompletarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = EditarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = AnularFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Entregar Pendientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: exp = 1754090296
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: iss = Tuco.API
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: aud = Tuco.Client
GestionLlantera.Web.Controllers.InventarioController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.InventarioController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: ID parseado de NameIdentifier: 4
GestionLlantera.Web.Controllers.InventarioController: Information: - UsuarioActualId desde método: 4
GestionLlantera.Web.Services.UsuariosService: Information: Obteniendo todos los usuarios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Usuarios/usuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Usuarios/usuarios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID], [u].[NombreUsuario], [u].[Email], [u].[Activo], [t].[NombreRol], [t].[UsuarioId], [t].[RolId], [t].[RolID0]
FROM [Usuarios] AS [u]
LEFT JOIN (
    SELECT [r].[NombreRol], [u0].[UsuarioId], [u0].[RolId], [r].[RolID] AS [RolID0]
    FROM [UsuarioRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RolId] = [r].[RolID]
) AS [t] ON [u].[UsuarioID] = [t].[UsuarioId]
ORDER BY [u].[UsuarioID], [t].[UsuarioId], [t].[RolId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.3023ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.5252ms - 200
GestionLlantera.Web.Services.UsuariosService: Information: Respuesta recibida para ObtenerTodosAsync: 717 caracteres
GestionLlantera.Web.Controllers.InventarioController: Information: - ¿Usuario existe en BD?: True
GestionLlantera.Web.Controllers.InventarioController: Information: Enviando al servicio con UsuarioCreadorId: 4 y Token
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token recibido: {HasToken}
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para guardar inventario programado
GestionLlantera.Web.Services.InventarioService: Information: JSON enviado a la API: {"InventarioProgramadoId":0,"Titulo":"Inventario de Prueba 1","Descripcion":"Prueba de Enviar a recontar","FechaInicio":"2025-08-01T00:00:00","FechaFin":"2025-08-08T00:00:00","TipoInventario":"Completo","Estado":"Programado","FechaCreacion":"2025-08-01T16:18:56","UsuarioCreadorId":4,"UsuarioCreadorNombre":"Usuario Actual","UbicacionEspecifica":"","IncluirStockBajo":true,"AsignacionesUsuarios":[{"AsignacionId":0,"InventarioProgramadoId":0,"UsuarioId":1,"NombreUsuario":"Ulises Monge Aguilar","EmailUsuario":"umongegds@gmail.com","PermisoConteo":true,"PermisoAjuste":false,"PermisoValidacion":false,"PermisoCompletar":false,"FechaAsignacion":null}],"TotalProductos":0,"ProductosContados":0,"Discrepancias":0,"PorcentajeProgreso":0}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/Inventario/inventarios-programados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/Inventario/inventarios-programados
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Programar Inventario'
ValidarPermisoAsync: Information: 🔍 Usuario: Julissa Mejias
ValidarPermisoAsync: Information: 🔍 Controlador: InventarioController
ValidarPermisoAsync: Information: 🔍 Acción: CrearInventarioProgramado
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 4
ValidarPermisoAsync: Information: 🔍 Es administrador: True
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Programar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Julissa Mejias, Permiso: Programar Inventario
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (Size = 50), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Boolean), @p6='?' (Size = 50), @p7='?' (Size = 100), @p8='?' (Size = 100), @p9='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InventariosProgramados] ([Descripcion], [Estado], [FechaCreacion], [FechaFin], [FechaInicio], [IncluirStockBajo], [TipoInventario], [Titulo], [UbicacionEspecifica], [UsuarioCreadorId])
OUTPUT INSERTED.[InventarioProgramadoId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
API.Controllers.InventarioController: Information: 📋 Asignando automáticamente al creador (Usuario ID: 4) con todos los permisos
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = Boolean), @p13='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [AsignacionesUsuariosInventario] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1)) AS i ([FechaAsignacion], [InventarioProgramadoId], [PermisoAjuste], [PermisoCompletar], [PermisoConteo], [PermisoValidacion], [UsuarioId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([FechaAsignacion], [InventarioProgramadoId], [PermisoAjuste], [PermisoCompletar], [PermisoConteo], [PermisoValidacion], [UsuarioId])
VALUES (i.[FechaAsignacion], i.[InventarioProgramadoId], i.[PermisoAjuste], i.[PermisoCompletar], i.[PermisoConteo], i.[PermisoValidacion], i.[UsuarioId])
OUTPUT INSERTED.[AsignacionId], i._Position;
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 100), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 50), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notificaciones] ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
OUTPUT INSERTED.[NotificacionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.NotificacionService: Information: Notificación creada exitosamente para usuario 4: ✅ Inventario Creado
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 100), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 50), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notificaciones] ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
OUTPUT INSERTED.[NotificacionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.NotificacionService: Information: Notificación creada exitosamente para usuario 1: 📋 Inventario Asignado
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 59.1027ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 61.3596ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Respuesta de la API - Status: OK, Content: {"message":"Inventario programado creado exitosamente","inventarioId":5111,"success":true}
GestionLlantera.Web.Services.InventarioService: Information: Inventario programado guardado exitosamente
GestionLlantera.Web.Controllers.InventarioController: Information: Inventario guardado exitosamente
Respuesta: status=200, ok=true
Respuesta exitosa: {success: true, message: 'Inventario programado exitosamente'}
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔐 Token JWT obtenido correctamente para cargar página de programar inventario
GestionLlantera.Web.Services.UsuariosService: Information: Obteniendo todos los usuarios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Usuarios/usuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Usuarios/usuarios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID], [u].[NombreUsuario], [u].[Email], [u].[Activo], [t].[NombreRol], [t].[UsuarioId], [t].[RolId], [t].[RolID0]
FROM [Usuarios] AS [u]
LEFT JOIN (
    SELECT [r].[NombreRol], [u0].[UsuarioId], [u0].[RolId], [r].[RolID] AS [RolID0]
    FROM [UsuarioRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RolId] = [r].[RolID]
) AS [t] ON [u].[UsuarioID] = [t].[UsuarioId]
ORDER BY [u].[UsuarioID], [t].[UsuarioId], [t].[RolId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.395ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.5216ms - 200
GestionLlantera.Web.Services.UsuariosService: Information: Respuesta recibida para ObtenerTodosAsync: 717 caracteres
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventarios programados
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventarios programados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], COALESCE((
    SELECT TOP(1) [u].[NombreUsuario]
    FROM [Usuarios] AS [u]
    WHERE [u].[UsuarioID] = [i].[UsuarioCreadorId]), 'Desconocido'), [t].[AsignacionId], [t].[InventarioProgramadoId], [t].[UsuarioId], [t].[NombreUsuario], [t].[EmailUsuario], [t].[PermisoConteo], [t].[PermisoAjuste], [t].[PermisoValidacion], [t].[PermisoCompletar], [t].[FechaAsignacion], [t].[UsuarioID0], CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d]
        WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d0]
        WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d1]
        WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
    ELSE 0
END
FROM [InventariosProgramados] AS [i]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u0].[NombreUsuario], [u0].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u0].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u0] ON [a].[UsuarioId] = [u0].[UsuarioID]
) AS [t] ON [i].[InventarioProgramadoId] = [t].[InventarioProgramadoId]
ORDER BY [i].[FechaCreacion] DESC, [i].[InventarioProgramadoId], [t].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.559ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.7973ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventarios programados
GestionLlantera.Web.Controllers.InventarioController: Information: === OBTENIENDO ID USUARIO ACTUAL ===
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: JwtToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: userId = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Administrador
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Facturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Costos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Utilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Programar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Completa
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ajustar Stock
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Usuarios
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerCostos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerUtilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = ProgramarInventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Iniciar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Completar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Descargar Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Facturación
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = CompletarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = EditarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = AnularFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Entregar Pendientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: exp = 1754090296
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: iss = Tuco.API
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: aud = Tuco.Client
GestionLlantera.Web.Controllers.InventarioController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.InventarioController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: ID parseado de NameIdentifier: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 1 notificaciones no leídas
Formulario encontrado: form#formNuevoInventario
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 1 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔒 Usuario Julissa Mejias - Puede ver programados: True
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.1546ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.587ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Iniciar%20Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Iniciar%20Inventario
PermisosController: Information: 🔍 Verificando permiso Iniciar Inventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Iniciar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Iniciar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Iniciar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.111ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.8526ms - 200
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
🔧 JavaScript cargado para detalle inventario programado
🔧 Botón encontrado: button.btn.btn-success.iniciar-inventario-btn
🔧 Agregando event listener al botón
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔐 Token JWT obtenido correctamente para cargar página de programar inventario
GestionLlantera.Web.Services.UsuariosService: Information: Obteniendo todos los usuarios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Usuarios/usuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Usuarios/usuarios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID], [u].[NombreUsuario], [u].[Email], [u].[Activo], [t].[NombreRol], [t].[UsuarioId], [t].[RolId], [t].[RolID0]
FROM [Usuarios] AS [u]
LEFT JOIN (
    SELECT [r].[NombreRol], [u0].[UsuarioId], [u0].[RolId], [r].[RolID] AS [RolID0]
    FROM [UsuarioRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RolId] = [r].[RolID]
) AS [t] ON [u].[UsuarioID] = [t].[UsuarioId]
ORDER BY [u].[UsuarioID], [t].[UsuarioId], [t].[RolId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.1084ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.8871ms - 200
GestionLlantera.Web.Services.UsuariosService: Information: Respuesta recibida para ObtenerTodosAsync: 717 caracteres
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventarios programados
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventarios programados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], COALESCE((
    SELECT TOP(1) [u].[NombreUsuario]
    FROM [Usuarios] AS [u]
    WHERE [u].[UsuarioID] = [i].[UsuarioCreadorId]), 'Desconocido'), [t].[AsignacionId], [t].[InventarioProgramadoId], [t].[UsuarioId], [t].[NombreUsuario], [t].[EmailUsuario], [t].[PermisoConteo], [t].[PermisoAjuste], [t].[PermisoValidacion], [t].[PermisoCompletar], [t].[FechaAsignacion], [t].[UsuarioID0], CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d]
        WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d0]
        WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d1]
        WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
    ELSE 0
END
FROM [InventariosProgramados] AS [i]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u0].[NombreUsuario], [u0].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u0].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u0] ON [a].[UsuarioId] = [u0].[UsuarioID]
) AS [t] ON [i].[InventarioProgramadoId] = [t].[InventarioProgramadoId]
ORDER BY [i].[FechaCreacion] DESC, [i].[InventarioProgramadoId], [t].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.6901ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 12.1451ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventarios programados
GestionLlantera.Web.Controllers.InventarioController: Information: === OBTENIENDO ID USUARIO ACTUAL ===
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: JwtToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: userId = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Administrador
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Facturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Costos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Utilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Programar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Completa
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ajustar Stock
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Usuarios
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerCostos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerUtilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = ProgramarInventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Iniciar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Completar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Descargar Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Facturación
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = CompletarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = EditarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = AnularFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Entregar Pendientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: exp = 1754090296
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: iss = Tuco.API
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: aud = Tuco.Client
GestionLlantera.Web.Controllers.InventarioController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.InventarioController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: ID parseado de NameIdentifier: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090296
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
Formulario encontrado: form#formNuevoInventario
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDI5NiwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.bbhVkRdrfBJBonPs2EIwQcRaEASDbqf1Oz9PapnS6uE
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090296
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 4. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.3783ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.1006ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Colaborador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario umongegds@gmail.com (ID: 1)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 205.006ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 207.8595ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: umongegds@gmail.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 1 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔒 Usuario Ulises Monge Aguilar - Puede ver programados: False
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.8087ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.6216ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Iniciar%20Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Iniciar%20Inventario
PermisosController: Information: 🔍 Verificando permiso Iniciar Inventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Iniciar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Iniciar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Iniciar Inventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Iniciar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 16.0193ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.5538ms - 200
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
🔧 JavaScript cargado para detalle inventario programado
🔧 Botón encontrado: button.btn.btn-success.iniciar-inventario-btn
🔧 Agregando event listener al botón
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
🔧 ¡CLICK DETECTADO!
🔧 ID del inventario: 5111
🚀 Iniciando inventario: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 === INICIANDO INVENTARIO DESDE CONTROLADOR WEB ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 👤 Usuario: Ulises Monge Aguilar, Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Token JWT obtenido correctamente
GestionLlantera.Web.Services.TomaInventarioService: Information: 🚀 Iniciando inventario 5111 desde servicio web
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/iniciar
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/iniciar
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Iniciar Inventario'
ValidarPermisoAsync: Information: 🔍 Usuario: Ulises Monge Aguilar
ValidarPermisoAsync: Information: 🔍 Controlador: TomaInventarioController
ValidarPermisoAsync: Information: 🔍 Acción: IniciarInventario
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 1
ValidarPermisoAsync: Information: 🔍 Es administrador: False
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Iniciar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Iniciar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Iniciar Inventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Iniciar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Ulises Monge Aguilar, Permiso: Iniciar Inventario
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
API.Controllers.TomaInventarioController: Information: 🚀 === INICIANDO INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 👤 Usuario: Ulises Monge Aguilar, Inventario ID: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Descripcion], [t].[Estado], [t].[FechaCreacion], [t].[FechaFin], [t].[FechaInicio], [t].[IncluirStockBajo], [t].[TipoInventario], [t].[Titulo], [t].[UbicacionEspecifica], [t].[UsuarioCreadorId], [a].[AsignacionId], [a].[FechaAsignacion], [a].[InventarioProgramadoId], [a].[PermisoAjuste], [a].[PermisoCompletar], [a].[PermisoConteo], [a].[PermisoValidacion], [a].[UsuarioId]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
) AS [t]
LEFT JOIN [AsignacionesUsuariosInventario] AS [a] ON [t].[InventarioProgramadoId] = [a].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId]
API.Controllers.TomaInventarioController: Information: ✅ Inventario válido: 'Inventario de Prueba 1'
API.Controllers.TomaInventarioController: Information: 🔄 Estado cambiado a: En Progreso
API.Controllers.TomaInventarioController: Information: 📋 === GENERANDO DETALLES DE INVENTARIO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [Productos] AS [p]
API.Controllers.TomaInventarioController: Information: ✅ Se encontraron 7 productos para el inventario
API.Controllers.TomaInventarioController: Information: 📋 Se generaron 7 registros de detalle
API.Controllers.TomaInventarioController: Information: 📧 === ENVIANDO NOTIFICACIONES DE INICIO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 500), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Int32), @p13='?' (Size = 500), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int32), @p21='?' (Size = 500), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = DateTime2), @p28='?' (DbType = Int32), @p29='?' (Size = 500), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = DateTime2), @p36='?' (DbType = Int32), @p37='?' (Size = 500), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (DbType = Int32), @p45='?' (Size = 500), @p46='?' (DbType = Int32), @p47='?' (DbType = Int32), @p48='?' (DbType = Int32), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (DbType = DateTime2), @p52='?' (DbType = Int32), @p53='?' (Size = 500), @p54='?' (DbType = Int32), @p55='?' (DbType = Int32), @p57='?' (DbType = Int32), @p56='?' (Size = 50), @p58='?' (DbType = Int32), @p59='?' (Size = 100), @p60='?' (DbType = DateTime2), @p61='?' (DbType = DateTime2), @p62='?' (Size = 100), @p63='?' (DbType = Boolean), @p64='?' (Size = 500), @p65='?' (Size = 50), @p66='?' (Size = 200), @p67='?' (Size = 500), @p68='?' (DbType = Int32), @p69='?' (DbType = Int32), @p70='?' (Size = 100), @p71='?' (DbType = DateTime2), @p72='?' (DbType = DateTime2), @p73='?' (Size = 100), @p74='?' (DbType = Boolean), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 200), @p78='?' (Size = 500), @p79='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
MERGE [DetallesInventarioProgramado] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, 0),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, 1),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, 2),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 3),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, 4),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, 5),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, 6)) AS i ([CantidadFisica], [CantidadSistema], [Diferencia], [FechaConteo], [InventarioProgramadoId], [Observaciones], [ProductoId], [UsuarioConteoId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CantidadFisica], [CantidadSistema], [Diferencia], [FechaConteo], [InventarioProgramadoId], [Observaciones], [ProductoId], [UsuarioConteoId])
VALUES (i.[CantidadFisica], i.[CantidadSistema], i.[Diferencia], i.[FechaConteo], i.[InventarioProgramadoId], i.[Observaciones], i.[ProductoId], i.[UsuarioConteoId])
OUTPUT INSERTED.[DetalleId], i._Position;
UPDATE [InventariosProgramados] SET [Estado] = @p56
OUTPUT 1
WHERE [InventarioProgramadoId] = @p57;
MERGE [Notificaciones] USING (
VALUES (@p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, 0),
(@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, 1)) AS i ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
VALUES (i.[EntidadId], i.[EntidadTipo], i.[FechaCreacion], i.[FechaLectura], i.[Icono], i.[Leida], i.[Mensaje], i.[Tipo], i.[Titulo], i.[UrlAccion], i.[UsuarioId])
OUTPUT INSERTED.[NotificacionId], i._Position;
API.ServicesAPI.NotificacionService: Information: Se crearon 2 notificaciones: 🚀 Inventario Iniciado
API.Controllers.TomaInventarioController: Information: ✅ Notificaciones enviadas a 2 usuarios
API.Controllers.TomaInventarioController: Information: 🎉 === INVENTARIO INICIADO EXITOSAMENTE ===
API.Controllers.TomaInventarioController: Information: ✅ Inventario 'Inventario de Prueba 1' iniciado por Ulises Monge Aguilar
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 109.3485ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 111.9144ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Inventario iniciado exitosamente: {"message":"Inventario iniciado exitosamente","inventarioId":5111,"titulo":"Inventario de Prueba 1","usuariosNotificados":2,"timestamp":"2025-08-01T16:19:31.3074514-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Inventario 5111 iniciado exitosamente por Ulises Monge Aguilar
📡 Respuesta del servidor: {success: true, message: 'Inventario iniciado exitosamente. Los usuarios asignados han sido notificados.', inventarioId: 5111, redirectUrl: '/TomaInventario/Ejecutar/5111'}
✅ Inventario iniciado exitosamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 === MÉTODO EJECUTAR LLAMADO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 ID del inventario: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 URL solicitada: /TomaInventario/Ejecutar/5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Token JWT obtenido correctamente
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 3.7883ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 6.398ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === INFORMACIÓN DEL INVENTARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Título: Inventario de Prueba 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Estado: En Progreso
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha inicio: 08/01/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha fin: 08/08/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Total asignaciones: 2
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 === PERMISOS DEL USUARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Usuario ID: 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede contar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ajustar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede validar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Es admin: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 === DATOS PREPARADOS PARA LA VISTA ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.InventarioId: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.UsuarioId: 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RETORNANDO VISTA CON MODELO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Titulo: Inventario de Prueba 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Estado: En Progreso
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
🔧 === CONFIGURACIÓN INICIAL ===
🔧 Model.InventarioProgramadoId: 5111
🔧 Model.Estado: En Progreso
🔧 Model.Titulo: Inventario de Prueba 1
🔧 ViewBag.UsuarioId: 1
🔧 ViewBag.PuedeContar: true
🔧 window.inventarioConfig: {inventarioId: 5111, usuarioId: 1, permisos: {…}}
🚀 === DEPURACIÓN: INICIALIZANDO EJECUTAR INVENTARIO ===
🚀 Document ready ejecutado
🚀 window.inventarioConfig: {inventarioId: 5111, usuarioId: 1, permisos: {…}}
🚀 URL actual: https://localhost:7038/TomaInventario/Ejecutar/5111
🚀 ID obtenido de config: 5111
🔍 Obteniendo ID del inventario desde URL...
🔍 Path actual: /TomaInventario/Ejecutar/5111
🔍 Partes del path: (4) ['', 'TomaInventario', 'Ejecutar', '5111']
🔍 ID extraído: 5111
🚀 ID obtenido de URL: 5111
🚀 ID final seleccionado: 5111
✅ ID del inventario obtenido: 5111
✅ Tipo del ID: number
🚀 Llamando a inicializarEjecutorInventario...
📋 Inicializando ejecutor para inventario ID: 5111
🔒 === CARGANDO PERMISOS ESPECÍFICOS DEL INVENTARIO ===
🔒 Inventario ID: 5111
🔒 Usuario ID: 1
🔐 === VERIFICANDO PERMISOS DE ADMINISTRADOR ===
🔐 Configuración local esAdmin: false
✅ Event listeners de filtrado configurados
🕵️ Detective activado - monitoreando cambios en la barra
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
⚠️ No se pudo verificar con servidor, usando configuración local
🔐 Resultado verificación admin: false
✅ Permisos específicos cargados: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
📋 Cargando información del inventario 5111...
✅ Usando información del inventario desde configuración global
✅ Información del inventario cargada desde configuración
🔄 Cargando ajustes pendientes ANTES que productos...
📋 Cargando ajustes pendientes...
✅ Cargados 0 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
📦 Cargando productos CON ajustes ya cargados...
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: number
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 0 ajustes para inventario 5111
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: Error: An unhandled exception has occurred while executing the request.

System.InvalidOperationException: Endpoint PermisosController.VerificarAdmin (API) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at GestionLlantera.Web.Middleware.PermisosAuditoriaMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\PermisosAuditoriaMiddleware.cs:line 22
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at GestionLlantera.Web.Middleware.JwtClaimsMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\JwtClaimsMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 1 notificaciones no leídas
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔒 Obteniendo permisos del usuario 1 en inventario 5111
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 3.883ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 6.5616ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.6514ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.5514ms - 200
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
Excepción producida: 'System.InvalidOperationException' en Microsoft.AspNetCore.Routing.dll
Excepción producida: 'System.InvalidOperationException' en System.Private.CoreLib.dll
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 0 contados, 7 pendientes, 0 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 43.6395ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 46.409ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":null,"diferencia":null,"observaciones":"","fechaConteo":null,"usuarioConteoId":null,"nombreUsuarioConteo":"","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":false,"medidasLlanta":"","marcaLlanta"...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=0, Pendientes=7, Discrepancias=0
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 0, pendientes: 7, discrepancias: 0, porcentajeProgreso: 0, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: null, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 0, pendientes: 7, discrepancias: 0, porcentajeProgreso: 0, …}
✅ Estadísticas actualizadas: 0% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 0/7 (0%)
📊 Estadísticas actuales: {total: 7, contados: 0, pendientes: 7, discrepancias: 0, porcentajeProgreso: 0, …}
🔄 Ajustes pendientes: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.3391ms - 200
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
❌ Ocultando panel de ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 12.1728ms - 200
📊 Todo contado: false (pendientes: 7 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 0%
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
📊 Estadísticas actualizadas correctamente: 0% completado
🔒 Aplicando control de permisos en la interfaz...
✅ Info de permisos mostrada: 📝 Conteo
✅ Control de permisos aplicado correctamente
✅ Ejecutor de inventario inicializado correctamente
👁️ Iniciando monitor del badge de estado...
✅ Observer del badge configurado
🔍 Badges encontrados: (24) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', 'Pendiente', '3', 'Pendiente', '5', 'Pendiente', '7', 'Pendiente', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Tipo']
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 17
📝 Producto encontrado: Prueba de Stock 3 Despues de eliminar imagen
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=2, Físico=0, Diferencia=-2
✅ Modal de conteo abierto exitosamente
🧮 Calculando diferencia: Sistema=2, Físico=1, Diferencia=-1
🔍 Badges encontrados: (24) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', 'Pendiente', '3', 'Pendiente', '5', 'Pendiente', '7', 'Pendiente', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Accesorio']
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '17', cantidadFisica: 1, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 17, usuarioId: 1, cantidadFisica: 1, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=17, Cantidad=1
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 17, Cantidad 1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/17/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/17/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 17, Cantidad: 1, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 2, Físico: 1, Diferencia: -1
API.Controllers.TomaInventarioController: Information: ⚠️ === MANEJANDO DISCREPANCIA ===
API.Controllers.TomaInventarioController: Information: ⚠️ Producto: 17, Diferencia: -1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[UsuarioId]
FROM [AsignacionesUsuariosInventario] AS [a]
WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[PermisoValidacion] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 100), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 50), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notificaciones] ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
OUTPUT INSERTED.[NotificacionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.NotificacionService: Information: Se crearon 1 notificaciones: ⚠️ Discrepancia Detectada
API.Controllers.TomaInventarioController: Information: ✅ Notificación de discrepancia enviada a 1 usuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 58.7953ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 61.6206ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":-1,"hayDiscrepancia":true,"timestamp":"2025-08-01T16:19:40.7121986-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:19:40.7179059-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 1 contados, 6 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 36.3409ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 38.8173ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=1, Pendientes=6, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 1, pendientes: 6, discrepancias: 1, porcentajeProgreso: 14.3, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 1, pendientes: 6, discrepancias: 1, porcentajeProgreso: 14.3, …}
✅ Estadísticas actualizadas: 14.3% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 1, pendientes: 6, discrepancias: 1, porcentajeProgreso: 14.3, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 6 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 1, pendientes: 6, discrepancias: 1, porcentajeProgreso: 14.3, …}
✅ Estadísticas actualizadas: 14.3% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 1, pendientes: 6, discrepancias: 1, porcentajeProgreso: 14.3, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 6 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🎉 Conteo guardado y datos actualizados
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 20
📝 Producto encontrado: Llanta Agregar Marca Agrega Modelo
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=3, Físico=0, Diferencia=-3
✅ Modal de conteo abierto exitosamente
🔍 Badges encontrados: (26) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', 'Pendiente', '5', 'Pendiente', '7', 'Pendiente', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
🧮 Calculando diferencia: Sistema=3, Físico=3, Diferencia=0
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '20', cantidadFisica: 3, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 20, usuarioId: 1, cantidadFisica: 3, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=20, Cantidad=3
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 20, Cantidad 3
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/20/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/20/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 20, Cantidad: 3, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 3, Físico: 3, Diferencia: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 29.7091ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 32.3265ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":0,"hayDiscrepancia":false,"timestamp":"2025-08-01T16:19:47.3600415-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:19:47.3638097-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 2 contados, 5 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 39.7033ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 42.1362ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=2, Pendientes=5, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 2, pendientes: 5, discrepancias: 1, porcentajeProgreso: 28.6, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 2, pendientes: 5, discrepancias: 1, porcentajeProgreso: 28.6, …}
✅ Estadísticas actualizadas: 28.6% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 2, pendientes: 5, discrepancias: 1, porcentajeProgreso: 28.6, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 5 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 2, pendientes: 5, discrepancias: 1, porcentajeProgreso: 28.6, …}
✅ Estadísticas actualizadas: 28.6% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 2, pendientes: 5, discrepancias: 1, porcentajeProgreso: 28.6, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 5 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🎉 Conteo guardado y datos actualizados
🔍 Badges encontrados: (27) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', 'Pendiente', '7', 'Pendiente', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 1016
📝 Producto encontrado: Llanta Kumho Mobile
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=5, Físico=0, Diferencia=-5
✅ Modal de conteo abierto exitosamente
🧮 Calculando diferencia: Sistema=5, Físico=5, Diferencia=0
El subproceso '.NET ThreadPool Worker' (26372) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (11548) terminó con código 0 (0x0).
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '1016', cantidadFisica: 5, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 1016, usuarioId: 1, cantidadFisica: 5, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=1016, Cantidad=5
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 1016, Cantidad 5
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1016/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1016/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 1016, Cantidad: 5, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 5, Físico: 5, Diferencia: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 31.6218ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 34.3785ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":0,"hayDiscrepancia":false,"timestamp":"2025-08-01T16:19:53.9625283-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:19:53.9663141-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 3 contados, 4 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 70.1804ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 72.7692ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=3, Pendientes=4, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 3, pendientes: 4, discrepancias: 1, porcentajeProgreso: 42.9, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 3, pendientes: 4, discrepancias: 1, porcentajeProgreso: 42.9, …}
✅ Estadísticas actualizadas: 42.9% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 3, pendientes: 4, discrepancias: 1, porcentajeProgreso: 42.9, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 4 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 3, pendientes: 4, discrepancias: 1, porcentajeProgreso: 42.9, …}
✅ Estadísticas actualizadas: 42.9% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 3, pendientes: 4, discrepancias: 1, porcentajeProgreso: 42.9, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 4 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🎉 Conteo guardado y datos actualizados
🔍 Badges encontrados: (28) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', 'Pendiente', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 1017
📝 Producto encontrado: Llanta Test
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=7, Físico=0, Diferencia=-7
✅ Modal de conteo abierto exitosamente
🧮 Calculando diferencia: Sistema=7, Físico=7, Diferencia=0
🔍 Badges encontrados: (28) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', 'Pendiente', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Accesorio']
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '1017', cantidadFisica: 7, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 1017, usuarioId: 1, cantidadFisica: 7, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=1017, Cantidad=7
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 1017, Cantidad 7
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1017/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1017/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 1017, Cantidad: 7, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 7, Físico: 7, Diferencia: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 25.4252ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 28.0818ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":0,"hayDiscrepancia":false,"timestamp":"2025-08-01T16:20:00.9048207-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:20:00.9087657-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 4 contados, 3 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 36.3917ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 38.8281ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=4, Pendientes=3, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 4, pendientes: 3, discrepancias: 1, porcentajeProgreso: 57.1, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 4, pendientes: 3, discrepancias: 1, porcentajeProgreso: 57.1, …}
✅ Estadísticas actualizadas: 57.1% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 4, pendientes: 3, discrepancias: 1, porcentajeProgreso: 57.1, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 3 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 4, pendientes: 3, discrepancias: 1, porcentajeProgreso: 57.1, …}
✅ Estadísticas actualizadas: 57.1% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 4, pendientes: 3, discrepancias: 1, porcentajeProgreso: 57.1, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 3 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🎉 Conteo guardado y datos actualizados
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 1 notificaciones no leídas
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 4/7 (57.1%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.4846ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.9456ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 57.1%
📊 Estadísticas actualizadas correctamente: 0% completado
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 0 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.2902ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.7954ms - 200
✅ Cargados 0 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 1018
📝 Producto encontrado: Llanta Firestone Extreme
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=5, Físico=0, Diferencia=-5
✅ Modal de conteo abierto exitosamente
🔒 Auto-protección: Barra restaurada a 57.1%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 Badges encontrados: (29) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', 'Pendiente', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
🧮 Calculando diferencia: Sistema=5, Físico=5, Diferencia=0
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '1018', cantidadFisica: 5, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 1018, usuarioId: 1, cantidadFisica: 5, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=1018, Cantidad=5
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 1018, Cantidad 5
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1018/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1018/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 1018, Cantidad: 5, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 5, Físico: 5, Diferencia: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 30.7208ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 59.5918ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":0,"hayDiscrepancia":false,"timestamp":"2025-08-01T16:20:07.4264935-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:20:07.4304731-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 5 contados, 2 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 42.0964ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 44.6537ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=5, Pendientes=2, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 5, pendientes: 2, discrepancias: 1, porcentajeProgreso: 71.4, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 5, pendientes: 2, discrepancias: 1, porcentajeProgreso: 71.4, …}
✅ Estadísticas actualizadas: 71.4% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 5, pendientes: 2, discrepancias: 1, porcentajeProgreso: 71.4, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 2 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 5, pendientes: 2, discrepancias: 1, porcentajeProgreso: 71.4, …}
✅ Estadísticas actualizadas: 71.4% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 5, pendientes: 2, discrepancias: 1, porcentajeProgreso: 71.4, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 2 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🎉 Conteo guardado y datos actualizados
🔍 Badges encontrados: (30) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', 'Pendiente', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 1019
📝 Producto encontrado: Llanta Continental Urban
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=20, Físico=0, Diferencia=-20
✅ Modal de conteo abierto exitosamente
🧮 Calculando diferencia: Sistema=20, Físico=2, Diferencia=-18
🧮 Calculando diferencia: Sistema=20, Físico=20, Diferencia=0
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '1019', cantidadFisica: 20, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 1019, usuarioId: 1, cantidadFisica: 20, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=1019, Cantidad=20
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 1019, Cantidad 20
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1019/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1019/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 1019, Cantidad: 20, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 20, Físico: 20, Diferencia: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 30.0919ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 32.7087ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":0,"hayDiscrepancia":false,"timestamp":"2025-08-01T16:20:14.0591986-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:20:14.0632083-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 6 contados, 1 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 43.763ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 46.2833ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=6, Pendientes=1, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 6, pendientes: 1, discrepancias: 1, porcentajeProgreso: 85.7, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 6, pendientes: 1, discrepancias: 1, porcentajeProgreso: 85.7, …}
✅ Estadísticas actualizadas: 85.7% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 6, pendientes: 1, discrepancias: 1, porcentajeProgreso: 85.7, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 1 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 6, pendientes: 1, discrepancias: 1, porcentajeProgreso: 85.7, …}
✅ Estadísticas actualizadas: 85.7% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 6, pendientes: 1, discrepancias: 1, porcentajeProgreso: 85.7, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: false (pendientes: 1 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
❌ === INVENTARIO NO LISTO ===
🚫 Razón: Aún hay productos pendientes de contar
🎉 Conteo guardado y datos actualizados
🔍 Badges encontrados: (31) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
📝 === ABRIENDO MODAL DE CONTEO ===
📝 Producto ID: 1021
📝 Producto encontrado: Llanta Kumho Miller
📝 Sin conteo anterior
🧮 Calculando diferencia: Sistema=9, Físico=0, Diferencia=-9
✅ Modal de conteo abierto exitosamente
🧮 Calculando diferencia: Sistema=9, Físico=9, Diferencia=0
🔍 Badges encontrados: (31) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', 'Pendiente', 'Listo para finalizar', 'ID: -', 'Llanta']
🖱️ Click en botón guardar conteo
💾 === INICIANDO GUARDADO DE CONTEO ===
📊 Datos del conteo: {inventarioId: '5111', productoId: '1021', cantidadFisica: 9, observaciones: ''}
🔄 Cambiando botón a estado de carga...
📤 Enviando datos de conteo: {inventarioProgramadoId: 5111, productoId: 1021, usuarioId: 1, cantidadFisica: 9, observaciones: null, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Registrando conteo: Inventario=5111, Producto=1021, Cantidad=9
GestionLlantera.Web.Services.TomaInventarioService: Information: 📝 Registrando conteo: Producto 1021, Cantidad 9
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1021/conteo
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/productos/1021/conteo
API.Controllers.TomaInventarioController: Information: 📝 === REGISTRANDO CONTEO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 1021, Cantidad: 9, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1 AND [a].[PermisoConteo] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32), @__productoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [DetallesInventarioProgramado] AS [d]
INNER JOIN [Productos] AS [p] ON [d].[ProductoId] = [p].[ProductoID]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] = @__productoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [DetallesInventarioProgramado] SET [CantidadFisica] = @p0, [Diferencia] = @p1, [FechaConteo] = @p2, [UsuarioConteoId] = @p3
OUTPUT 1
WHERE [DetalleId] = @p4;
API.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
API.Controllers.TomaInventarioController: Information: 📊 Sistema: 9, Físico: 9, Diferencia: 0
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 25.047ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 27.595ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Conteo registrado exitosamente: {"message":"Conteo registrado exitosamente","diferencia":0,"hayDiscrepancia":false,"timestamp":"2025-08-01T16:20:21.1092893-06:00"}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Conteo registrado exitosamente
📡 Respuesta recibida: 200
✅ Resultado exitoso: {success: true, message: 'Conteo registrado exitosamente', timestamp: '2025-08-01T16:20:21.1130506-06:00'}
✅ Éxito: Conteo guardado exitosamente
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Programar Inventario': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__8__locals1_inventarioId_0='?' (DbType = Int32), @__usuarioId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AsignacionesUsuariosInventario] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__8__locals1_inventarioId_0 AND [a].[UsuarioId] = @__usuarioId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por asignación al inventario
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 7 contados, 0 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 35.5108ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 37.9989ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=7, Pendientes=0, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
📝 Usuario solo puede notificar conteo completado
⚠️ Panel conteoCompletadoPanel no existe, creando dinámicamente...
🔨 Creando panel de conteo completado dinámicamente...
✅ Event listeners configurados para panel de conteo completado
✅ Panel de conteo completado creado y configurado
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: false, puedeValidar: false, puedeCompletar: false, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: false
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: true
✅ === INVENTARIO LISTO PARA PROCESAR ===
📝 Usuario solo puede notificar conteo completado
✅ Panel de conteo completado actualizado
✅ Panel de conteo completado mostrado
🎉 Conteo guardado y datos actualizados
🔍 Badges encontrados: (33) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para revisión', 'Listo para finalizar', 'ID: -', 'Llanta']
📧 Notificando supervisor - conteo completado
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📧 === NOTIFICANDO CONTEO COMPLETADO DESDE WEB ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📧 Inventario ID: 5111, Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.0102ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.4257ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📧 === NOTIFICANDO CONTEO COMPLETADO DESDE SERVICIO WEB ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📧 Inventario ID: 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/NotificarConteoCompletado/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/NotificarConteoCompletado/5111
API.Controllers.TomaInventarioController: Information: 📧 === NOTIFICANDO CONTEO COMPLETADO AL CREADOR ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId], [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [InventariosProgramados] AS [i]
INNER JOIN [Usuarios] AS [u] ON [i].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioActualId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = @__usuarioActualId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 100), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 50), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notificaciones] ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
OUTPUT INSERTED.[NotificacionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.NotificacionService: Information: Notificación creada exitosamente para usuario 4: 📝 Conteo Completado - Requiere Supervisión
API.Controllers.TomaInventarioController: Information: ✅ Notificación enviada al creador del inventario: Julissa Mejias (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.6693ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.0963ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Notificación enviada exitosamente para inventario 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Notificación enviada exitosamente para inventario 5111
✅ Supervisor notificado exitosamente
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
🔍 Badges encontrados: (33) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para revisión', 'Listo para finalizar', 'ID: -', 'Llanta']
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090365
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwMzY1LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.um8sCVVCgsduiSvwGPhsD5vfy-loFlx4MlaImhnzbvs
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090365
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 1 notificaciones no leídas
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.7448ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.2162ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
📊 Estadísticas actualizadas correctamente: 0% completado
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 0 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.7528ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.316ms - 200
✅ Cargados 0 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔒 Auto-protección: Barra restaurada a 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 Badges encontrados: (33) ['1', '1', '📝 Conteo', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para revisión', 'Listo para finalizar', 'ID: -', 'Llanta']
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 1. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.0053ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.8731ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Administrador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario zlktmbs334@tormails.com (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 202.993ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 205.6038ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: zlktmbs334@tormails.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 3 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 3 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 3 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 === MÉTODO EJECUTAR LLAMADO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 ID del inventario: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 URL solicitada: /TomaInventario/Ejecutar/5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Token JWT obtenido correctamente
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.3543ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 6.9182ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === INFORMACIÓN DEL INVENTARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Título: Inventario de Prueba 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Estado: En Progreso
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha inicio: 08/01/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha fin: 08/08/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Total asignaciones: 2
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 === PERMISOS DEL USUARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Usuario ID: 4
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede contar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ajustar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede validar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Es admin: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 === DATOS PREPARADOS PARA LA VISTA ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.InventarioId: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.UsuarioId: 4
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RETORNANDO VISTA CON MODELO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Titulo: Inventario de Prueba 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Estado: En Progreso
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 2 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 2 notificaciones no leídas
🔧 === CONFIGURACIÓN INICIAL ===
🔧 Model.InventarioProgramadoId: 5111
🔧 Model.Estado: En Progreso
🔧 Model.Titulo: Inventario de Prueba 1
🔧 ViewBag.UsuarioId: 4
🔧 ViewBag.PuedeContar: true
🔧 window.inventarioConfig: {inventarioId: 5111, usuarioId: 4, permisos: {…}}
🚀 === DEPURACIÓN: INICIALIZANDO EJECUTAR INVENTARIO ===
🚀 Document ready ejecutado
🚀 window.inventarioConfig: {inventarioId: 5111, usuarioId: 4, permisos: {…}}
🚀 URL actual: https://localhost:7038/TomaInventario/Ejecutar/5111
🚀 ID obtenido de config: 5111
🔍 Obteniendo ID del inventario desde URL...
🔍 Path actual: /TomaInventario/Ejecutar/5111
🔍 Partes del path: (4) ['', 'TomaInventario', 'Ejecutar', '5111']
🔍 ID extraído: 5111
🚀 ID obtenido de URL: 5111
🚀 ID final seleccionado: 5111
✅ ID del inventario obtenido: 5111
✅ Tipo del ID: number
🚀 Llamando a inicializarEjecutorInventario...
📋 Inicializando ejecutor para inventario ID: 5111
🔒 === CARGANDO PERMISOS ESPECÍFICOS DEL INVENTARIO ===
🔒 Inventario ID: 5111
🔒 Usuario ID: 4
🔐 === VERIFICANDO PERMISOS DE ADMINISTRADOR ===
🔐 Configuración local esAdmin: true
✅ Event listeners de filtrado configurados
🕵️ Detective activado - monitoreando cambios en la barra
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
⚠️ No se pudo verificar con servidor, usando configuración local
🔐 Resultado verificación admin: true
👑 Usuario detectado como administrador
✅ Permisos específicos cargados: {puedeContar: true, puedeAjustar: true, puedeValidar: true, puedeCompletar: true, esAdmin: false, …}
📋 Cargando información del inventario 5111...
✅ Usando información del inventario desde configuración global
✅ Información del inventario cargada desde configuración
🔄 Cargando ajustes pendientes ANTES que productos...
📋 Cargando ajustes pendientes...
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: Error: An unhandled exception has occurred while executing the request.

System.InvalidOperationException: Endpoint PermisosController.VerificarAdmin (API) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at GestionLlantera.Web.Middleware.PermisosAuditoriaMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\PermisosAuditoriaMiddleware.cs:line 22
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at GestionLlantera.Web.Middleware.JwtClaimsMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\JwtClaimsMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔒 Obteniendo permisos del usuario 4 en inventario 5111
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.2361ms - 200
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 2 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.624ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
Excepción producida: 'System.InvalidOperationException' en Microsoft.AspNetCore.Routing.dll
Excepción producida: 'System.InvalidOperationException' en System.Private.CoreLib.dll
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 0 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.798ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.0754ms - 200
✅ Cargados 0 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
📦 Cargando productos CON ajustes ya cargados...
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: number
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Programar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por permisos de administrador
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 7 contados, 0 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 28.3851ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 30.6074ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=7, Pendientes=0, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 17: No hay ajustes pendientes cargados
🔍 Producto 17: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: false, detalleAjuste: null}
🟡 Producto 17: Mostrando botón CREAR AJUSTE
✅ Botones generados para producto 17: Crear Ajuste
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 20: No hay ajustes pendientes cargados
🔍 Producto 20: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1016: No hay ajustes pendientes cargados
🔍 Producto 1016: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1017: No hay ajustes pendientes cargados
🔍 Producto 1017: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1018: No hay ajustes pendientes cargados
🔍 Producto 1018: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1019: No hay ajustes pendientes cargados
🔍 Producto 1019: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 0, ajustesParaEsteProducto: Array(0)}
🔍 Producto 1021: No hay ajustes pendientes cargados
🔍 Producto 1021: No hay ajustes pendientes cargados
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 0
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: true, puedeValidar: true, puedeCompletar: true, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (0) []
⚠️ No hay ajustes pendientes para contar
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 0, total: 0}
✅ Panel actualizado: 0 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: true
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
👑 Usuario puede finalizar inventario completo
🏁 Actualizando panel de finalización...
✅ Panel de finalización actualizado - Puede finalizar: true
✅ Panel de finalización mostrado
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.3194ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.9714ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
📊 Estadísticas actualizadas correctamente: 0% completado
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔒 Aplicando control de permisos en la interfaz...
✅ Info de permisos mostrada: 📝 Conteo, 🔧 Ajustes, ✅ Validación, 🏁 Completar
✅ Control de permisos aplicado correctamente
✅ Ejecutor de inventario inicializado correctamente
🛡️ Barra restaurada a: 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
👁️ Iniciando monitor del badge de estado...
✅ Observer del badge configurado
🔍 Badges encontrados: (32) ['2', '2', '📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔄 === ABRIENDO MODAL PARA CREAR AJUSTE ===
🔄 Producto ID: 17
🔍 Producto 17: No hay ajustes pendientes cargados
🔄 Producto válido para crear ajuste: Prueba de Stock 3 Despues de eliminar imagen
🔧 Configurando modal para modo CREAR
✅ Event listeners de vista previa configurados
✅ Modal configurado correctamente para modo CREAR
✅ Modal de ajuste pendiente abierto en modo CREAR
🔍 Badges encontrados: (32) ['2', '2', '📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (32) ['2', '2', '📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🖱️ Click en botón CREAR ajuste pendiente
💾 === GUARDANDO NUEVO AJUSTE PENDIENTE ===
📤 Enviando solicitud de ajuste pendiente: {inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, cantidadFisicaContada: 1, …}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 === CREANDO AJUSTE PENDIENTE DESDE WEB ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 17
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📝 === CREANDO AJUSTE PENDIENTE (WEB SERVICE) ===
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📝 Inventario: 5111, Producto: 17
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📤 JSON enviado: {"InventarioProgramadoId":5111,"ProductoId":17,"TipoAjuste":"reconteo","CantidadSistemaOriginal":2,"CantidadFisicaContada":1,"CantidadFinalPropuesta":2,"MotivoAjuste":"Tengo dudas","UsuarioId":4}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/ajustar-discrepancia
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/ajustar-discrepancia
API.Controllers.TomaInventarioController: Information: 📝 === AJUSTE PENDIENTE SOLICITADO ===
API.Controllers.TomaInventarioController: Information: 📝 Inventario: 5111, Producto: 17
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📝 === CREANDO AJUSTE PENDIENTE ===
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📝 Inventario: 5111, Producto: 17, Tipo: reconteo
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__solicitud_InventarioProgramadoId_0='?' (DbType = Int32), @__solicitud_ProductoId_1='?' (DbType = Int32), @__solicitud_UsuarioId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AjustesInventarioPendientes] AS [a]
        WHERE [a].[InventarioProgramadoId] = @__solicitud_InventarioProgramadoId_0 AND [a].[ProductoId] = @__solicitud_ProductoId_1 AND [a].[UsuarioId] = @__solicitud_UsuarioId_2 AND [a].[FechaCreacion] > DATEADD(minute, CAST(-5.0E0 AS int), GETDATE())) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__solicitud_InventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__solicitud_InventarioProgramadoId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__solicitud_InventarioProgramadoId_0='?' (DbType = Int32), @__solicitud_ProductoId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [d].[DetalleId], [d].[CantidadFisica], [d].[CantidadSistema], [d].[Diferencia], [d].[FechaConteo], [d].[InventarioProgramadoId], [d].[Observaciones], [d].[ProductoId], [d].[UsuarioConteoId]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__solicitud_InventarioProgramadoId_0 AND [d].[ProductoId] = @__solicitud_ProductoId_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 20), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (Size = 500), @p8='?' (DbType = Int32), @p9='?' (Size = 50), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AjustesInventarioPendientes] ([CantidadFinalPropuesta], [CantidadFisicaContada], [CantidadSistemaOriginal], [Estado], [FechaAplicacion], [FechaCreacion], [InventarioProgramadoId], [MotivoAjuste], [ProductoId], [TipoAjuste], [UsuarioId])
OUTPUT INSERTED.[AjusteId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.AjustesInventarioPendientesService: Information: ✅ Ajuste pendiente creado con ID: 2053
API.Controllers.TomaInventarioController: Information: ✅ Ajuste pendiente creado con ID: 2053
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 49.7786ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 52.3621ms - 200
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📡 Respuesta API: Status=OK, Content={"success":true,"message":"Ajuste pendiente registrado exitosamente","data":{"ajusteId":2053,"tipoAjuste":"reconteo","productoId":17,"diferencia":-1,"cantidadFinalPropuesta":2,"timestamp":"2025-08-01T16:21:02.1086468-06:00"}}
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Ajuste pendiente creado exitosamente
✅ Éxito: Ajuste pendiente registrado exitosamente para Prueba de Stock 3 Despues de eliminar imagen
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 1 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.5364ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 12.0723ms - 200
✅ Cargados 1 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: string
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Programar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por permisos de administrador
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 7 contados, 0 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 36.4795ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 38.9923ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=7, Pendientes=0, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: true, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(1)}
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: true, detalleAjuste: {…}}
🟢 Producto 17: Mostrando botón VER AJUSTE
✅ Botones generados para producto 17: Ver Ajuste
❌ Producto 20 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 20 NO tiene ajuste pendiente
❌ Producto 20 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
❌ Producto 1016 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1016 NO tiene ajuste pendiente
❌ Producto 1016 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
❌ Producto 1017 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1017 NO tiene ajuste pendiente
❌ Producto 1017 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
❌ Producto 1018 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1018 NO tiene ajuste pendiente
❌ Producto 1018 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
❌ Producto 1019 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1019 NO tiene ajuste pendiente
❌ Producto 1019 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
❌ Producto 1021 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1021 NO tiene ajuste pendiente
❌ Producto 1021 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 1
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: true, puedeValidar: true, puedeCompletar: true, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: true
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
👑 Usuario puede finalizar inventario completo
🏁 Actualizando panel de finalización...
✅ Panel de finalización actualizado - Puede finalizar: true
✅ Panel de finalización mostrado
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 1
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: true, puedeValidar: true, puedeCompletar: true, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: true
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
👑 Usuario puede finalizar inventario completo
🏁 Actualizando panel de finalización...
✅ Panel de finalización actualizado - Puede finalizar: true
✅ Panel de finalización mostrado
🎉 Ajuste pendiente guardado y datos actualizados
🧹 Limpiando modal de ajuste pendiente...
✅ Modal limpiado correctamente
🔍 Badges encontrados: (37) ['2', '2', '📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (37) ['2', '2', '📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
UPDATE [Notificaciones] SET [FechaLectura] = @p3, [Leida] = @p4
OUTPUT 1
WHERE [NotificacionId] = @p5;
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0
OUTPUT 1
WHERE [NotificacionId] = @p1;
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔒 Usuario Julissa Mejias - Puede ver programados: True
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.325ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.917ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090439
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
🔧 JavaScript cargado para detalle inventario programado
🔧 Botón encontrado: null
❌ NO se encontró el botón con clase .iniciar-inventario-btn
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDQzOSwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.XMM5mug3M0XBnN21Xbx3BCnfUhv3KLDibNKxxwnmyMU
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090439
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 4. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.5422ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.5399ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
El subproceso '.NET ThreadPool Worker' (25652) terminó con código 0 (0x0).
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Colaborador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario umongegds@gmail.com (ID: 1)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 203.3294ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 206.0982ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: umongegds@gmail.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 1 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090482
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 1 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090482
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
El subproceso 18060 terminó con código 0 (0x0).
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090482
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔒 Usuario Ulises Monge Aguilar - Puede ver programados: False
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.1912ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.3911ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090482
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
🔧 JavaScript cargado para detalle inventario programado
🔧 Botón encontrado: null
❌ NO se encontró el botón con clase .iniciar-inventario-btn
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNDgyLCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.hVamcsxYMJ2Y4goeYEG5PXtLrAcnMbQcpZK0PTMMrco
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090482
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 1. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.6009ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.3635ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Administrador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario zlktmbs334@tormails.com (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 204.4088ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 207.2889ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: zlktmbs334@tormails.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0
OUTPUT 1
WHERE [NotificacionId] = @p1;
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 === MÉTODO EJECUTAR LLAMADO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 ID del inventario: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 URL solicitada: /TomaInventario/Ejecutar/5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🚀 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Token JWT obtenido correctamente
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 3.8225ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 6.1922ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === INFORMACIÓN DEL INVENTARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Título: Inventario de Prueba 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Estado: En Progreso
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha inicio: 08/01/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Fecha fin: 08/08/2025 00:00:00
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Total asignaciones: 2
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 === PERMISOS DEL USUARIO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Usuario ID: 4
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede contar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede ajustar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Puede validar: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔐 Es admin: True
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 === DATOS PREPARADOS PARA LA VISTA ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.InventarioId: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 ViewBag.UsuarioId: 4
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RETORNANDO VISTA CON MODELO ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Titulo: Inventario de Prueba 1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Modelo.Estado: En Progreso
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
🔧 === CONFIGURACIÓN INICIAL ===
🔧 Model.InventarioProgramadoId: 5111
🔧 Model.Estado: En Progreso
🔧 Model.Titulo: Inventario de Prueba 1
🔧 ViewBag.UsuarioId: 4
🔧 ViewBag.PuedeContar: true
🔧 window.inventarioConfig: {inventarioId: 5111, usuarioId: 4, permisos: {…}}
🚀 === DEPURACIÓN: INICIALIZANDO EJECUTAR INVENTARIO ===
🚀 Document ready ejecutado
🚀 window.inventarioConfig: {inventarioId: 5111, usuarioId: 4, permisos: {…}}
🚀 URL actual: https://localhost:7038/TomaInventario/Ejecutar/5111
🚀 ID obtenido de config: 5111
🔍 Obteniendo ID del inventario desde URL...
🔍 Path actual: /TomaInventario/Ejecutar/5111
🔍 Partes del path: (4) ['', 'TomaInventario', 'Ejecutar', '5111']
🔍 ID extraído: 5111
🚀 ID obtenido de URL: 5111
🚀 ID final seleccionado: 5111
✅ ID del inventario obtenido: 5111
✅ Tipo del ID: number
🚀 Llamando a inicializarEjecutorInventario...
📋 Inicializando ejecutor para inventario ID: 5111
🔒 === CARGANDO PERMISOS ESPECÍFICOS DEL INVENTARIO ===
🔒 Inventario ID: 5111
🔒 Usuario ID: 4
🔐 === VERIFICANDO PERMISOS DE ADMINISTRADOR ===
🔐 Configuración local esAdmin: true
✅ Event listeners de filtrado configurados
🕵️ Detective activado - monitoreando cambios en la barra
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
⚠️ No se pudo verificar con servidor, usando configuración local
🔐 Resultado verificación admin: true
👑 Usuario detectado como administrador
✅ Permisos específicos cargados: {puedeContar: true, puedeAjustar: true, puedeValidar: true, puedeCompletar: true, esAdmin: false, …}
📋 Cargando información del inventario 5111...
✅ Usando información del inventario desde configuración global
✅ Información del inventario cargada desde configuración
🔄 Cargando ajustes pendientes ANTES que productos...
📋 Cargando ajustes pendientes...
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: Error: An unhandled exception has occurred while executing the request.

System.InvalidOperationException: Endpoint PermisosController.VerificarAdmin (API) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at GestionLlantera.Web.Middleware.PermisosAuditoriaMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\PermisosAuditoriaMiddleware.cs:line 22
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at GestionLlantera.Web.Middleware.JwtClaimsMiddleware.InvokeAsync(HttpContext context) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Middleware\JwtClaimsMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔒 Obteniendo permisos del usuario 4 en inventario 5111
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.2962ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.1501ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Excepción producida: 'System.InvalidOperationException' en Microsoft.AspNetCore.Routing.dll
Excepción producida: 'System.InvalidOperationException' en System.Private.CoreLib.dll
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 1 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.7787ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.7296ms - 200
✅ Cargados 1 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
📦 Cargando productos CON ajustes ya cargados...
🔍 DETECTIVE: cargarProductosInventario ejecutándose...
📦 === DEPURACIÓN: CARGANDO PRODUCTOS ===
📦 Inventario ID: 5111
📦 Tipo de inventarioId: number
📦 URL que se va a llamar: /TomaInventario/ObtenerProductos/5111
📦 Realizando fetch...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 === DEPURACIÓN: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Inventario ID: 5111
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Filtro: ''
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Solo sin contar: False
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📋 Usuario: Julissa Mejias
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Token JWT obtenido correctamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔄 Llamando al servicio para obtener productos...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 === SERVICIO: OBTENIENDO PRODUCTOS ===
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Inventario ID: 5111
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Token presente: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 URL llamada: api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/productos
API.Controllers.TomaInventarioController: Information: 📦 === OBTENIENDO PRODUCTOS DEL INVENTARIO ===
API.Controllers.TomaInventarioController: Information: 📦 Inventario ID: 5111, Usuario: Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Programar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Programar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Programar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.TomaInventarioController: Information: ✅ Acceso concedido por permisos de administrador
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [InventariosProgramados] AS [i]
        WHERE [i].[InventarioProgramadoId] = @__inventarioId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[DetalleId], [d].[InventarioProgramadoId], [d].[ProductoId], [d].[CantidadSistema], [d].[CantidadFisica], [d].[Diferencia], COALESCE([d].[Observaciones], N'') AS [Observaciones], [d].[UsuarioConteoId], [d].[FechaConteo]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0 AND [d].[ProductoId] > 0 AND [d].[CantidadSistema] >= 0
API.Controllers.TomaInventarioController: Information: 🔍 Detalles obtenidos: 7
API.Controllers.TomaInventarioController: Information: 🔍 Detalles válidos: 7
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[Descripcion]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [l].[ProductoID] AS [ProductoId], [l].[Marca], [l].[Modelo], [l].[Ancho], [l].[Perfil], [l].[Diametro]
FROM [Llantas] AS [l]
WHERE [l].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[ProductoID] AS [ProductoId], (
    SELECT TOP(1) [i0].[URLImagen]
    FROM [ImagenesProducto] AS [i0]
    WHERE [i0].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i0].[URLImagen])) <> '' AND ([i].[ProductoID] = [i0].[ProductoID] OR (([i].[ProductoID] IS NULL) AND ([i0].[ProductoID] IS NULL)))
    ORDER BY [i0].[ImagenID]) AS [PrimeraImagen]
FROM [ImagenesProducto] AS [i]
WHERE [i].[ProductoID] IN (17, 20, 1016, 1017, 1018, 1019, 1021) AND LTRIM(RTRIM([i].[URLImagen])) <> ''
GROUP BY [i].[ProductoID]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID] AS [UsuarioId], [u].[NombreUsuario]
FROM [Usuarios] AS [u]
WHERE [u].[UsuarioID] = 1
API.Controllers.TomaInventarioController: Information: ✅ Producto 17 mapeado: Prueba de Stock 3 Despues de eliminar imagen (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 20 mapeado: Llanta Agregar Marca Agrega Modelo (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1016 mapeado: Llanta Kumho Mobile (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1017 mapeado: Llanta Test (Llanta: False)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1018 mapeado: Llanta Firestone Extreme (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1019 mapeado: Llanta Continental Urban (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Producto 1021 mapeado: Llanta Kumho Miller (Llanta: True)
API.Controllers.TomaInventarioController: Information: ✅ Productos mapeados correctamente: 7
API.Controllers.TomaInventarioController: Information: 📊 Estadísticas: 7 contados, 0 pendientes, 1 discrepancias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 35.6711ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 38.261ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Código de respuesta: OK
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta exitosa: True
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Contenido recibido (primeros 500 chars): {"productos":[{"detalleId":5501,"inventarioProgramadoId":5111,"productoId":17,"cantidadSistema":2,"cantidadFisica":1,"diferencia":-1,"observaciones":"","fechaConteo":"2025-08-01T16:19:40.6914974","usuarioConteoId":1,"nombreUsuarioConteo":"Ulises Monge Aguilar","nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","descripcionProducto":"Para ver si aqui si toma las cantidades 11","imagenUrl":"/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp","esLlanta":f...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📦 Respuesta deserializada - Productos: 7
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Se obtuvieron 7 productos del API
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 📦 Respuesta del servicio - Productos: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ === RESULTADO FINAL ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Productos a enviar: 7
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Estadísticas calculadas: Total=7, Contados=7, Pendientes=0, Discrepancias=1
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Devolviendo respuesta JSON exitosa
📦 Respuesta recibida:
📦 Status: 200
📦 StatusText: 
📦 OK: true
📦 Parseando JSON...
📦 Datos recibidos: {success: true, productos: Array(7), estadisticas: {…}}
📦 Tipo de data: object
📦 Data.success: true
📦 Data.productos: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
📦 Cantidad de productos: 7
🔍 === DEBUGGING PRODUCTOS CARGADOS ===
🔍 Respuesta completa: {success: true, productos: Array(7), estadisticas: {…}}
🔍 Productos array: (7) [{…}, {…}, {…}, {…}, {…}, {…}, {…}]
🔍 Estadísticas: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔍 Primer producto: {detalleId: 5501, inventarioProgramadoId: 5111, productoId: 17, cantidadSistema: 2, cantidadFisica: 1, …}
🔍 Propiedades del primer producto: (19) ['detalleId', 'inventarioProgramadoId', 'productoId', 'cantidadSistema', 'cantidadFisica', 'diferencia', 'observaciones', 'fechaConteo', 'usuarioConteoId', 'nombreUsuarioConteo', 'nombreProducto', 'descripcionProducto', 'imagenUrl', 'esLlanta', 'medidasLlanta', 'marcaLlanta', 'modeloLlanta', 'estadoConteo', 'tieneDiscrepancia']
✅ Cargados 7 productos
🎨 Renderizando productos...
🎨 Total productos a renderizar: 7
🎨 Filtros activos: {texto: '', estado: '', tipo: ''}
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
🔧 DEBUG crearFilaProducto - Producto 17: {nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen', tieneDiscrepancia: true, tieneAjustePendiente: true, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(1)}
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
🔧 crearNuevosBotonesAccion - Producto 17: {tieneDiscrepancia: true, tieneAjustePendiente: true, detalleAjuste: {…}}
🟢 Producto 17: Mostrando botón VER AJUSTE
✅ Botones generados para producto 17: Ver Ajuste
❌ Producto 20 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 20: {nombreProducto: 'Llanta Agregar Marca Agrega Modelo', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 20 NO tiene ajuste pendiente
❌ Producto 20 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 20: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 20: Crear Ajuste
❌ Producto 1016 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1016: {nombreProducto: 'Llanta Kumho Mobile', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1016 NO tiene ajuste pendiente
❌ Producto 1016 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1016: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1016: Crear Ajuste
❌ Producto 1017 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1017: {nombreProducto: 'Llanta Test', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1017 NO tiene ajuste pendiente
❌ Producto 1017 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1017: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1017: Crear Ajuste
❌ Producto 1018 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1018: {nombreProducto: 'Llanta Firestone Extreme', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1018 NO tiene ajuste pendiente
❌ Producto 1018 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1018: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1018: Crear Ajuste
❌ Producto 1019 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1019: {nombreProducto: 'Llanta Continental Urban', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1019 NO tiene ajuste pendiente
❌ Producto 1019 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1019: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1019: Crear Ajuste
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
❌ Producto 1021 NO tiene ajuste pendiente
🔧 DEBUG crearFilaProducto - Producto 1021: {nombreProducto: 'Llanta Kumho Miller', tieneDiscrepancia: false, tieneAjustePendiente: false, ajustesPendientesTotal: 1, ajustesParaEsteProducto: Array(0)}
❌ Producto 1021 NO tiene ajuste pendiente
❌ Producto 1021 NO tiene ajuste pendiente
🔧 crearNuevosBotonesAccion - Producto 1021: {tieneDiscrepancia: false, tieneAjustePendiente: false, detalleAjuste: null}
✅ Botones generados para producto 1021: Crear Ajuste
✅ Productos renderizados correctamente con filtros preservados
📊 Actualizando estadísticas UI...
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
✅ Estadísticas actualizadas: 100% completado
🔍 === DEBUG: VERIFICANDO PANELES ===
📊 Estadísticas actuales: {total: 7, contados: 7, pendientes: 0, discrepancias: 1, porcentajeProgreso: 100, …}
🔄 Ajustes pendientes: 1
🔒 Permisos inventario actual: {puedeContar: true, puedeAjustar: true, puedeValidar: true, puedeCompletar: true, esAdmin: false, …}
✅ Mostrando panel de ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
🔍 === CONDICIONES BÁSICAS ===
📊 Todo contado: true (pendientes: 0 )
📦 Hay productos: true (total: 7 )
📝 Tiene permisos conteo: true
✅ Tiene permisos validación: true
👑 Es admin: false
🎛️ Panel finalización existe: true
🎛️ Panel conteo completado existe: false
✅ === INVENTARIO LISTO PARA PROCESAR ===
👑 Usuario puede finalizar inventario completo
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.02ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.9575ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
🏁 Actualizando panel de finalización...
✅ Panel de finalización actualizado - Puede finalizar: true
✅ Panel de finalización mostrado
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
📊 Estadísticas actualizadas correctamente: 0% completado
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔒 Aplicando control de permisos en la interfaz...
✅ Info de permisos mostrada: 📝 Conteo, 🔧 Ajustes, ✅ Validación, 🏁 Completar
✅ Control de permisos aplicado correctamente
✅ Ejecutor de inventario inicializado correctamente
🛡️ Barra restaurada a: 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
👁️ Iniciando monitor del badge de estado...
✅ Observer del badge configurado
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
El subproceso '.NET ThreadPool Worker' (23248) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (17648) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (21336) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (9788) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (26932) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (31264) terminó con código 0 (0x0).
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
El subproceso '.NET ThreadPool Worker' (33928) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
El subproceso 30884 terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.8719ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.3992ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
📊 Estadísticas actualizadas correctamente: 0% completado
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 1 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.0722ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.5606ms - 200
✅ Cargados 1 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
🔒 Auto-protección: Barra restaurada a 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
El subproceso '.NET ThreadPool Worker' (3280) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (32320) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34564) terminó con código 0 (0x0).
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
El subproceso 31764 terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
🔍 DETECTIVE: actualizarEstadisticas ejecutándose...
GestionLlantera.Web.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/progreso
API.Controllers.TomaInventarioController: Information: 📊 Obteniendo progreso del inventario: 5111
API.Services.TomaInventarioService: Information: 📊 Obteniendo progreso del inventario: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[CantidadFisica], [d].[Diferencia]
FROM [DetallesInventarioProgramado] AS [d]
WHERE [d].[InventarioProgramadoId] = @__inventarioId_0
API.Services.TomaInventarioService: Information: ✅ Progreso calculado: 7/7 (100%)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.5925ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.2123ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Progreso obtenido: 100%
📊 Estadísticas actualizadas correctamente: 0% completado
📋 Cargando ajustes pendientes...
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/TomaInventario/5111/ajustes
API.Controllers.TomaInventarioController: Information: 📋 Obteniendo ajustes pendientes para inventario 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 1 ajustes para inventario 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.0425ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.3396ms - 200
✅ Cargados 1 ajustes pendientes
🔄 Actualizando panel de ajustes pendientes...
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
📊 Actualizando estadísticas del panel con: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
✅ Panel actualizado: 1 ajustes pendientes
🔒 Auto-protección: Barra restaurada a 100%
🚨 DETECTIVE: ¡Alguien reseteó la barra a 0px!
🚨 Stack trace del culpable:
console.trace
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
🏁 === INICIANDO FINALIZACIÓN COMPLETA DE INVENTARIO ===
🔍 Ejecutando validaciones pre-finalización...
✅ Producto 17 SÍ tiene ajuste pendiente: {ajusteId: 2053, inventarioProgramadoId: 5111, productoId: 17, tipoAjuste: 'reconteo', cantidadSistemaOriginal: 2, …}
✅ Validaciones completadas: {puedeFinalizarse: true, mensaje: '', advertencias: Array(1), informacion: Array(1)}
📊 Contando ajustes por tipo...
🔍 Ajustes pendientes: (1) [{…}]
✅ Contadores calculados: {entradas: 0, salidas: 0, ajustes_sistema: 0, correcciones: 1, total: 1}
🔥 EJECUTANDO: ejecutarProcesoFinalizacion
📝 Aplicando ajustes pendientes...
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔥 === APLICANDO AJUSTES PENDIENTES DESDE WEB ===
GestionLlantera.Web.Controllers.TomaInventarioController: Information: 🔥 Inventario ID: 5111
GestionLlantera.Web.Services.AjustesInventarioService: Information: 🔥 === APLICANDO AJUSTES PENDIENTES (WEB SERVICE) ===
GestionLlantera.Web.Services.AjustesInventarioService: Information: 🔥 Inventario ID: 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/aplicar-ajustes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/aplicar-ajustes
API.Controllers.TomaInventarioController: Information: 🔥 === OPERACIÓN CRÍTICA: APLICANDO AJUSTES ===
API.Controllers.TomaInventarioController: Information: 🔥 Inventario ID: 5111
API.Controllers.TomaInventarioController: Information: 🔥 Usuario: Julissa Mejias
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[InventarioProgramadoId], [a].[ProductoId], [a].[TipoAjuste], [a].[CantidadSistemaOriginal], [a].[CantidadFisicaContada], [a].[CantidadFinalPropuesta], [a].[MotivoAjuste], [a].[UsuarioId], [a].[FechaCreacion], [a].[Estado], [a].[FechaAplicacion], [p].[NombreProducto], [u].[NombreUsuario]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0
ORDER BY [a].[FechaCreacion] DESC
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📋 Obtenidos 1 ajustes para inventario 5111
API.Controllers.TomaInventarioController: Information: 📋 Ajustes encontrados: 1
API.ServicesAPI.AjustesInventarioPendientesService: Information: 🔥 === OPERACIÓN CRÍTICA: APLICANDO AJUSTES AL STOCK REAL ===
API.ServicesAPI.AjustesInventarioPendientesService: Information: 🔥 Inventario ID: 5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__inventarioProgramadoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [a].[AjusteId], [a].[CantidadFinalPropuesta], [a].[CantidadFisicaContada], [a].[CantidadSistemaOriginal], [a].[Estado], [a].[FechaAplicacion], [a].[FechaCreacion], [a].[InventarioProgramadoId], [a].[MotivoAjuste], [a].[ProductoId], [a].[TipoAjuste], [a].[UsuarioId], [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [AjustesInventarioPendientes] AS [a]
INNER JOIN [Productos] AS [p] ON [a].[ProductoId] = [p].[ProductoID]
WHERE [a].[InventarioProgramadoId] = @__inventarioProgramadoId_0 AND [a].[Estado] = N'Pendiente'
API.ServicesAPI.AjustesInventarioPendientesService: Information: 📊 Aplicando 1 ajustes pendientes
API.ServicesAPI.AjustesInventarioPendientesService: Warning: ⚠️ Tipo de ajuste reconteo no manejado
API.ServicesAPI.AjustesInventarioPendientesService: Information: 🎉 === AJUSTES APLICADOS EXITOSAMENTE ===
API.Controllers.TomaInventarioController: Information: ✅ === AJUSTES APLICADOS EXITOSAMENTE ===
API.Controllers.TomaInventarioController: Information: ✅ Inventario: 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 31.0572ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 33.4582ms - 200
GestionLlantera.Web.Services.AjustesInventarioService: Information: 📡 Respuesta aplicar ajustes: Status=OK, Content={"success":true,"message":"Todos los ajustes pendientes han sido aplicados al stock del sistema","inventarioId":5111,"fechaAplicacion":"2025-08-01T16:23:08.5821004-06:00","nota":"Los cambios en el stock son irreversibles"}
GestionLlantera.Web.Services.AjustesInventarioService: Information: ✅ Ajustes aplicados exitosamente
GestionLlantera.Web.Controllers.TomaInventarioController: Information: ✅ Ajustes aplicados exitosamente desde web
🔍 RESPUESTA COMPLETA DE AJUSTES: {success: true, message: 'Todos los ajustes pendientes han sido aplicados al stock del sistema', inventarioId: 5111, timestamp: '2025-08-01T16:23:08.5900634-06:00'}
✅ Ajustes aplicados exitosamente
🏁 Completando inventario...
GestionLlantera.Web.Services.TomaInventarioService: Information: 🏁 Completando inventario 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/TomaInventario/5111/completar
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/TomaInventario/5111/completar
API.Controllers.TomaInventarioController: Information: 🏁 Completando inventario programado: 5111
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Completar Inventario'
ValidarPermisoAsync: Information: 🔍 Usuario: Julissa Mejias
ValidarPermisoAsync: Information: 🔍 Controlador: TomaInventarioController
ValidarPermisoAsync: Information: 🔍 Acción: CompletarInventarioProgramado
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 4
ValidarPermisoAsync: Information: 🔍 Es administrador: True
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Completar Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Completar Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Completar Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Julissa Mejias, Permiso: Completar Inventario
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__inventarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Descripcion], [i].[Estado], [i].[FechaCreacion], [i].[FechaFin], [i].[FechaInicio], [i].[IncluirStockBajo], [i].[TipoInventario], [i].[Titulo], [i].[UbicacionEspecifica], [i].[UsuarioCreadorId]
FROM [InventariosProgramados] AS [i]
WHERE [i].[InventarioProgramadoId] = @__inventarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [InventariosProgramados] SET [Estado] = @p0
OUTPUT 1
WHERE [InventarioProgramadoId] = @p1;
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 100), @p5='?' (DbType = Boolean), @p6='?' (Size = 500), @p7='?' (Size = 50), @p8='?' (Size = 200), @p9='?' (Size = 500), @p10='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notificaciones] ([EntidadId], [EntidadTipo], [FechaCreacion], [FechaLectura], [Icono], [Leida], [Mensaje], [Tipo], [Titulo], [UrlAccion], [UsuarioId])
OUTPUT INSERTED.[NotificacionId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
API.ServicesAPI.NotificacionService: Information: Notificación creada exitosamente para usuario 4: ✅ Inventario Completado
API.Controllers.TomaInventarioController: Information: 📧 Notificación enviada al creador del inventario (Usuario ID: 4)
API.Controllers.TomaInventarioController: Information: ✅ Inventario completado exitosamente: 5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 31.9474ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 34.1987ms - 200
GestionLlantera.Web.Services.TomaInventarioService: Information: ✅ Inventario completado exitosamente
El subproceso '.NET ThreadPool Worker' (6468) terminó con código 0 (0x0).
🔍 Badges encontrados: (35) ['📝 Conteo • 🔧 Ajustes • ✅ Validación • 🏁 Completar', 'En Progreso', '0', '2', '1', '🔄 Reconteo', '2', 'Listo para finalizar', '7', '2', '1', 'Contado', '⚠️ Dif: -1', 'Ajuste Pendiente', '3', '3', 'Contado', '5', '5', 'Contado', '7', '7', 'Contado', '5', '5', 'Contado', '20', '20', 'Contado', '9', '9', 'Contado', 'Listo para finalizar', 'ID: -', 'Tipo']
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔐 Token JWT obtenido correctamente para cargar página de programar inventario
GestionLlantera.Web.Services.UsuariosService: Information: Obteniendo todos los usuarios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Usuarios/usuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Usuarios/usuarios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[UsuarioID], [u].[NombreUsuario], [u].[Email], [u].[Activo], [t].[NombreRol], [t].[UsuarioId], [t].[RolId], [t].[RolID0]
FROM [Usuarios] AS [u]
LEFT JOIN (
    SELECT [r].[NombreRol], [u0].[UsuarioId], [u0].[RolId], [r].[RolID] AS [RolID0]
    FROM [UsuarioRoles] AS [u0]
    INNER JOIN [Roles] AS [r] ON [u0].[RolId] = [r].[RolID]
) AS [t] ON [u].[UsuarioID] = [t].[UsuarioId]
ORDER BY [u].[UsuarioID], [t].[UsuarioId], [t].[RolId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.7501ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.1296ms - 200
GestionLlantera.Web.Services.UsuariosService: Information: Respuesta recibida para ObtenerTodosAsync: 717 caracteres
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventarios programados
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventarios programados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], COALESCE((
    SELECT TOP(1) [u].[NombreUsuario]
    FROM [Usuarios] AS [u]
    WHERE [u].[UsuarioID] = [i].[UsuarioCreadorId]), 'Desconocido'), [t].[AsignacionId], [t].[InventarioProgramadoId], [t].[UsuarioId], [t].[NombreUsuario], [t].[EmailUsuario], [t].[PermisoConteo], [t].[PermisoAjuste], [t].[PermisoValidacion], [t].[PermisoCompletar], [t].[FechaAsignacion], [t].[UsuarioID0], CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d]
        WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d0]
        WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
    ELSE 0
END, CASE
    WHEN [i].[Estado] <> N'Programado' THEN (
        SELECT COUNT(*)
        FROM [DetallesInventarioProgramado] AS [d1]
        WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
    ELSE 0
END
FROM [InventariosProgramados] AS [i]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u0].[NombreUsuario], [u0].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u0].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u0] ON [a].[UsuarioId] = [u0].[UsuarioID]
) AS [t] ON [i].[InventarioProgramadoId] = [t].[InventarioProgramadoId]
ORDER BY [i].[FechaCreacion] DESC, [i].[InventarioProgramadoId], [t].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.179ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.4552ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventarios programados
GestionLlantera.Web.Controllers.InventarioController: Information: === OBTENIENDO ID USUARIO ACTUAL ===
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: JwtToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: userId = 4
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Administrador
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Facturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Costos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Utilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Programar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Completa
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ajustar Stock
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Gestion Usuarios
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerCostos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = VerUtilidades
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = ProgramarInventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Iniciar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Completar Inventario
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Descargar Reportes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Facturación
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Editar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Productos
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = CompletarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = EditarFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = AnularFacturas
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Crear Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Ver Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Eliminar Clientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: Permission = Entregar Pendientes
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: exp = 1754090504
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: iss = Tuco.API
GestionLlantera.Web.Controllers.InventarioController: Information: Claim: aud = Tuco.Client
GestionLlantera.Web.Controllers.InventarioController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.InventarioController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.InventarioController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.InventarioController: Information: ID parseado de NameIdentifier: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 1 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 1 notificaciones no leídas
Formulario encontrado: form#formNuevoInventario
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 1 notificaciones no leídas
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 4
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__8__locals1_id_0='?' (DbType = Int32), @__userId_Value_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [n].[NotificacionId], [n].[EntidadId], [n].[EntidadTipo], [n].[FechaCreacion], [n].[FechaLectura], [n].[Icono], [n].[Leida], [n].[Mensaje], [n].[Tipo], [n].[Titulo], [n].[UrlAccion], [n].[UsuarioId]
FROM [Notificaciones] AS [n]
WHERE [n].[NotificacionId] = @__8__locals1_id_0 AND [n].[UsuarioId] = @__userId_Value_1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notificaciones] SET [FechaLectura] = @p0, [Leida] = @p1
OUTPUT 1
WHERE [NotificacionId] = @p2;
GestionLlantera.Web.Services.UsuariosService: Information: URL base del cliente HTTP: https://localhost:7273/
GestionLlantera.Web.Controllers.InventarioController: Information: 🔒 Usuario Julissa Mejias - Puede ver programados: True
GestionLlantera.Web.Services.InventarioService: Information: Obteniendo inventario programado con ID: 5111
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para obtener inventario programado por ID
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/inventarios-programados/5111
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[InventarioProgramadoId], [t].[Titulo], [t].[Descripcion], [t].[FechaInicio], [t].[FechaFin], [t].[TipoInventario], [t].[Estado], [t].[FechaCreacion], [t].[UsuarioCreadorId], [t].[UbicacionEspecifica], [t].[IncluirStockBajo], [t0].[AsignacionId], [t0].[InventarioProgramadoId], [t0].[UsuarioId], [t0].[NombreUsuario], [t0].[EmailUsuario], [t0].[PermisoConteo], [t0].[PermisoAjuste], [t0].[PermisoValidacion], [t0].[PermisoCompletar], [t0].[FechaAsignacion], [t0].[UsuarioID0], [t].[c], [t].[c0], [t].[c1]
FROM (
    SELECT TOP(1) [i].[InventarioProgramadoId], [i].[Titulo], [i].[Descripcion], [i].[FechaInicio], [i].[FechaFin], [i].[TipoInventario], [i].[Estado], [i].[FechaCreacion], [i].[UsuarioCreadorId], [i].[UbicacionEspecifica], [i].[IncluirStockBajo], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d]
            WHERE [d].[InventarioProgramadoId] = [i].[InventarioProgramadoId])
        ELSE 0
    END AS [c], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d0]
            WHERE [d0].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d0].[CantidadFisica] IS NOT NULL))
        ELSE 0
    END AS [c0], CASE
        WHEN [i].[Estado] <> N'Programado' THEN (
            SELECT COUNT(*)
            FROM [DetallesInventarioProgramado] AS [d1]
            WHERE [d1].[InventarioProgramadoId] = [i].[InventarioProgramadoId] AND ([d1].[Diferencia] <> 0 OR ([d1].[Diferencia] IS NULL)) AND ([d1].[Diferencia] IS NOT NULL))
        ELSE 0
    END AS [c1]
    FROM [InventariosProgramados] AS [i]
    WHERE [i].[InventarioProgramadoId] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [a].[AsignacionId], [a].[InventarioProgramadoId], [a].[UsuarioId], [u].[NombreUsuario], [u].[Email] AS [EmailUsuario], [a].[PermisoConteo], [a].[PermisoAjuste], [a].[PermisoValidacion], [a].[PermisoCompletar], [a].[FechaAsignacion], [u].[UsuarioID] AS [UsuarioID0]
    FROM [AsignacionesUsuariosInventario] AS [a]
    INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioId] = [u].[UsuarioID]
) AS [t0] ON [t].[InventarioProgramadoId] = [t0].[InventarioProgramadoId]
ORDER BY [t].[InventarioProgramadoId], [t0].[AsignacionId]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.9391ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 10.5497ms - 200
GestionLlantera.Web.Services.InventarioService: Information: Contenido recibido de la API para inventario programado ID 5111
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
PermisosController: Information: 🔍 Verificando permiso Menu_Inventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.3862ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.1784ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_VerProductos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_VerProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_VerProductos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4342ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.8773ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_AgregarProductos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_AgregarProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_AgregarProductos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.9792ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.371ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ProgramarInventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ProgramarInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ProgramarInventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.3862ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.7203ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_HistorialInventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_HistorialInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_HistorialInventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.0683ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.4819ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
PermisosController: Information: 🔍 Verificando permiso Menu_Ventas para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Ventas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Ventas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.0404ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.4781ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Clientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_Clientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.9055ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.3268ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Facturación para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_Facturación
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.6702ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.158ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_EntregasPendientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_EntregasPendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_EntregasPendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_EntregasPendientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.8851ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.2665ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
PermisosController: Information: 🔍 Verificando permiso Menu_Proveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Proveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Proveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4075ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.8888ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionProveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionProveedores
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_GestionProveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_GestionProveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_GestionProveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_GestionProveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5884ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.938ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_PedidosProveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_PedidosProveedores
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_PedidosProveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_PedidosProveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_PedidosProveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_PedidosProveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5886ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.061ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
PermisosController: Information: 🔍 Verificando permiso Menu_Reportes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Reportes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5782ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.9537ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarExcel
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarExcel
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ExportarExcel para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ExportarExcel'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ExportarExcel'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ExportarExcel
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4452ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.9701ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarPDF
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarPDF
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ExportarPDF para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ExportarPDF'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ExportarPDF'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ExportarPDF
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.8433ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.4893ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ReportesVentas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ReportesVentas
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ReportesVentas para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ReportesVentas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ReportesVentas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ReportesVentas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.4981ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.1055ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Menu_Configuración para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Configuración'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Configuración
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.8753ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.4051ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_RolesPermisos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_RolesPermisos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_RolesPermisos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_RolesPermisos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_RolesPermisos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_RolesPermisos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.1554ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.5861ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionUsuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionUsuarios
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_GestionUsuarios para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_GestionUsuarios'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_GestionUsuarios'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_GestionUsuarios
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.2706ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.8955ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistemaDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_HerramientasSistemaDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.8855ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.7581ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisosDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisosDEV
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_DiagnosticoPermisosDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_DiagnosticoPermisosDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_DiagnosticoPermisosDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_DiagnosticoPermisosDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.9197ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.4241ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_LogsSistemaDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_LogsSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_LogsSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_LogsSistemaDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.5496ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.0464ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
PermisosController: Information: 🔍 Verificando permiso Ver Reportes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Reportes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.3692ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.7322ms - 200
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Julissa Mejias
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: zlktmbs334@tormails.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 4
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Administrador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Facturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Costos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Utilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Programar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Completa
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ajustar Stock
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerCostos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: VerUtilidades
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Completar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Descargar Reportes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Facturación
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Editar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Productos
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: CompletarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: EditarFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: AnularFacturas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Crear Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Eliminar Clientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Entregar Pendientes
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090504
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_HerramientasSistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.8902ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.2726ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_DiagnosticoPermisos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_DiagnosticoPermisos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_DiagnosticoPermisos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_DiagnosticoPermisos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.6617ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 12.9164ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistema
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_LogsSistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_LogsSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_LogsSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_LogsSistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.329ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 12.6313ms - 200
🔧 JavaScript cargado para detalle inventario programado
🔧 Botón encontrado: null
❌ NO se encontró el botón con clase .iniciar-inventario-btn
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NDA5MDUwNCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.FU79rxUOeDqvUWb6Bbj8j2AOonc6KzTafNBLsMmXs3U
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090504
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 4. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.4731ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.515ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario de ningún claim
API.Controllers.NotificacionesController: Warning: No se pudo obtener el ID del usuario para conteo de notificaciones
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Colaborador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario umongegds@gmail.com (ID: 1)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 202.7023ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 205.7489ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: umongegds@gmail.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Ver Facturación para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Facturación': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 17.3884ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 20.4169ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
PermisosController: Information: 🔍 Verificando permiso Ver Productos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Productos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Productos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 16.5375ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 19.0451ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
PermisosController: Information: 🔍 Verificando permiso Entregar Pendientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Entregar Pendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Entregar Pendientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 16.0746ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.4495ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
PermisosController: Information: 🔍 Verificando permiso Ver Clientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Clientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.5963ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.9013ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
PermisosController: Information: 🔍 Verificando permiso Ver Reportes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Reportes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.8446ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.0606ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
PermisosController: Information: 🔍 Verificando permiso Configuracion Sistema para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Configuracion Sistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Configuracion Sistema': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.1993ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.4905ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
PermisosController: Information: 🔍 Verificando permiso Menu_Inventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Inventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.8347ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.2731ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_VerProductos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_VerProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_VerProductos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.3637ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.7596ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_AgregarProductos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_AgregarProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_AgregarProductos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.3805ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.7656ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ProgramarInventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ProgramarInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_ProgramarInventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.7802ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.1233ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_HistorialInventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_HistorialInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_HistorialInventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.6087ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.2346ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
PermisosController: Information: 🔍 Verificando permiso Menu_Ventas para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Ventas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Ventas': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.1785ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.6015ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
PermisosController: Information: 🔍 Verificando permiso Menu_Proveedores para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Proveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Proveedores': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.3403ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.766ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
PermisosController: Information: 🔍 Verificando permiso Menu_Reportes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Reportes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 16.1683ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.575ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Menu_Configuración para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Configuración'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Configuración': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.4731ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.0948ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistemaDEV para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_HerramientasSistemaDEV': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.0699ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.5768ms - 200
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
GestionLlantera.Web.Services.NotificacionDirectService: Information: Se encontraron 50 notificaciones
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistema para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 5
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Iniciar Inventario, Menu_Inventario, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Ver Historial Inventarios]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_HerramientasSistema': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.3895ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.7032ms - 200
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090609
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090609
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
El subproceso '.NET ThreadPool Worker' (29040) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30528) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (12392) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (26312) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34912) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30992) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (28184) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
El subproceso 29400 terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
El subproceso '.NET ThreadPool Worker' (28448) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34360) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (2064) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
API.Controllers.NotificacionesController: Information: Claims del usuario:
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
El subproceso '.NET ThreadPool Worker' (34388) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (19436) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (4776) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34520) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090609
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
El subproceso 35252 terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
El subproceso '.NET ThreadPool Worker' (33708) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (27484) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (31416) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claim Type: JwtToken, Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: === CLAIMS DISPONIBLES ===
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: JwtToken, Valor: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJJbmljaWFyIEludmVudGFyaW8iLCJNZW51X0ludmVudGFyaW8iLCJTdWJfTWVudV9Qcm9ncmFtYXJJbnZlbnRhcmlvIiwiU3ViX01lbnVfSGlzdG9yaWFsSW52ZW50YXJpbyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiXSwiZXhwIjoxNzU0MDkwNjA5LCJpc3MiOiJUdWNvLkFQSSIsImF1ZCI6IlR1Y28uQ2xpZW50In0.VCT8_PlMTO8MrGGZ4iIgRjCxUCYyr_H6VmFP9S1Axuo
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Valor: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Valor: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: userId, Valor: 1
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Valor: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Sub_Menu_HistorialInventario
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: Permission, Valor: Ver Historial Inventarios
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: exp, Valor: 1754090609
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: iss, Valor: Tuco.API
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Claim - Tipo: aud, Valor: Tuco.Client
GestionLlantera.Web.Services.NotificacionDirectService: Information: === FIN CLAIMS ===
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionDirectService: Information: ID de usuario obtenido de claims: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit)
GestionLlantera.Web.Services.NotificacionDirectService: Information: Usuario 1 tiene 0 notificaciones no leídas
