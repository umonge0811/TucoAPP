'API.exe' (CoreCLR: DefaultDomain): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.CoreLib.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\API.dll' cargado. Símbolos cargados.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\extensions\microsoft\web tools\projectsystem\net7.0\Microsoft.WebTools.ApiEndpointDiscovery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\SDK\9.0.302\DotnetTools\dotnet-watch\9.0.302-servicing.25319.7\tools\net9.0\any\middleware\Microsoft.AspNetCore.Watch.BrowserRefresh.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\IDE\Extensions\Microsoft\Web Tools\Browser Link\Microsoft.WebTools.BrowserLink.Net.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\commonextensions\microsoft\hotreload\Microsoft.Extensions.DotNetDeltaApplier.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.Pipes.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Overlapped.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.AccessControl.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Principal.Windows.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Claims.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Loader.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Concurrent.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: DefaultDomain): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.CoreLib.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Tuco.Clases.dll' cargado. Símbolos cargados.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.ConfigurationExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\GestionLlantera.Web.dll' cargado. Símbolos cargados.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ApiExplorer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\extensions\microsoft\web tools\projectsystem\net7.0\Microsoft.WebTools.ApiEndpointDiscovery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\SDK\9.0.302\DotnetTools\dotnet-watch\9.0.302-servicing.25319.7\tools\net9.0\any\middleware\Microsoft.AspNetCore.Watch.BrowserRefresh.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\IDE\Extensions\Microsoft\Web Tools\Browser Link\Microsoft.WebTools.BrowserLink.Net.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'c:\program files\microsoft visual studio\2022\community\common7\ide\commonextensions\microsoft\hotreload\Microsoft.Extensions.DotNetDeltaApplier.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.Pipes.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Overlapped.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.AccessControl.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Principal.Windows.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Claims.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Loader.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Concurrent.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Swashbuckle.AspNetCore.SwaggerGen.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.AspNetCore.Authentication.JwtBearer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.Policy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpsPolicy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.StaticFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Session.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Antiforgery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Cookies.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.ConfigurationExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Http.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authorization.Policy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpsPolicy.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.StaticFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Swashbuckle.AspNetCore.Swagger.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Ir a: paso a paso por procedimientos en código 'Program.<>c__DisplayClass0_0..ctor' que no es de usuario
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.EnvironmentVariables.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Physical.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.FileExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Options.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Binder.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.FileSystem.Watcher.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Swashbuckle.AspNetCore.SwaggerUI.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Numerics.Vectors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Ir a: paso a paso por procedimientos en código 'Program.<>c__DisplayClass0_0..ctor' que no es de usuario
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Hosting.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.UserSecrets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.EnvironmentVariables.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Physical.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.FileExtensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Debug.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Tracing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Binder.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.FileSystem.Watcher.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Memory.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Registry.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IIS.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IISIntegration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Numerics.Vectors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Composite.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encodings.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Intrinsics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.DiagnosticSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ApiExplorer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Connections.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Server.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HostFiltering.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpOverrides.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.ObjectPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ObjectModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.DataAnnotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ViewFeatures.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Expressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.JSInterop.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cryptography.Internal.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.WebEncoders.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.TagHelpers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Localization.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Thread.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.Diagnostics.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Specialized.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.TypeConverter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.ThreadPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.IO.Pipelines.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.Lightweight.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.ILGeneration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Net.Http.Headers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Uri.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Numerics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Tuco.Clases.dll' cargado. Símbolos cargados.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Html.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Configuration.UserSecrets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.Runtime.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Configuration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Console.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.Debug.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Logging.EventSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Tracing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.DependencyInjection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Quic.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.Win32.Registry.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IIS.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.IISIntegration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Composite.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encodings.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Intrinsics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.DiagnosticSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Connections.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Hosting.Server.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HostFiltering.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.HttpOverrides.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.ObjectPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Routing.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ObjectModel.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Caching.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Authentication.Core.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.Cors.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.DataAnnotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.RazorPages.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Razor.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.ViewFeatures.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Expressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.JSInterop.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Components.Web.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.DataProtection.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Cryptography.Internal.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Antiforgery.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.WebEncoders.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Mvc.TagHelpers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.OpenApi.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.Localization.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Thread.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.Diagnostics.EventLog.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Specialized.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.TypeConverter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Sockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.ThreadPool.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\System.IO.Pipelines.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.Lightweight.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Emit.ILGeneration.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\netstandard.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Net.Http.Headers.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Http.Features.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Uri.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Numerics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.Relational.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Metadata.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.RegularExpressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileSystemGlobbing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Html.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Annotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.XDocument.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\itextsharp.dll' cargado. El módulo se compiló sin símbolos.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\mscorlib.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Metadata.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileSystemGlobbing.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.Annotations.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.XDocument.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.Linq.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Private.Xml.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.MemoryMappedFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.NonGeneric.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Security.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.Hosting.Lifetime: Information: Now listening on: https://localhost:7038
Microsoft.Hosting.Lifetime: Information: Now listening on: http://localhost:5244
Microsoft.Hosting.Lifetime: Information: Application started. Press Ctrl+C to shut down.
Microsoft.Hosting.Lifetime: Information: Hosting environment: Development
Microsoft.Hosting.Lifetime: Information: Content root path: C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.IO.MemoryMappedFiles.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Extensions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'Anonymously Hosted DynamicMethods Assembly' cargado. 
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.Extensions.FileProviders.Embedded.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.Diagnostics.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.NonGeneric.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Security.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.Hosting.Lifetime: Information: Now listening on: https://localhost:7273
Microsoft.Hosting.Lifetime: Information: Now listening on: http://localhost:5049
Microsoft.Hosting.Lifetime: Information: Application started. Press Ctrl+C to shut down.
Microsoft.Hosting.Lifetime: Information: Hosting environment: Development
Microsoft.Hosting.Lifetime: Information: Content root path: C:\Users\UMA08\source\repos\Tuco\API
Verbose logs are written to:
C:\Users\UMA08\AppData\Local\Temp\visualstudio-js-debugger.txt
Verbose logs are written to:
C:\Users\UMA08\AppData\Local\Temp\visualstudio-js-debugger.txt
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Channels.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Channels.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebSockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Tasks.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebSockets.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Threading.Tasks.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NameResolution.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NameResolution.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\System.IdentityModel.Tokens.Jwt.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.Tokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.ReaderWriter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'Anonymously Hosted DynamicMethods Assembly' cargado. 
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.WebUtilities.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://localhost:7273/swagger/swagger-ui.css because it was inaccessible or had more than 7000 rules.
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.Http.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
GestionLlantera.Web.Services.AuthService: Information: 🌐 URL construida: https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\System.IdentityModel.Tokens.Jwt.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Tokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Xml.ReaderWriter.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Protocols.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Protocols.OpenIdConnect.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.JsonWebTokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Logging.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Immutable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.SqlServer.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Data.Common.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.EntityFrameworkCore.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Transactions.Local.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.AspNetCore.App\7.0.20\Microsoft.AspNetCore.WebUtilities.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\BCrypt.Net-Next.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Linq.Queryable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.NetworkInformation.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'Activo' on entity type 'Anuncio' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'EsVisible' on entity type 'Notificacion' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'Activo' on entity type 'Proveedore' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: The 'bool' property 'EstaActiva' on entity type 'SesionUsuario' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
Microsoft.EntityFrameworkCore.Model.Validation: Warning: No store type was specified for the decimal property 'Total' on entity type 'Factura'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\runtimes\win\lib\net6.0\Microsoft.Data.SqlClient.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.StackTrace.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\System.Configuration.ConfigurationManager.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.Process.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.InteropServices.RuntimeInformation.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Net.WebClient.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.ComponentModel.EventBasedAsync.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.Algorithms.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.Identity.Client.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.Encoding.CodePages.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.TraceSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
El subproceso 34516 terminó con código 0 (0x0).
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.SqlServer.Server.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (29ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[EsTopVendedor], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Administrador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
'API.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.X509Certificates.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'API.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\API\bin\Debug\net7.0\Microsoft.IdentityModel.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario zlktmbs334@tormails.com (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 1711.0046ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 1718.4437ms - 200
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.JsonWebTokens.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Text.RegularExpressions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Microsoft.IdentityModel.Abstractions.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Security.Cryptography.X509Certificates.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: zlktmbs334@tormails.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\Microsoft.CSharp.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Cargando página principal del dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 👤 ID del usuario actual: 4
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\bin\Debug\net7.0\Newtonsoft.Json.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Crear%20Anuncios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Crear%20Anuncios
PermisosController: Information: 🔍 Verificando permiso Crear Anuncios para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Crear Anuncios'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Crear Anuncios'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__userId_Value_0
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Crear Anuncios
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 77.217ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 79.5379ms - 200
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Serialization.Formatters.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.TraceSource.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Runtime.Serialization.Primitives.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Data.Common.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Ver Facturación para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Facturación
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 43.337ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 45.8835ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
PermisosController: Information: 🔍 Verificando permiso Ver Productos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Productos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Productos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.1691ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.1582ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
PermisosController: Information: 🔍 Verificando permiso Entregar Pendientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Entregar Pendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Entregar Pendientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.2897ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.3419ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
PermisosController: Information: 🔍 Verificando permiso Ver Clientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Clientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.1845ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.1294ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
PermisosController: Information: 🔍 Verificando permiso Ver Reportes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Ver Reportes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.2293ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.9371ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
PermisosController: Information: 🔍 Verificando permiso Configuracion Sistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Configuracion Sistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Configuracion Sistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.7094ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.8325ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
PermisosController: Information: 🔍 Verificando permiso Menu_Inventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Inventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.761ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.0767ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_VerProductos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_VerProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_VerProductos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.8172ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.814ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_AgregarProductos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_AgregarProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_AgregarProductos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.2657ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.2287ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ProgramarInventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ProgramarInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ProgramarInventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.07ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.1079ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_HistorialInventario para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_HistorialInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_HistorialInventario
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1208ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.2649ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
PermisosController: Information: 🔍 Verificando permiso Menu_Ventas para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Ventas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Ventas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.9529ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.994ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Clientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_Clientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.718ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.705ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Facturación para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_Facturación
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1641ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.2063ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_EntregasPendientes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_EntregasPendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_EntregasPendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_EntregasPendientes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.9937ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.1315ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
PermisosController: Information: 🔍 Verificando permiso Menu_Proveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Proveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Proveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.3935ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.3551ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionProveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionProveedores
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_GestionProveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_GestionProveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_GestionProveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_GestionProveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.4761ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.8285ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_PedidosProveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_PedidosProveedores
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_PedidosProveedores para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_PedidosProveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_PedidosProveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_PedidosProveedores
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.0015ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.1873ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
PermisosController: Information: 🔍 Verificando permiso Menu_Reportes para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Reportes
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.6963ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.6993ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarExcel
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarExcel
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ExportarExcel para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ExportarExcel'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ExportarExcel'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ExportarExcel
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.0748ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.2594ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarPDF
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ExportarPDF
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ExportarPDF para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ExportarPDF'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ExportarPDF'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ExportarPDF
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1834ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.5958ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ReportesVentas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ReportesVentas
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ReportesVentas para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ReportesVentas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ReportesVentas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_ReportesVentas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.4311ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.092ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Menu_Configuración para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Configuración'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_Configuración
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.1433ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.467ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_RolesPermisos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_RolesPermisos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_RolesPermisos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_RolesPermisos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_RolesPermisos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_RolesPermisos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.6375ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.906ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionUsuarios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_GestionUsuarios
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_GestionUsuarios para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_GestionUsuarios'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_GestionUsuarios'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_GestionUsuarios
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.1879ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.4261ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistemaDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_HerramientasSistemaDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.2619ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.3801ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisosDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisosDEV
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_DiagnosticoPermisosDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_DiagnosticoPermisosDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_DiagnosticoPermisosDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_DiagnosticoPermisosDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.7895ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.2961ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_LogsSistemaDEV para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_LogsSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_LogsSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_LogsSistemaDEV
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.0422ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.3852ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 53.5805ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 55.8051ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 47.4968ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 49.7342ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 33.7318ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 36.2087ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.179ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 32.2624ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Menu_HerramientasSistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.0914ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.0856ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_DiagnosticoPermisos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_DiagnosticoPermisos para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_DiagnosticoPermisos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_DiagnosticoPermisos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_DiagnosticoPermisos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 12.3813ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.7376ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_LogsSistema
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_LogsSistema para usuario Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_LogsSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_LogsSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a Sub_Menu_LogsSistema
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 11.9006ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.3712ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
📊 Módulo Dashboard cargado correctamente
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Dashboard cargado exitosamente
✅ Evento de formulario de nueva nota configurado
✅ Evento de formulario de nuevo anuncio configurado
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 32.5652ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 34.9777ms - 200
📊 Dashboard - Inicializando módulo principal
📊 Cargando alertas de stock...
📊 Cargando estadísticas de inventario total...
🏆 Cargando información del top vendedor...
👥 Cargando información de usuarios conectados...
📝 Cargando notas rápidas...
📢 Cargando anuncios del sistema...
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.NotasRapidasService: Information: 🔧 NotasRapidasService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo estadísticas de inventario total para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando alertas de stock desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener alertas de stock
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/alertas-stock
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando top vendedor desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener top vendedor
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/top-vendedor
GestionLlantera.Web.Services.AnunciosService: Information: Obteniendo anuncios desde la API
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.AnunciosService: Information: 🌐 URL construida: https://localhost:7273/api/Anuncios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Anuncios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Anuncios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando estadísticas de inventario total desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener inventario total
GestionLlantera.Web.Services.NotasRapidasService: Information: Obteniendo notas para usuario: 4
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Services.NotasRapidasService: Information: 🌐 URL construida: https://localhost:7273/api/notasrapidas/usuario/4
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/notasrapidas/usuario/4
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/notasrapidas/usuario/4
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
API.Controllers.AnunciosController: Information: 🔔 === OBTENIENDO ANUNCIOS ===
API.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
API.Controllers.DashboardController: Information: 📊 Obteniendo resumen de inventario total para dashboard
API.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[AnuncioId], [a].[UsuarioCreadorId], [u].[NombreUsuario] AS [NombreCreador], [a].[Titulo], [a].[Contenido], [a].[TipoAnuncio], [a].[Prioridad], [a].[EsImportante], [a].[Activo], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaVencimiento]
FROM [Anuncios] AS [a]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [a].[Activo] = CAST(1 AS bit)
ORDER BY [a].[EsImportante] DESC, [a].[FechaCreacion] DESC
API.Controllers.NotasRapidasController: Information: Obteniendo notas para usuario: 4
API.Controllers.AnunciosController: Information: ✅ Se encontraron 1 anuncios
El subproceso 34768 terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[StockMinimo] - [p].[CantidadEnInventario] AS [Diferencia]
FROM [Productos] AS [p]
WHERE [p].[CantidadEnInventario] <= [p].[StockMinimo]
ORDER BY [p].[CantidadEnInventario]
API.Controllers.DashboardController: Information: 📊 Alertas encontradas: 8 total, 7 agotados, 1 críticos
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [n].[NotaId], [n].[UsuarioId], [n].[Titulo], [n].[Contenido], [n].[Color], [n].[EsFavorita], [n].[FechaCreacion], [n].[FechaModificacion]
FROM [NotasRapidas] AS [n]
WHERE [n].[UsuarioId] = @__usuarioId_0 AND [n].[Eliminada] = CAST(0 AS bit)
ORDER BY [n].[EsFavorita] DESC, [n].[FechaModificacion] DESC
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 61.1565ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 64.9945ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 45.7928ms - 200
GestionLlantera.Web.Services.AnunciosService: Information: Respuesta de anuncios recibida: {"success":true,"anuncios":[{"anuncioId":6,"usuarioCreadorId":4,"nombreCreador":"Julissa Mejias","titulo":"Nota de Prueba","contenido":"Hay que limpiar hoy","tipoAnuncio":"Mantenimiento","prioridad":"Normal","esImportante":true,"activo":true,"fechaCreacion":"2025-08-06T21:44:12.386021","fechaModificacion":null,"fechaVencimiento":"2025-08-07T00:00:00","estaVencido":true}]}
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 50.6892ms - 200
Microsoft.EntityFrameworkCore.Query: Warning: The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 72.8439ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 58.0331ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta recibida: {"success":true,"totalAlertas":8,"productosAgotados":7,"productosCriticos":1,"productos":[{"productoId":20,"nombreProducto":"Llanta Agregar Marca Agrega Modelo","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1016,"nombreProducto":"Llanta Kumho Mobile","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1017,"nombreProducto":"Llanta Test","cantidadEnInventario":0,"stockMinimo":2,"diferencia":2},{"productoId":1018,"nombreProducto":"Llanta Firestone Extreme","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1021,"nombreProducto":"Llanta Kumho Miller","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1022,"nombreProducto":"Producto Ordenando URL API","cantidadEnInventario":0,"stockMinimo":1,"diferencia":1},{"productoId":1023,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1024,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":5,"stockMinimo":5,"diferencia":0}],"mensaje":"Productos requieren atención"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Alertas de stock obtenidas correctamente
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (7ms) [Parameters=[@__fechaInicio_0='?' (DbType = DateTime2), @__fechaFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [f].[UsuarioCreadorId] AS [UsuarioId], [u].[NombreUsuario] AS [NombreVendedor], COUNT(*) AS [TotalVentas], COALESCE(SUM([f].[Total]), 0.0) AS [MontoTotal], AVG([f].[Total]) AS [PromedioVenta]
FROM [Facturas] AS [f]
INNER JOIN [Usuarios] AS [u] ON [f].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [f].[FechaFactura] >= @__fechaInicio_0 AND [f].[FechaFactura] <= @__fechaFin_1 AND [u].[EsTopVendedor] = CAST(1 AS bit)
GROUP BY [f].[UsuarioCreadorId], [u].[NombreUsuario]
ORDER BY COUNT(*) DESC, COALESCE(SUM([f].[Total]), 0.0) DESC
📡 Respuesta del servidor: 200
✅ Datos de alertas recibidos: {success: true, data: {…}}
📊 Actualizando vista con datos: {success: true, totalAlertas: 8, productosAgotados: 7, productosCriticos: 1, productos: Array(8), …}
✅ Vista de alertas de stock actualizada correctamente
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) COUNT(*) AS [TotalProductos], COALESCE(SUM([t].[CantidadEnInventario]), 0) AS [TotalCantidad], COALESCE(SUM(CAST([t].[CantidadEnInventario] AS decimal(10,2)) * [t].[Precio]), 0.0) AS [ValorTotalInventario], COUNT(CASE
    WHEN [t].[CantidadEnInventario] > 0 THEN 1
END) AS [ProductosActivos], COUNT(CASE
    WHEN [t].[CantidadEnInventario] = 0 THEN 1
END) AS [ProductosAgotados]
FROM (
    SELECT [p].[CantidadEnInventario], [p].[Precio], 1 AS [Key]
    FROM [Productos] AS [p]
) AS [t]
GROUP BY [t].[Key]
GestionLlantera.Web.Services.AnunciosService: Information: ✅ 1 anuncios obtenidos correctamente
📢 Mostrando anuncios: (1) [{…}]
👤 UserId obtenido desde meta tag: 4
🔍 Verificando permisos anuncio: {anuncioId: 6, usuarioCreadorId: 4, currentUserId: 4, esCreador: true}
✅ Anuncios mostrados correctamente
✅ Anuncios cargados correctamente: (1) [{…}]
API.Controllers.DashboardController: Information: 📊 Top vendedor: Ulises Monge Aguilar con 10 ventas por ₡2,959,272
API.Controllers.DashboardController: Information: 📊 Inventario total: ₡951,400, 11 productos, 27 unidades
📝 Mostrando notas rápidas: (2) [{…}, {…}]
✅ Notas rápidas mostradas correctamente
✅ Notas rápidas cargadas correctamente: (2) [{…}, {…}]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 103.5833ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 113.9116ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de top vendedor recibida: {"success":true,"vendedor":"Ulises Monge Aguilar","totalVentas":10,"montoTotal":2959272.10,"promedioVenta":295927.210000,"mensaje":"Ulises Monge Aguilar lidera con 10 ventas"}
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 98.0958ms - 200
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Top vendedor obtenido correctamente
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 107.1436ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (8ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de inventario total recibida: {"success":true,"valorTotal":951400.0000,"totalProductos":11,"totalCantidad":27,"productosActivos":4,"productosAgotados":7,"mensaje":"11 productos en inventario"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Estadísticas de inventario total obtenidas correctamente
🏆 Mostrando datos del top vendedor: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 10, montoTotal: 2959272.1, promedioVenta: 295927.21, …}
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 48 sesiones activas
✅ Top vendedor mostrado correctamente
✅ Top vendedor cargado correctamente: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 10, montoTotal: 2959272.1, promedioVenta: 295927.21, …}
📡 Respuesta del servidor (inventario): 200
✅ Datos de inventario total recibidos: {success: true, data: {…}}
📊 Actualizando tarjeta de inventario total: {success: true, valorTotal: 951400, totalProductos: 11, totalCantidad: 27, productosActivos: 4, …}
✅ Valor total actualizado: ₡951 400
✅ Detalle actualizado: 11 (27 unidades)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 123.9601ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 127.905ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":48,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:42:31.137","sesionesActivas":48,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
👥 Mostrando datos de usuarios conectados: {success: true, totalUsuarios: 1, totalSesiones: 48, usuarios: Array(1), mensaje: '1 usuario conectado'}
✅ Panel de usuarios conectados (bottom) actualizado
✅ Contador del sidebar actualizado: 1 usuarios
✅ Usuarios conectados mostrados correctamente
✅ Usuarios conectados cargados correctamente: {success: true, totalUsuarios: 1, totalSesiones: 48, usuarios: Array(1), mensaje: '1 usuario conectado'}
📊 Inicializando eventos de formularios...
🔄 Configurando refresco automático...
✅ Dashboard inicializado correctamente
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 48 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.6059ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.2112ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":48,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:42:31.137","sesionesActivas":48,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
🧹 Recursos de sidebar usuarios limpiados
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 === ACCESO AL MÓDULO DE FACTURACIÓN ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Usuario autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Nombre de usuario: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔍 Obteniendo información del usuario...
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Claims disponibles:
GestionLlantera.Web.Controllers.FacturacionController: Information:    - JwtToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NTE1Mzc1MCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.Tm3nmGI01E40B3MhUj2KZRfP3CkTD2LFlfsitkjO2Bg
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 4
GestionLlantera.Web.Controllers.FacturacionController: Information:    - userId: 4
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Administrador
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Facturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Costos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Utilidades
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Programar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Gestion Completa
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Editar Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Eliminar Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ajustar Stock
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Reportes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Gestion Usuarios
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: VerCostos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: VerUtilidades
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: ProgramarInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Iniciar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Completar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Descargar Reportes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Editar Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: CompletarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: EditarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: AnularFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Eliminar Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - exp: 1755153750
GestionLlantera.Web.Controllers.FacturacionController: Information:    - iss: Tuco.API
GestionLlantera.Web.Controllers.FacturacionController: Information:    - aud: Tuco.Client
GestionLlantera.Web.Controllers.FacturacionController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.FacturacionController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ ID parseado de NameIdentifier: 4
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === VERIFICANDO PERMISOS DIRECTAMENTE DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos extraídos del token: Crear Facturas, Ver Costos, Ver Utilidades, Programar Inventario, Gestion Completa, Editar Productos, Eliminar Productos, Ajustar Stock, Ver Reportes, Gestion Usuarios, VerCostos, VerUtilidades, ProgramarInventario, Iniciar Inventario, Completar Inventario, Descargar Reportes, Ver Facturación, Editar Clientes, Ver Productos, CompletarFacturas, EditarFacturas, AnularFacturas, Crear Clientes, Ver Clientes, Eliminar Clientes, Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos encontrados en token: Crear Facturas, Ver Costos, Ver Utilidades, Programar Inventario, Gestion Completa, Editar Productos, Eliminar Productos, Ajustar Stock, Ver Reportes, Gestion Usuarios, VerCostos, VerUtilidades, ProgramarInventario, Iniciar Inventario, Completar Inventario, Descargar Reportes, Ver Facturación, Editar Clientes, Ver Productos, CompletarFacturas, EditarFacturas, AnularFacturas, Crear Clientes, Ver Clientes, Eliminar Clientes, Entregar Pendientes
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.7977ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.4011ms - 200
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === PERMISOS VALIDADOS DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCrearFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCompletarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeEditarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeAnularFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 esAdmin: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Configuración enviada al frontend: {"Usuario":{"usuarioId":4,"id":4,"nombre":"Julissa Mejias","nombreUsuario":"Julissa Mejias","email":"zlktmbs334@tormails.com"},"Permisos":{"puedeCrearFacturas":true,"puedeCompletarFacturas":true,"puedeEditarFacturas":true,"puedeAnularFacturas":true,"esAdmin":true},"FechaActual":"2025-08-13","HoraActual":"23:42","TokenDisponible":true}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.4359ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.111ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.2427ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 31.7031ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.8851ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.3978ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 33.0076ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 35.4827ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
🖨️ Módulo de impresión térmica cargado correctamente
✅ Sistema de zoom simplificado cargado
📋 Funciones de proformas y detalles exportadas globalmente
📋 Funciones de facturas pendientes exportadas globalmente
📋 Módulo de filtros de proformas (Frontend) cargado correctamente
✅ verDetalleProducto disponible desde facturacion.js
📦 Módulo InventarioFacturacion.js cargado correctamente
🎯 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🎯 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:42', tokenDisponible: true}
❌ No se encontraron permisos en la configuración
🔧 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🔧 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:42', tokenDisponible: true}
🔧 Usuario disponible: undefined
🔧 Permisos disponibles: undefined
🔧 Token disponible: undefined
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Inicializando módulo de facturación
🚀 === INICIO inicializarFacturacion ===
🔐 Cargando permisos del usuario...
🔍 === INICIANDO CARGA DE PERMISOS EN FACTURACIÓN ===
🔍 Configuración recibida: {
  "usuario": {
    "usuarioId": 4,
    "id": 4,
    "nombre": "Julissa Mejias",
    "nombreUsuario": "Julissa Mejias",
    "email": "zlktmbs334@tormails.com"
  },
  "permisos": {
    "puedeCrearFacturas": true,
    "puedeCompletarFacturas": true,
    "puedeEditarFacturas": true,
    "puedeAnularFacturas": true,
    "esAdmin": true
  },
  "fechaActual": "2025-08-13",
  "horaActual": "23:42",
  "tokenDisponible": true
}
🔐 === PERMISOS CARGADOS CORRECTAMENTE ===
🔐 puedeCrearFacturas: true
🔐 puedeCompletarFacturas: true
🔐 puedeEditarFacturas: true
🔐 puedeAnularFacturas: true
🔐 esAdmin: true
🎯 === CONFIGURANDO INTERFAZ SEGÚN PERMISOS ===
🎯 Permisos actuales del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: true, puedeEditarFacturas: true, puedeAnularFacturas: true, esAdmin: true}
🎯 puedeCompletarFacturas: true (tipo: boolean )
🎯 puedeCrearFacturas: true (tipo: boolean )
🎯 Evaluación de permisos:
🎯   - puedeCompletar (CompletarFacturas): true
🎯   - puedeCrear (CrearFacturas): true
👑 === INTERFAZ CONFIGURADA: USUARIO CON PERMISO COMPLETAR ===
👑 Botón: Verde - "Completar Venta"
👑 Flujo: Factura pagada inmediatamente con ajuste de stock
📋 Botón Facturas Pendientes habilitado para usuario con permisos de completar
🚀 Inicializando modales...
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
🚀 Configurando eventos...
🚀 Actualizando totales...
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
🚀 Iniciando carga de productos iniciales...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 1
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
✅ Facturación inicializada correctamente
🚀 === FIN inicializarFacturacion ===
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153750
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.InventarioController: Information: 🚀 Usuario: Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a VerCostos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a VerUtilidades
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Julissa Mejias - VerCostos: True, VerUtilidades: True
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 36.106ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 38.9638ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Query: Warning: The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn w-100 btn-outline-secondary
🎯 Deshabilitado: true
🎯 Texto: Completar Venta
🎯 Título: Agrega productos y selecciona un cliente
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Costo], [p].[PorcentajeUtilidad], CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN [p].[Costo] * ([p].[PorcentajeUtilidad] / 100.0)
    ELSE NULL
END, CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN [p].[Costo] + ([p].[Costo] * ([p].[PorcentajeUtilidad] / 100.0))
    ELSE [p].[Precio]
END, CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 105.658ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 108.5381ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10362 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 2, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 1
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19208 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 48 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.6066ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.0245ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":48,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:42:31.137","sesionesActivas":48,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
📋 === ABRIENDO MODAL DE FACTURAS PENDIENTES ===
📋 *** MODAL DE FACTURAS PENDIENTES COMPLETAMENTE VISIBLE ***
📋 Elementos disponibles en el DOM:
📋 - Input búsqueda: 1
📋 - Select estado: 1
📋 - Tabla body: 1
📋 - Loading: 1
📋 - Content: 1
✅ Inicializando filtros de facturas pendientes...
🔍 === INICIALIZANDO FILTROS DE FACTURAS PENDIENTES (FRONTEND) ===
🔍 Configurando eventos de filtrado para facturas pendientes...
✅ Eventos de filtros de facturas configurados con delegación
📋 === CARGANDO TODAS LAS FACTURAS PENDIENTES ===
✅ Filtros de facturas pendientes inicializados correctamente
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Obteniendo todas las facturas desde el servicio de facturación
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📋 URL de consulta: https://localhost:7273/api/Facturacion/facturas?tamano=1000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[NumeroFactura], [t].[ClienteId], [t].[NombreCliente], [t].[IdentificacionCliente], [t].[TelefonoCliente], [t].[EmailCliente], [t].[DireccionCliente], [t].[FechaFactura], [t].[FechaVencimiento], [t].[Subtotal], [t].[DescuentoGeneral], [t].[PorcentajeImpuesto], COALESCE([t].[MontoImpuesto], 0.0), [t].[Total], [t].[Estado], [t].[TipoDocumento], [t].[MetodoPago], [t].[Observaciones], [t].[UsuarioCreadorId], [u].[NombreUsuario], [t].[FechaCreacion], [t].[FechaActualizacion], [u].[UsuarioID], [d].[DetalleFacturaId], [d].[ProductoId], [d].[NombreProducto], [d].[DescripcionProducto], [d].[Cantidad], [d].[PrecioUnitario], [d].[PorcentajeDescuento], [d].[MontoDescuento], [d].[Subtotal]
FROM (
    SELECT [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    ORDER BY [f].[FechaCreacion] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Usuarios] AS [u] ON [t].[UsuarioCreadorId] = [u].[UsuarioID]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FechaCreacion] DESC, [t].[FacturaId], [u].[UsuarioID]
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Facturas obtenidas exitosamente: 329 facturas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio: Success=True, Message=Facturas obtenidas exitosamente
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ 329 facturas obtenidas exitosamente
📋 Respuesta del servidor facturas: {success: true, facturas: Array(329), message: 'Se encontraron 329 facturas'}
✅ Facturas pendientes cargadas: 329
🔍 === APLICANDO FILTROS LOCALMENTE A FACTURAS ===
🔍 Total facturas disponibles: 329
🔍 Filtros aplicados: {texto: '', estado: 'todos', fechaDesde: '', fechaHasta: ''}
🔍 Facturas filtradas: 329
📋 === MOSTRANDO FACTURAS PENDIENTES PAGINADAS ===
📋 Total facturas a paginar: 329
📋 Facturas por página: 20
📋 Página actual: 1
📋 Facturas en esta página: 20
🔧 Configurando eventos de botones de facturas...
✅ Eventos de botones de facturas configurados correctamente
📄 === MOSTRANDO PAGINACIÓN DE FACTURAS ===
📄 Página actual: 1 Total páginas: 17
✅ Facturas pendientes mostradas en tabla
El subproceso 30692 terminó con código 0 (0x0).
🧹 Recursos de sidebar usuarios limpiados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (40ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32), @p11='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 255), @p10='?' (DbType = Int32), @p17='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 255), @p16='?' (DbType = Int32), @p23='?' (DbType = Int32), @p18='?' (DbType = Boolean), @p19='?' (DbType = DateTime), @p20='?' (DbType = DateTime), @p21='?' (Size = 255), @p22='?' (DbType = Int32), @p29='?' (DbType = Int32), @p24='?' (DbType = Boolean), @p25='?' (DbType = DateTime), @p26='?' (DbType = DateTime), @p27='?' (Size = 255), @p28='?' (DbType = Int32), @p35='?' (DbType = Int32), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime), @p32='?' (DbType = DateTime), @p33='?' (Size = 255), @p34='?' (DbType = Int32), @p41='?' (DbType = Int32), @p36='?' (DbType = Boolean), @p37='?' (DbType = DateTime), @p38='?' (DbType = DateTime), @p39='?' (Size = 255), @p40='?' (DbType = Int32), @p47='?' (DbType = Int32), @p42='?' (DbType = Boolean), @p43='?' (DbType = DateTime), @p44='?' (DbType = DateTime), @p45='?' (Size = 255), @p46='?' (DbType = Int32), @p53='?' (DbType = Int32), @p48='?' (DbType = Boolean), @p49='?' (DbType = DateTime), @p50='?' (DbType = DateTime), @p51='?' (Size = 255), @p52='?' (DbType = Int32), @p59='?' (DbType = Int32), @p54='?' (DbType = Boolean), @p55='?' (DbType = DateTime), @p56='?' (DbType = DateTime), @p57='?' (Size = 255), @p58='?' (DbType = Int32), @p65='?' (DbType = Int32), @p60='?' (DbType = Boolean), @p61='?' (DbType = DateTime), @p62='?' (DbType = DateTime), @p63='?' (Size = 255), @p64='?' (DbType = Int32), @p71='?' (DbType = Int32), @p66='?' (DbType = Boolean), @p67='?' (DbType = DateTime), @p68='?' (DbType = DateTime), @p69='?' (Size = 255), @p70='?' (DbType = Int32), @p77='?' (DbType = Int32), @p72='?' (DbType = Boolean), @p73='?' (DbType = DateTime), @p74='?' (DbType = DateTime), @p75='?' (Size = 255), @p76='?' (DbType = Int32), @p83='?' (DbType = Int32), @p78='?' (DbType = Boolean), @p79='?' (DbType = DateTime), @p80='?' (DbType = DateTime), @p81='?' (Size = 255), @p82='?' (DbType = Int32), @p89='?' (DbType = Int32), @p84='?' (DbType = Boolean), @p85='?' (DbType = DateTime), @p86='?' (DbType = DateTime), @p87='?' (Size = 255), @p88='?' (DbType = Int32), @p95='?' (DbType = Int32), @p90='?' (DbType = Boolean), @p91='?' (DbType = DateTime), @p92='?' (DbType = DateTime), @p93='?' (Size = 255), @p94='?' (DbType = Int32), @p101='?' (DbType = Int32), @p96='?' (DbType = Boolean), @p97='?' (DbType = DateTime), @p98='?' (DbType = DateTime), @p99='?' (Size = 255), @p100='?' (DbType = Int32), @p107='?' (DbType = Int32), @p102='?' (DbType = Boolean), @p103='?' (DbType = DateTime), @p104='?' (DbType = DateTime), @p105='?' (Size = 255), @p106='?' (DbType = Int32), @p113='?' (DbType = Int32), @p108='?' (DbType = Boolean), @p109='?' (DbType = DateTime), @p110='?' (DbType = DateTime), @p111='?' (Size = 255), @p112='?' (DbType = Int32), @p119='?' (DbType = Int32), @p114='?' (DbType = Boolean), @p115='?' (DbType = DateTime), @p116='?' (DbType = DateTime), @p117='?' (Size = 255), @p118='?' (DbType = Int32), @p125='?' (DbType = Int32), @p120='?' (DbType = Boolean), @p121='?' (DbType = DateTime), @p122='?' (DbType = DateTime), @p123='?' (Size = 255), @p124='?' (DbType = Int32), @p131='?' (DbType = Int32), @p126='?' (DbType = Boolean), @p127='?' (DbType = DateTime), @p128='?' (DbType = DateTime), @p129='?' (Size = 255), @p130='?' (DbType = Int32), @p137='?' (DbType = Int32), @p132='?' (DbType = Boolean), @p133='?' (DbType = DateTime), @p134='?' (DbType = DateTime), @p135='?' (Size = 255), @p136='?' (DbType = Int32), @p143='?' (DbType = Int32), @p138='?' (DbType = Boolean), @p139='?' (DbType = DateTime), @p140='?' (DbType = DateTime), @p141='?' (Size = 255), @p142='?' (DbType = Int32), @p149='?' (DbType = Int32), @p144='?' (DbType = Boolean), @p145='?' (DbType = DateTime), @p146='?' (DbType = DateTime), @p147='?' (Size = 255), @p148='?' (DbType = Int32), @p155='?' (DbType = Int32), @p150='?' (DbType = Boolean), @p151='?' (DbType = DateTime), @p152='?' (DbType = DateTime), @p153='?' (Size = 255), @p154='?' (DbType = Int32), @p161='?' (DbType = Int32), @p156='?' (DbType = Boolean), @p157='?' (DbType = DateTime), @p158='?' (DbType = DateTime), @p159='?' (Size = 255), @p160='?' (DbType = Int32), @p167='?' (DbType = Int32), @p162='?' (DbType = Boolean), @p163='?' (DbType = DateTime), @p164='?' (DbType = DateTime), @p165='?' (Size = 255), @p166='?' (DbType = Int32), @p173='?' (DbType = Int32), @p168='?' (DbType = Boolean), @p169='?' (DbType = DateTime), @p170='?' (DbType = DateTime), @p171='?' (Size = 255), @p172='?' (DbType = Int32), @p179='?' (DbType = Int32), @p174='?' (DbType = Boolean), @p175='?' (DbType = DateTime), @p176='?' (DbType = DateTime), @p177='?' (Size = 255), @p178='?' (DbType = Int32), @p185='?' (DbType = Int32), @p180='?' (DbType = Boolean), @p181='?' (DbType = DateTime), @p182='?' (DbType = DateTime), @p183='?' (Size = 255), @p184='?' (DbType = Int32), @p191='?' (DbType = Int32), @p186='?' (DbType = Boolean), @p187='?' (DbType = DateTime), @p188='?' (DbType = DateTime), @p189='?' (Size = 255), @p190='?' (DbType = Int32), @p197='?' (DbType = Int32), @p192='?' (DbType = Boolean), @p193='?' (DbType = DateTime), @p194='?' (DbType = DateTime), @p195='?' (Size = 255), @p196='?' (DbType = Int32), @p203='?' (DbType = Int32), @p198='?' (DbType = Boolean), @p199='?' (DbType = DateTime), @p200='?' (DbType = DateTime), @p201='?' (Size = 255), @p202='?' (DbType = Int32), @p209='?' (DbType = Int32), @p204='?' (DbType = Boolean), @p205='?' (DbType = DateTime), @p206='?' (DbType = DateTime), @p207='?' (Size = 255), @p208='?' (DbType = Int32), @p215='?' (DbType = Int32), @p210='?' (DbType = Boolean), @p211='?' (DbType = DateTime), @p212='?' (DbType = DateTime), @p213='?' (Size = 255), @p214='?' (DbType = Int32), @p221='?' (DbType = Int32), @p216='?' (DbType = Boolean), @p217='?' (DbType = DateTime), @p218='?' (DbType = DateTime), @p219='?' (Size = 255), @p220='?' (DbType = Int32), @p227='?' (DbType = Int32), @p222='?' (DbType = Boolean), @p223='?' (DbType = DateTime), @p224='?' (DbType = DateTime), @p225='?' (Size = 255), @p226='?' (DbType = Int32), @p233='?' (DbType = Int32), @p228='?' (DbType = Boolean), @p229='?' (DbType = DateTime), @p230='?' (DbType = DateTime), @p231='?' (Size = 255), @p232='?' (DbType = Int32), @p239='?' (DbType = Int32), @p234='?' (DbType = Boolean), @p235='?' (DbType = DateTime), @p236='?' (DbType = DateTime), @p237='?' (Size = 255), @p238='?' (DbType = Int32), @p245='?' (DbType = Int32), @p240='?' (DbType = Boolean), @p241='?' (DbType = DateTime), @p242='?' (DbType = DateTime), @p243='?' (Size = 255), @p244='?' (DbType = Int32), @p251='?' (DbType = Int32), @p246='?' (DbType = Boolean), @p247='?' (DbType = DateTime), @p248='?' (DbType = DateTime), @p249='?' (Size = 255), @p250='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
UPDATE [SesionUsuario] SET [EstaActiva] = @p6, [FechaHoraInicio] = @p7, [FechaInvalidacion] = @p8, [TokenHash] = @p9, [UsuarioID] = @p10
OUTPUT 1
WHERE [SesionID] = @p11;
UPDATE [SesionUsuario] SET [EstaActiva] = @p12, [FechaHoraInicio] = @p13, [FechaInvalidacion] = @p14, [TokenHash] = @p15, [UsuarioID] = @p16
OUTPUT 1
WHERE [SesionID] = @p17;
UPDATE [SesionUsuario] SET [EstaActiva] = @p18, [FechaHoraInicio] = @p19, [FechaInvalidacion] = @p20, [TokenHash] = @p21, [UsuarioID] = @p22
OUTPUT 1
WHERE [SesionID] = @p23;
UPDATE [SesionUsuario] SET [EstaActiva] = @p24, [FechaHoraInicio] = @p25, [FechaInvalidacion] = @p26, [TokenHash] = @p27, [UsuarioID] = @p28
OUTPUT 1
WHERE [SesionID] = @p29;
UPDATE [SesionUsuario] SET [EstaActiva] = @p30, [FechaHoraInicio] = @p31, [FechaInvalidacion] = @p32, [TokenHash] = @p33, [UsuarioID] = @p34
OUTPUT 1
WHERE [SesionID] = @p35;
UPDATE [SesionUsuario] SET [EstaActiva] = @p36, [FechaHoraInicio] = @p37, [FechaInvalidacion] = @p38, [TokenHash] = @p39, [UsuarioID] = @p40
OUTPUT 1
WHERE [SesionID] = @p41;
UPDATE [SesionUsuario] SET [EstaActiva] = @p42, [FechaHoraInicio] = @p43, [FechaInvalidacion] = @p44, [TokenHash] = @p45, [UsuarioID] = @p46
OUTPUT 1
WHERE [SesionID] = @p47;
UPDATE [SesionUsuario] SET [EstaActiva] = @p48, [FechaHoraInicio] = @p49, [FechaInvalidacion] = @p50, [TokenHash] = @p51, [UsuarioID] = @p52
OUTPUT 1
WHERE [SesionID] = @p53;
UPDATE [SesionUsuario] SET [EstaActiva] = @p54, [FechaHoraInicio] = @p55, [FechaInvalidacion] = @p56, [TokenHash] = @p57, [UsuarioID] = @p58
OUTPUT 1
WHERE [SesionID] = @p59;
UPDATE [SesionUsuario] SET [EstaActiva] = @p60, [FechaHoraInicio] = @p61, [FechaInvalidacion] = @p62, [TokenHash] = @p63, [UsuarioID] = @p64
OUTPUT 1
WHERE [SesionID] = @p65;
UPDATE [SesionUsuario] SET [EstaActiva] = @p66, [FechaHoraInicio] = @p67, [FechaInvalidacion] = @p68, [TokenHash] = @p69, [UsuarioID] = @p70
OUTPUT 1
WHERE [SesionID] = @p71;
UPDATE [SesionUsuario] SET [EstaActiva] = @p72, [FechaHoraInicio] = @p73, [FechaInvalidacion] = @p74, [TokenHash] = @p75, [UsuarioID] = @p76
OUTPUT 1
WHERE [SesionID] = @p77;
UPDATE [SesionUsuario] SET [EstaActiva] = @p78, [FechaHoraInicio] = @p79, [FechaInvalidacion] = @p80, [TokenHash] = @p81, [UsuarioID] = @p82
OUTPUT 1
WHERE [SesionID] = @p83;
UPDATE [SesionUsuario] SET [EstaActiva] = @p84, [FechaHoraInicio] = @p85, [FechaInvalidacion] = @p86, [TokenHash] = @p87, [UsuarioID] = @p88
OUTPUT 1
WHERE [SesionID] = @p89;
UPDATE [SesionUsuario] SET [EstaActiva] = @p90, [FechaHoraInicio] = @p91, [FechaInvalidacion] = @p92, [TokenHash] = @p93, [UsuarioID] = @p94
OUTPUT 1
WHERE [SesionID] = @p95;
UPDATE [SesionUsuario] SET [EstaActiva] = @p96, [FechaHoraInicio] = @p97, [FechaInvalidacion] = @p98, [TokenHash] = @p99, [UsuarioID] = @p100
OUTPUT 1
WHERE [SesionID] = @p101;
UPDATE [SesionUsuario] SET [EstaActiva] = @p102, [FechaHoraInicio] = @p103, [FechaInvalidacion] = @p104, [TokenHash] = @p105, [UsuarioID] = @p106
OUTPUT 1
WHERE [SesionID] = @p107;
UPDATE [SesionUsuario] SET [EstaActiva] = @p108, [FechaHoraInicio] = @p109, [FechaInvalidacion] = @p110, [TokenHash] = @p111, [UsuarioID] = @p112
OUTPUT 1
WHERE [SesionID] = @p113;
UPDATE [SesionUsuario] SET [EstaActiva] = @p114, [FechaHoraInicio] = @p115, [FechaInvalidacion] = @p116, [TokenHash] = @p117, [UsuarioID] = @p118
OUTPUT 1
WHERE [SesionID] = @p119;
UPDATE [SesionUsuario] SET [EstaActiva] = @p120, [FechaHoraInicio] = @p121, [FechaInvalidacion] = @p122, [TokenHash] = @p123, [UsuarioID] = @p124
OUTPUT 1
WHERE [SesionID] = @p125;
UPDATE [SesionUsuario] SET [EstaActiva] = @p126, [FechaHoraInicio] = @p127, [FechaInvalidacion] = @p128, [TokenHash] = @p129, [UsuarioID] = @p130
OUTPUT 1
WHERE [SesionID] = @p131;
UPDATE [SesionUsuario] SET [EstaActiva] = @p132, [FechaHoraInicio] = @p133, [FechaInvalidacion] = @p134, [TokenHash] = @p135, [UsuarioID] = @p136
OUTPUT 1
WHERE [SesionID] = @p137;
UPDATE [SesionUsuario] SET [EstaActiva] = @p138, [FechaHoraInicio] = @p139, [FechaInvalidacion] = @p140, [TokenHash] = @p141, [UsuarioID] = @p142
OUTPUT 1
WHERE [SesionID] = @p143;
UPDATE [SesionUsuario] SET [EstaActiva] = @p144, [FechaHoraInicio] = @p145, [FechaInvalidacion] = @p146, [TokenHash] = @p147, [UsuarioID] = @p148
OUTPUT 1
WHERE [SesionID] = @p149;
UPDATE [SesionUsuario] SET [EstaActiva] = @p150, [FechaHoraInicio] = @p151, [FechaInvalidacion] = @p152, [TokenHash] = @p153, [UsuarioID] = @p154
OUTPUT 1
WHERE [SesionID] = @p155;
UPDATE [SesionUsuario] SET [EstaActiva] = @p156, [FechaHoraInicio] = @p157, [FechaInvalidacion] = @p158, [TokenHash] = @p159, [UsuarioID] = @p160
OUTPUT 1
WHERE [SesionID] = @p161;
UPDATE [SesionUsuario] SET [EstaActiva] = @p162, [FechaHoraInicio] = @p163, [FechaInvalidacion] = @p164, [TokenHash] = @p165, [UsuarioID] = @p166
OUTPUT 1
WHERE [SesionID] = @p167;
UPDATE [SesionUsuario] SET [EstaActiva] = @p168, [FechaHoraInicio] = @p169, [FechaInvalidacion] = @p170, [TokenHash] = @p171, [UsuarioID] = @p172
OUTPUT 1
WHERE [SesionID] = @p173;
UPDATE [SesionUsuario] SET [EstaActiva] = @p174, [FechaHoraInicio] = @p175, [FechaInvalidacion] = @p176, [TokenHash] = @p177, [UsuarioID] = @p178
OUTPUT 1
WHERE [SesionID] = @p179;
UPDATE [SesionUsuario] SET [EstaActiva] = @p180, [FechaHoraInicio] = @p181, [FechaInvalidacion] = @p182, [TokenHash] = @p183, [UsuarioID] = @p184
OUTPUT 1
WHERE [SesionID] = @p185;
UPDATE [SesionUsuario] SET [EstaActiva] = @p186, [FechaHoraInicio] = @p187, [FechaInvalidacion] = @p188, [TokenHash] = @p189, [UsuarioID] = @p190
OUTPUT 1
WHERE [SesionID] = @p191;
UPDATE [SesionUsuario] SET [EstaActiva] = @p192, [FechaHoraInicio] = @p193, [FechaInvalidacion] = @p194, [TokenHash] = @p195, [UsuarioID] = @p196
OUTPUT 1
WHERE [SesionID] = @p197;
UPDATE [SesionUsuario] SET [EstaActiva] = @p198, [FechaHoraInicio] = @p199, [FechaInvalidacion] = @p200, [TokenHash] = @p201, [UsuarioID] = @p202
OUTPUT 1
WHERE [SesionID] = @p203;
UPDATE [SesionUsuario] SET [EstaActiva] = @p204, [FechaHoraInicio] = @p205, [FechaInvalidacion] = @p206, [TokenHash] = @p207, [UsuarioID] = @p208
OUTPUT 1
WHERE [SesionID] = @p209;
UPDATE [SesionUsuario] SET [EstaActiva] = @p210, [FechaHoraInicio] = @p211, [FechaInvalidacion] = @p212, [TokenHash] = @p213, [UsuarioID] = @p214
OUTPUT 1
WHERE [SesionID] = @p215;
UPDATE [SesionUsuario] SET [EstaActiva] = @p216, [FechaHoraInicio] = @p217, [FechaInvalidacion] = @p218, [TokenHash] = @p219, [UsuarioID] = @p220
OUTPUT 1
WHERE [SesionID] = @p221;
UPDATE [SesionUsuario] SET [EstaActiva] = @p222, [FechaHoraInicio] = @p223, [FechaInvalidacion] = @p224, [TokenHash] = @p225, [UsuarioID] = @p226
OUTPUT 1
WHERE [SesionID] = @p227;
UPDATE [SesionUsuario] SET [EstaActiva] = @p228, [FechaHoraInicio] = @p229, [FechaInvalidacion] = @p230, [TokenHash] = @p231, [UsuarioID] = @p232
OUTPUT 1
WHERE [SesionID] = @p233;
UPDATE [SesionUsuario] SET [EstaActiva] = @p234, [FechaHoraInicio] = @p235, [FechaInvalidacion] = @p236, [TokenHash] = @p237, [UsuarioID] = @p238
OUTPUT 1
WHERE [SesionID] = @p239;
UPDATE [SesionUsuario] SET [EstaActiva] = @p240, [FechaHoraInicio] = @p241, [FechaInvalidacion] = @p242, [TokenHash] = @p243, [UsuarioID] = @p244
OUTPUT 1
WHERE [SesionID] = @p245;
UPDATE [SesionUsuario] SET [EstaActiva] = @p246, [FechaHoraInicio] = @p247, [FechaInvalidacion] = @p248, [TokenHash] = @p249, [UsuarioID] = @p250
OUTPUT 1
WHERE [SesionID] = @p251;
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32), @p11='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTime), @p8='?' (DbType = DateTime), @p9='?' (Size = 255), @p10='?' (DbType = Int32), @p17='?' (DbType = Int32), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime), @p14='?' (DbType = DateTime), @p15='?' (Size = 255), @p16='?' (DbType = Int32), @p23='?' (DbType = Int32), @p18='?' (DbType = Boolean), @p19='?' (DbType = DateTime), @p20='?' (DbType = DateTime), @p21='?' (Size = 255), @p22='?' (DbType = Int32), @p29='?' (DbType = Int32), @p24='?' (DbType = Boolean), @p25='?' (DbType = DateTime), @p26='?' (DbType = DateTime), @p27='?' (Size = 255), @p28='?' (DbType = Int32), @p35='?' (DbType = Int32), @p30='?' (DbType = Boolean), @p31='?' (DbType = DateTime), @p32='?' (DbType = DateTime), @p33='?' (Size = 255), @p34='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
UPDATE [SesionUsuario] SET [EstaActiva] = @p6, [FechaHoraInicio] = @p7, [FechaInvalidacion] = @p8, [TokenHash] = @p9, [UsuarioID] = @p10
OUTPUT 1
WHERE [SesionID] = @p11;
UPDATE [SesionUsuario] SET [EstaActiva] = @p12, [FechaHoraInicio] = @p13, [FechaInvalidacion] = @p14, [TokenHash] = @p15, [UsuarioID] = @p16
OUTPUT 1
WHERE [SesionID] = @p17;
UPDATE [SesionUsuario] SET [EstaActiva] = @p18, [FechaHoraInicio] = @p19, [FechaInvalidacion] = @p20, [TokenHash] = @p21, [UsuarioID] = @p22
OUTPUT 1
WHERE [SesionID] = @p23;
UPDATE [SesionUsuario] SET [EstaActiva] = @p24, [FechaHoraInicio] = @p25, [FechaInvalidacion] = @p26, [TokenHash] = @p27, [UsuarioID] = @p28
OUTPUT 1
WHERE [SesionID] = @p29;
UPDATE [SesionUsuario] SET [EstaActiva] = @p30, [FechaHoraInicio] = @p31, [FechaInvalidacion] = @p32, [TokenHash] = @p33, [UsuarioID] = @p34
OUTPUT 1
WHERE [SesionID] = @p35;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 4. Total: 48
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 84.7639ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 87.6457ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
El subproceso '.NET ThreadPool Worker' (9844) terminó con código 0 (0x0).
GestionLlantera.Web.Services.AuthService: Information: 🌐 URL construida: https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[EsTopVendedor], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Colaborador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario umongegds@gmail.com (ID: 1)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 202.8571ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 205.3989ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: umongegds@gmail.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Cargando página principal del dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 👤 ID del usuario actual: 1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Crear%20Anuncios
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Crear%20Anuncios
PermisosController: Information: 🔍 Verificando permiso Crear Anuncios para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Crear Anuncios'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Crear Anuncios'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__userId_Value_0
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: 🔍 No encontrado en caché, consultando base de datos...
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
INNER JOIN [RolPermisos] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r0].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioId] = @__userId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__userId_0
API.ServicesAPI.PermisosService: Information: Usuario 1 tiene 15 permisos: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
API.ServicesAPI.PermisosService: Information: ✅ Permisos del usuario 1 cargados en caché
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Crear Anuncios': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Crear Anuncios'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 29.6127ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 32.2269ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Ver Facturación para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Facturación': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.7707ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.2303ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Productos
PermisosController: Information: 🔍 Verificando permiso Ver Productos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Productos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Productos': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Ver Productos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.6122ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.9378ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Entregar%20Pendientes
PermisosController: Information: 🔍 Verificando permiso Entregar Pendientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Entregar Pendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Entregar Pendientes': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Entregar Pendientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.3319ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.608ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Clientes
PermisosController: Information: 🔍 Verificando permiso Ver Clientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Clientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 16.0476ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.4505ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Ver%20Reportes
PermisosController: Information: 🔍 Verificando permiso Ver Reportes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Reportes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.6549ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.979ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Configuracion%20Sistema
PermisosController: Information: 🔍 Verificando permiso Configuracion Sistema para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Configuracion Sistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Configuracion Sistema': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Configuracion Sistema'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.6054ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.6668ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Inventario
PermisosController: Information: 🔍 Verificando permiso Menu_Inventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Inventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Inventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Menu_Inventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.4497ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.8141ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_VerProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_VerProductos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_VerProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_VerProductos': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_VerProductos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.5646ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.9979ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_AgregarProductos
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_AgregarProductos para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_AgregarProductos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_AgregarProductos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Sub_Menu_AgregarProductos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.9824ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.6347ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_ProgramarInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_ProgramarInventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_ProgramarInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_ProgramarInventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_ProgramarInventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.2853ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.5316ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_HistorialInventario
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_HistorialInventario para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_HistorialInventario'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_HistorialInventario': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_HistorialInventario'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.1639ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.5293ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Ventas
PermisosController: Information: 🔍 Verificando permiso Menu_Ventas para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Ventas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Ventas': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Menu_Ventas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.0549ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.6713ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Clientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Clientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Clientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_Clientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Sub_Menu_Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.6962ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.3232ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_Facturaci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_Facturación para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_Facturación': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.0986ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.4736ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Sub_Menu_EntregasPendientes
PermisosController: Information: 🔍 Verificando permiso Sub_Menu_EntregasPendientes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Sub_Menu_EntregasPendientes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Sub_Menu_EntregasPendientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Sub_Menu_EntregasPendientes': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Sub_Menu_EntregasPendientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.0877ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.4081ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Proveedores
PermisosController: Information: 🔍 Verificando permiso Menu_Proveedores para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Proveedores'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Proveedores': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Proveedores'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.6878ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.875ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Reportes
PermisosController: Information: 🔍 Verificando permiso Menu_Reportes para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Reportes'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Reportes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Reportes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.3586ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.7222ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_Configuraci%C3%B3n
PermisosController: Information: 🔍 Verificando permiso Menu_Configuración para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_Configuración'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_Configuración': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_Configuración'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.2523ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.4335ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistemaDEV
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistemaDEV para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistemaDEV'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_HerramientasSistemaDEV': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_HerramientasSistemaDEV'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 15.953ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 18.2293ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 24.9831ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 27.3992ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 20.698ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 22.9067ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 21.2887ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 23.7752ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 19.5875ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 21.7226ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/verificar/Menu_HerramientasSistema
PermisosController: Information: 🔍 Verificando permiso Menu_HerramientasSistema para usuario Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Menu_HerramientasSistema'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Menu_HerramientasSistema': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Menu_HerramientasSistema'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.8734ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 17.0555ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
📊 Módulo Dashboard cargado correctamente
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Dashboard cargado exitosamente
✅ Evento de formulario de nueva nota configurado
✅ Evento de formulario de nuevo anuncio configurado
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 24.2882ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 27.2592ms - 200
📊 Dashboard - Inicializando módulo principal
📊 Cargando alertas de stock...
📊 Cargando estadísticas de inventario total...
🏆 Cargando información del top vendedor...
👥 Cargando información de usuarios conectados...
📝 Cargando notas rápidas...
📢 Cargando anuncios del sistema...
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
GestionLlantera.Web.Services.AnunciosService: Information: Obteniendo anuncios desde la API
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando top vendedor desde dashboard service
GestionLlantera.Web.Services.AnunciosService: Information: 🌐 URL construida: https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener top vendedor
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/top-vendedor
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Anuncios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
API.Controllers.AnunciosController: Information: 🔔 === OBTENIENDO ANUNCIOS ===
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo estadísticas de inventario total para dashboard
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando estadísticas de inventario total desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener inventario total
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando alertas de stock desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener alertas de stock
GestionLlantera.Web.Services.NotasRapidasService: Information: 🔧 NotasRapidasService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/alertas-stock
GestionLlantera.Web.Services.NotasRapidasService: Information: Obteniendo notas para usuario: 1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
GestionLlantera.Web.Services.NotasRapidasService: Information: 🌐 URL construida: https://localhost:7273/api/notasrapidas/usuario/1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/notasrapidas/usuario/1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/notasrapidas/usuario/1
API.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[AnuncioId], [a].[UsuarioCreadorId], [u].[NombreUsuario] AS [NombreCreador], [a].[Titulo], [a].[Contenido], [a].[TipoAnuncio], [a].[Prioridad], [a].[EsImportante], [a].[Activo], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaVencimiento]
FROM [Anuncios] AS [a]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [a].[Activo] = CAST(1 AS bit)
ORDER BY [a].[EsImportante] DESC, [a].[FechaCreacion] DESC
API.Controllers.NotasRapidasController: Information: Obteniendo notas para usuario: 1
API.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
API.Controllers.AnunciosController: Information: ✅ Se encontraron 1 anuncios
API.Controllers.DashboardController: Information: 📊 Obteniendo resumen de inventario total para dashboard
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 47.6109ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 51.2936ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__fechaInicio_0='?' (DbType = DateTime2), @__fechaFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [f].[UsuarioCreadorId] AS [UsuarioId], [u].[NombreUsuario] AS [NombreVendedor], COUNT(*) AS [TotalVentas], COALESCE(SUM([f].[Total]), 0.0) AS [MontoTotal], AVG([f].[Total]) AS [PromedioVenta]
FROM [Facturas] AS [f]
INNER JOIN [Usuarios] AS [u] ON [f].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [f].[FechaFactura] >= @__fechaInicio_0 AND [f].[FechaFactura] <= @__fechaFin_1 AND [u].[EsTopVendedor] = CAST(1 AS bit)
GROUP BY [f].[UsuarioCreadorId], [u].[NombreUsuario]
ORDER BY COUNT(*) DESC, COALESCE(SUM([f].[Total]), 0.0) DESC
GestionLlantera.Web.Services.AnunciosService: Information: Respuesta de anuncios recibida: {"success":true,"anuncios":[{"anuncioId":6,"usuarioCreadorId":4,"nombreCreador":"Julissa Mejias","titulo":"Nota de Prueba","contenido":"Hay que limpiar hoy","tipoAnuncio":"Mantenimiento","prioridad":"Normal","esImportante":true,"activo":true,"fechaCreacion":"2025-08-06T21:44:12.386021","fechaModificacion":null,"fechaVencimiento":"2025-08-07T00:00:00","estaVencido":true}]}
GestionLlantera.Web.Services.AnunciosService: Information: ✅ 1 anuncios obtenidos correctamente
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [n].[NotaId], [n].[UsuarioId], [n].[Titulo], [n].[Contenido], [n].[Color], [n].[EsFavorita], [n].[FechaCreacion], [n].[FechaModificacion]
FROM [NotasRapidas] AS [n]
WHERE [n].[UsuarioId] = @__usuarioId_0 AND [n].[Eliminada] = CAST(0 AS bit)
ORDER BY [n].[EsFavorita] DESC, [n].[FechaModificacion] DESC
📢 Mostrando anuncios: (1) [{…}]
API.Controllers.DashboardController: Information: 📊 Top vendedor: Ulises Monge Aguilar con 10 ventas por ₡2,959,272
👤 UserId obtenido desde meta tag: 1
🔍 Verificando permisos anuncio: {anuncioId: 6, usuarioCreadorId: 4, currentUserId: 1, esCreador: false}
✅ Anuncios mostrados correctamente
✅ Anuncios cargados correctamente: (1) [{…}]
El subproceso 34772 terminó con código 0 (0x0).
El subproceso 12852 terminó con código 0 (0x0).
El subproceso 11060 terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[StockMinimo] - [p].[CantidadEnInventario] AS [Diferencia]
FROM [Productos] AS [p]
WHERE [p].[CantidadEnInventario] <= [p].[StockMinimo]
ORDER BY [p].[CantidadEnInventario]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) COUNT(*) AS [TotalProductos], COALESCE(SUM([t].[CantidadEnInventario]), 0) AS [TotalCantidad], COALESCE(SUM(CAST([t].[CantidadEnInventario] AS decimal(10,2)) * [t].[Precio]), 0.0) AS [ValorTotalInventario], COUNT(CASE
    WHEN [t].[CantidadEnInventario] > 0 THEN 1
END) AS [ProductosActivos], COUNT(CASE
    WHEN [t].[CantidadEnInventario] = 0 THEN 1
END) AS [ProductosAgotados]
FROM (
    SELECT [p].[CantidadEnInventario], [p].[Precio], 1 AS [Key]
    FROM [Productos] AS [p]
) AS [t]
GROUP BY [t].[Key]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 61.5305ms - 200
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 65.576ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 40.8269ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 44.9292ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 59.2761ms - 200
API.Controllers.DashboardController: Information: 📊 Alertas encontradas: 8 total, 7 agotados, 1 críticos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 63.7039ms - 200
API.Controllers.DashboardController: Information: 📊 Inventario total: ₡951,400, 11 productos, 27 unidades
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 48.2426ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 52.1923ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","ultimaSesion":"2025-08-13T23:42:56.58","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 55.9667ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta recibida: {"success":true,"totalAlertas":8,"productosAgotados":7,"productosCriticos":1,"productos":[{"productoId":20,"nombreProducto":"Llanta Agregar Marca Agrega Modelo","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1016,"nombreProducto":"Llanta Kumho Mobile","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1017,"nombreProducto":"Llanta Test","cantidadEnInventario":0,"stockMinimo":2,"diferencia":2},{"productoId":1018,"nombreProducto":"Llanta Firestone Extreme","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1021,"nombreProducto":"Llanta Kumho Miller","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1022,"nombreProducto":"Producto Ordenando URL API","cantidadEnInventario":0,"stockMinimo":1,"diferencia":1},{"productoId":1023,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1024,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":5,"stockMinimo":5,"diferencia":0}],"mensaje":"Productos requieren atención"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Alertas de stock obtenidas correctamente
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 63.6259ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de top vendedor recibida: {"success":true,"vendedor":"Ulises Monge Aguilar","totalVentas":10,"montoTotal":2959272.10,"promedioVenta":295927.210000,"mensaje":"Ulises Monge Aguilar lidera con 10 ventas"}
📝 Mostrando notas rápidas: (2) [{…}, {…}]
✅ Notas rápidas mostradas correctamente
✅ Notas rápidas cargadas correctamente: (2) [{…}, {…}]
👥 Mostrando datos de usuarios conectados: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
✅ Panel de usuarios conectados (bottom) actualizado
⚠️ Botón de usuarios conectados del sidebar no encontrado
✅ Usuarios conectados mostrados correctamente
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de inventario total recibida: {"success":true,"valorTotal":951400.0000,"totalProductos":11,"totalCantidad":27,"productosActivos":4,"productosAgotados":7,"mensaje":"11 productos en inventario"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Top vendedor obtenido correctamente
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Estadísticas de inventario total obtenidas correctamente
✅ Usuarios conectados cargados correctamente: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
📡 Respuesta del servidor: 200
✅ Datos de alertas recibidos: {success: true, data: {…}}
📊 Actualizando vista con datos: {success: true, totalAlertas: 8, productosAgotados: 7, productosCriticos: 1, productos: Array(8), …}
✅ Vista de alertas de stock actualizada correctamente
🏆 Mostrando datos del top vendedor: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 10, montoTotal: 2959272.1, promedioVenta: 295927.21, …}
✅ Top vendedor mostrado correctamente
✅ Top vendedor cargado correctamente: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 10, montoTotal: 2959272.1, promedioVenta: 295927.21, …}
📡 Respuesta del servidor (inventario): 200
✅ Datos de inventario total recibidos: {success: true, data: {…}}
📊 Actualizando tarjeta de inventario total: {success: true, valorTotal: 951400, totalProductos: 11, totalCantidad: 27, productosActivos: 4, …}
✅ Valor total actualizado: ₡951 400
✅ Detalle actualizado: 11 (27 unidades)
📊 Inicializando eventos de formularios...
🔄 Configurando refresco automático...
✅ Dashboard inicializado correctamente
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.2374ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.6289ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","ultimaSesion":"2025-08-13T23:42:56.58","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
⚠️ Botón de usuarios conectados del sidebar no encontrado
✅ Panel de usuarios conectados (sidebar) actualizado
🧹 Recursos de sidebar usuarios limpiados
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 === ACCESO AL MÓDULO DE FACTURACIÓN ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Usuario autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Nombre de usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔍 Obteniendo información del usuario...
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Claims disponibles:
GestionLlantera.Web.Controllers.FacturacionController: Information:    - JwtToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIkluaWNpYXIgSW52ZW50YXJpbyIsIlZlciBGYWN0dXJhY2nDs24iLCJWZXIgUHJvZHVjdG9zIiwiRWRpdGFyRmFjdHVyYXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIiwiTWVudV9JbnZlbnRhcmlvIiwiU3ViX01lbnVfVmVyUHJvZHVjdG9zIiwiU3ViX01lbnVfUHJvZ3JhbWFySW52ZW50YXJpbyIsIlN1Yl9NZW51X0hpc3RvcmlhbEludmVudGFyaW8iLCJNZW51X1ZlbnRhcyIsIlN1Yl9NZW51X0ZhY3R1cmFjacOzbiIsIlN1Yl9NZW51X0VudHJlZ2FzUGVuZGllbnRlcyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiLCJWZXIgRGV0YWxsZSBQcm9kdWN0byJdLCJleHAiOjE3NTUxNTM3NzYsImlzcyI6IlR1Y28uQVBJIiwiYXVkIjoiVHVjby5DbGllbnQifQ.EdfuQv4sW2wExcubqYTcKv_U1o0XmmSuW37WjfV3RZU
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: umongegds@gmail.com
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 1
GestionLlantera.Web.Controllers.FacturacionController: Information:    - userId: 1
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Colaborador
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Facturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Iniciar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: EditarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Menu_Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_VerProductos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_HistorialInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Menu_Ventas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_EntregasPendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Historial Inventarios
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Detalle Producto
GestionLlantera.Web.Controllers.FacturacionController: Information:    - exp: 1755153776
GestionLlantera.Web.Controllers.FacturacionController: Information:    - iss: Tuco.API
GestionLlantera.Web.Controllers.FacturacionController: Information:    - aud: Tuco.Client
GestionLlantera.Web.Controllers.FacturacionController: Information: NameIdentifier claim: 1
GestionLlantera.Web.Controllers.FacturacionController: Information: Name claim: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information: Email claim: umongegds@gmail.com
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ ID parseado de NameIdentifier: 1
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === VERIFICANDO PERMISOS DIRECTAMENTE DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos extraídos del token: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos encontrados en token: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 1.2739ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 3.7749ms - 200
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === PERMISOS VALIDADOS DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCrearFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCompletarFacturas: False
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeEditarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeAnularFacturas: False
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 esAdmin: False
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Configuración enviada al frontend: {"Usuario":{"usuarioId":1,"id":1,"nombre":"Ulises Monge Aguilar","nombreUsuario":"Ulises Monge Aguilar","email":"umongegds@gmail.com"},"Permisos":{"puedeCrearFacturas":true,"puedeCompletarFacturas":false,"puedeEditarFacturas":true,"puedeAnularFacturas":false,"esAdmin":false},"FechaActual":"2025-08-13","HoraActual":"23:42","TokenDisponible":true}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 24.4561ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 27.0911ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 23.9006ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 26.4585ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 25.688ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 28.4949ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 24.4331ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 27.3297ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
🖨️ Módulo de impresión térmica cargado correctamente
✅ Sistema de zoom simplificado cargado
📋 Funciones de proformas y detalles exportadas globalmente
📋 Funciones de facturas pendientes exportadas globalmente
📋 Módulo de filtros de proformas (Frontend) cargado correctamente
✅ verDetalleProducto disponible desde facturacion.js
📦 Módulo InventarioFacturacion.js cargado correctamente
🎯 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🎯 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:42', tokenDisponible: true}
❌ No se encontraron permisos en la configuración
🔧 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🔧 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:42', tokenDisponible: true}
🔧 Usuario disponible: undefined
🔧 Permisos disponibles: undefined
🔧 Token disponible: undefined
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Inicializando módulo de facturación
🚀 === INICIO inicializarFacturacion ===
🔐 Cargando permisos del usuario...
🔍 === INICIANDO CARGA DE PERMISOS EN FACTURACIÓN ===
🔍 Configuración recibida: {
  "usuario": {
    "usuarioId": 1,
    "id": 1,
    "nombre": "Ulises Monge Aguilar",
    "nombreUsuario": "Ulises Monge Aguilar",
    "email": "umongegds@gmail.com"
  },
  "permisos": {
    "puedeCrearFacturas": true,
    "puedeCompletarFacturas": false,
    "puedeEditarFacturas": true,
    "puedeAnularFacturas": false,
    "esAdmin": false
  },
  "fechaActual": "2025-08-13",
  "horaActual": "23:42",
  "tokenDisponible": true
}
🔐 === PERMISOS CARGADOS CORRECTAMENTE ===
🔐 puedeCrearFacturas: true
🔐 puedeCompletarFacturas: false
🔐 puedeEditarFacturas: true
🔐 puedeAnularFacturas: false
🔐 esAdmin: false
🎯 === CONFIGURANDO INTERFAZ SEGÚN PERMISOS ===
🎯 Permisos actuales del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: false, puedeEditarFacturas: true, puedeAnularFacturas: false, esAdmin: false}
🎯 puedeCompletarFacturas: false (tipo: boolean )
🎯 puedeCrearFacturas: true (tipo: boolean )
🎯 Evaluación de permisos:
🎯   - puedeCompletar (CompletarFacturas): false
🎯   - puedeCrear (CrearFacturas): true
📝 === INTERFAZ CONFIGURADA: COLABORADOR ===
📝 Botón: Amarillo - "Enviar Factura"
📝 Flujo: Factura pendiente SIN ajuste de stock
📋 Botón Facturas Pendientes oculto - usuario sin permisos de completar
🚀 Inicializando modales...
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
🚀 Configurando eventos...
🚀 Actualizando totales...
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
🚀 Iniciando carga de productos iniciales...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 1
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
✅ Facturación inicializada correctamente
🚀 === FIN inicializarFacturacion ===
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153776
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.InventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerCostos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerUtilidades': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Ulises Monge Aguilar - VerCostos: False, VerUtilidades: False
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 40.1995ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 43.673ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 84.1334ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 87.334ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10152 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 2, Es Llanta: False)
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn w-100 btn-warning btn-outline-secondary
🎯 Deshabilitado: true
🎯 Texto: Enviar Factura
🎯 Título: Agrega productos y selecciona un cliente
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 1
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19208 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.5845ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.3553ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","ultimaSesion":"2025-08-13T23:42:56.58","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
⚠️ Botón de usuarios conectados del sidebar no encontrado
✅ Panel de usuarios conectados (sidebar) actualizado
🖼️ Procesando imágenes para modal de producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ URL original en modal: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final en modal: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🛒 === INICIO AGREGAR PRODUCTO ===
🛒 Producto: Prueba de Stock 3 Despues de eliminar imagen
🛒 Cantidad: 1
🛒 Precio base: 120000
🛒 Stock disponible: 2
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: false}
✅ Producto agregado exitosamente
🛒 === FIN AGREGAR PRODUCTO ===
🧹 Limpiando eventos del modal de producto
El subproceso 10508 terminó con código 0 (0x0).
👥 Buscando clientes: "ju"
GestionLlantera.Web.Services.ClientesService: Information: 🔐 Token JWT configurado para buscar clientes
GestionLlantera.Web.Services.ClientesService: Information: 🌐 URL construida: https://localhost:7273/api/Clientes/buscar?termino=ju
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Clientes/buscar?termino=ju
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Clientes/buscar?termino=ju
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Clientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Facturación': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
API.Controllers.ClientesController: Information: 🔍 Buscando clientes con término: ju
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__termino_0='?' (Size = 100) (DbType = AnsiString), @__termino_0_1='?' (Size = 15) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [c].[ClienteID], [c].[Contacto], [c].[Direccion], [c].[Email], [c].[NombreCliente], [c].[Telefono], [c].[UsuarioID]
FROM [Clientes] AS [c]
WHERE (@__termino_0 LIKE '') OR CHARINDEX(@__termino_0, [c].[NombreCliente]) > 0 OR (([c].[Email] IS NOT NULL) AND ((@__termino_0 LIKE '') OR CHARINDEX(@__termino_0, [c].[Email]) > 0)) OR (([c].[Telefono] IS NOT NULL) AND ((@__termino_0_1 LIKE '') OR CHARINDEX(@__termino_0_1, [c].[Telefono]) > 0)) OR (([c].[Contacto] IS NOT NULL) AND ((@__termino_0 LIKE '') OR CHARINDEX(@__termino_0, [c].[Contacto]) > 0))
ORDER BY [c].[NombreCliente]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 50.2071ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 52.9581ms - 200
GestionLlantera.Web.Services.ClientesService: Information: 🔍 Búsqueda de clientes completada: 391 caracteres
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: true, puedeFinalizarVenta: true, disabled: false, limpiarDisabled: false}
Cliente seleccionado: {id: 13, nombre: 'Juan Perez', email: 'alexis@firestone.cr', telefono: '+506 62828588', contacto: '3-0435-0539', …}
📋 === DEPURACIÓN CLIENTE SELECCIONADO ===
📋 Cliente completo: {id: 13, nombre: 'Juan Perez', email: 'alexis@firestone.cr', telefono: '+506 62828588', contacto: '3-0435-0539', …}
📋 Propiedades disponibles: (7) ['id', 'nombre', 'email', 'telefono', 'contacto', 'identificacion', 'direccion']
📋 Factura pendiente actual: null
📋 Proforma original para conversión: undefined
📋 Ocultando información especial
🎯 === CONFIGURANDO MODAL SEGÚN PERMISOS ===
🎯 Permisos del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: false, puedeEditarFacturas: true, puedeAnularFacturas: false, esAdmin: false}
🎯 puedeCompletarFacturas: false
🎯 puedeCrearFacturas: true
🎯 esAdmin: false
🎯 Es conversión de proforma: false
🎯 Es factura pendiente: false
🎯 Botón de proforma mostrado - No es factura pendiente
📝 Modal configurado para colaborador - Envío a caja SIN ajuste de stock
📋 Datos mapeados para formulario: {nombre: 'Juan Perez', cedula: '3-0435-0539', telefono: '+506 62828588', email: 'alexis@firestone.cr', direccion: 'cartago'}
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn btn-warning
🎯 Deshabilitado: false
🎯 Texto: 
                    
                    Enviar a Caja
                
🎯 Título: Crear factura pendiente y enviar a caja para procesamiento de pago (sin ajuste de stock)
🎯 Botón Proforma Visible: false
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
🔍 === PROCESANDO VENTA FINAL ===
🔍 Es pago múltiple: false
🔍 Detalles de pago actuales: (0) []
🔍 Es factura pendiente: false
🔍 Factura ID: null
🆕 Creando nueva factura
🆕 === CREANDO NUEVO DOCUMENTO ===
🆕 Tipo de documento: Factura
🆕 Es conversión de proforma: false
🔐 === VERIFICACIÓN DE PERMISOS ===
🔐 puedeCompletarFacturas: false
🔐 puedeCrearFacturas: true
🔐 tipoDocumento: Factura
📝 Procesando como colaborador - Factura pendiente para caja SIN ajuste de stock
📋 Estado determinado: {tipoDocumento: 'Factura', estadoFactura: 'Pendiente', fechaVencimiento: null, debeImprimir: false, debeAjustarInventario: false, …}
👤 === OBTENIENDO USUARIO ACTUAL EN FACTURACIÓN ===
👤 facturaConfig disponible: true
👤 Usuario encontrado en facturaConfig: {usuarioId: 1, id: 1, nombre: 'Ulises Monge Aguilar', nombreUsuario: 'Ulises Monge Aguilar', email: 'umongegds@gmail.com'}
👤 Tipo de usuario obtenido: object
👤 Propiedades del usuario: (5) ['usuarioId', 'id', 'nombre', 'nombreUsuario', 'email']
👤 ID de usuario: 1
👤 Nombre de usuario: Ulises Monge Aguilar
👤 Usuario actual para documento: {usuario: {…}, usuarioId: 1}
📋 Datos de documento preparados: {clienteId: 13, nombreCliente: 'Juan Perez', identificacionCliente: '3-0435-0539', telefonoCliente: '+506 62828588', emailCliente: 'alexis@firestone.cr', …}
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🧾 === INICIO CrearFactura ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🧾 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information: 🧾 Autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Controllers.FacturacionController: Information: 🚀 Enviando factura usando servicio: Juan Perez
GestionLlantera.Web.Controllers.FacturacionController: Information: 📊 Total productos: 1, Total: 135600
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Token JWT disponible: 1075 caracteres
GestionLlantera.Web.Services.FacturacionService: Information: 🧾 Creando factura usando servicio de facturación
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Factura recibida para procesamiento: {"FacturaId":0,"NumeroFactura":"","ClienteId":13,"NombreCliente":"Juan Perez","IdentificacionCliente":"3-0435-0539","TelefonoCliente":"+506 62828588","EmailCliente":"alexis@firestone.cr","DireccionCliente":"cartago","FechaFactura":"2025-08-14T05:43:11.567Z","FechaVencimiento":null,"Subtotal":120000.0,"DescuentoGeneral":0.0,"PorcentajeImpuesto":13.0,"MontoImpuesto":15600.0,"Total":135600.0,"Estado":"Pendiente","TipoDocumento":"Factura","MetodoPago":"efectivo","DetallesPago":[],"EsPagoMultiple":false,"Observaciones":"","UsuarioCreadorId":1,"UsuarioCreadorNombre":null,"FechaCreacion":"0001-01-01T00:00:00","FechaActualizacion":null,"DetallesFactura":[{"DetalleFacturaId":0,"FacturaId":0,"ProductoId":17,"NombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","DescripcionProducto":"","Cantidad":1,"PrecioUnitario":120000.0,"PorcentajeDescuento":0.0,"MontoDescuento":0.0,"Subtotal":120000.0,"StockDisponible":0,"EsLlanta":false,"MedidaLlanta":null,"MarcaLlanta":null,"ModeloLlanta":null,"SubtotalSinDescuento":120000.0,"DescuentoCalculado":0.0,"SubtotalConDescuento":120000.0,"TieneDescuento":false,"StockSuficiente":false}],"SubtotalSinDescuento":120000.0,"MontoDescuentoTotal":0.0,"SubtotalConDescuento":120000.0,"ImpuestoCalculado":15600.0,"TotalCalculado":135600.0,"CantidadItems":1,"EsProforma":false}
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Propiedades de la factura recibida:
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FacturaId: 0
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   NumeroFactura: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   ClienteId: 13
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   NombreCliente: Juan Perez
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   IdentificacionCliente: 3-0435-0539
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   TelefonoCliente: +506 62828588
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   EmailCliente: alexis@firestone.cr
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DireccionCliente: cartago
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaFactura: 8/14/2025 5:43:11 AM
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaVencimiento: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Subtotal: 120000
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DescuentoGeneral: 0
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   PorcentajeImpuesto: 13
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   MontoImpuesto: 15600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Total: 135600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Estado: Pendiente
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   TipoDocumento: Factura
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   MetodoPago: efectivo
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DetallesPago: []
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   EsPagoMultiple: False
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Observaciones: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   UsuarioCreadorId: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   UsuarioCreadorNombre: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaCreacion: 1/1/0001 12:00:00 AM
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaActualizacion: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DetallesFactura: [
  {
    "DetalleFacturaId": 0,
    "FacturaId": 0,
    "ProductoId": 17,
    "NombreProducto"...
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   SubtotalSinDescuento: 120000
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   MontoDescuentoTotal: 0
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   SubtotalConDescuento: 120000
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   ImpuestoCalculado: 15600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   TotalCalculado: 135600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   CantidadItems: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   EsProforma: False
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Número de Factura generado: FAC-202508-165494
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 === DEBUGGING JWT TOKEN COMPLETO ===
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Payload JWT completo: {"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"Ulises Monge Aguilar","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress":"umongegds@gmail.com","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"1","userId":"1","http://schemas.microsoft.com/ws/2008/06/identity/claims/role":"Colaborador","Permission":["Crear Facturas","Iniciar Inventario","Ver Facturación","Ver Productos","EditarFacturas","Entregar Pendientes","Menu_Inventario","Sub_Menu_VerProductos","Sub_Menu_ProgramarInventario","Sub_Menu_HistorialInventario","Menu_Ventas","Sub_Menu_Facturación","Sub_Menu_EntregasPendientes","Ver Historial Inventarios","Ver Detalle Producto"],"exp":1755153776,"iss":"Tuco.API","aud":"Tuco.Client"}
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Propiedades disponibles en el token:
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Ulises Monge Aguilar
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: umongegds@gmail.com
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   userId: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Colaborador
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Permission: [
  "Crear Facturas",
  "Iniciar Inventario",
  "Ver Facturación",
  "Ver Productos",
  "EditarFacturas",
  "Entregar Pendientes",
  "Menu_Inventario",
  "Sub_Menu_VerProductos",
  "Sub_Menu_...
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   exp: 1755153776
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   iss: Tuco.API
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   aud: Tuco.Client
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Permisos encontrados en campo 'Permission': [
  "Crear Facturas",
  "Iniciar Inventario",
  "Ver Facturación",
  "Ver Productos",
  "EditarFacturas",
  "Entregar Pendientes",
  "Menu_Inventario",
  "Sub_Menu_VerProductos",
  "Sub_Menu_ProgramarInventario",
  "Sub_Menu_HistorialInventario",
  "Menu_Ventas",
  "Sub_Menu_Facturación",
  "Sub_Menu_EntregasPendientes",
  "Ver Historial Inventarios",
  "Ver Detalle Producto"
]
GestionLlantera.Web.Services.FacturacionService: Information: 🔐 Permisos extraídos del token: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
GestionLlantera.Web.Services.FacturacionService: Information: ⚠️ Usuario sin permisos de CompletarFacturas - Estado: Pendiente
GestionLlantera.Web.Services.FacturacionService: Information: 🔐 Roles encontrados: Colaborador
GestionLlantera.Web.Services.FacturacionService: Information: 🔐 Permisos evaluados: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Estado de factura asignado: Pendiente
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Validación de productos exitosa: se encontraron productos en la factura
GestionLlantera.Web.Services.FacturacionService: Information: 📤 JSON enviado a API: {"FacturaId":0,"NumeroFactura":"","ClienteId":13,"NombreCliente":"Juan Perez","IdentificacionCliente":"3-0435-0539","TelefonoCliente":"+506 62828588","EmailCliente":"alexis@firestone.cr","DireccionCliente":"cartago","FechaFactura":"2025-08-14T05:43:11","FechaVencimiento":null,"Subtotal":120000.0,"DescuentoGeneral":0.0,"PorcentajeImpuesto":13.0,"MontoImpuesto":15600.0,"Total":135600.0,"Estado":"Pendiente","TipoDocumento":"Factura","MetodoPago":"efectivo","DetallesPago":[],"EsPagoMultiple":false,"Observaciones":"","UsuarioCreadorId":1,"UsuarioCreadorNombre":null,"FechaCreacion":"0001-01-01T00:00:00","FechaActualizacion":null,"DetallesFactura":[{"DetalleFacturaId":0,"FacturaId":0,"ProductoId":17,"NombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","DescripcionProducto":"","Cantidad":1,"PrecioUnitario":120000.0,"PorcentajeDescuento":0.0,"MontoDescuento":0.0,"Subtotal":120000.0,"StockDisponible":0,"EsLlanta":false,"MedidaLlanta":null,"MarcaLlanta":null,"ModeloLlanta":null,"SubtotalSinDescuento":120000.0,"DescuentoCalculado":0.0,"SubtotalConDescuento":120000.0,"TieneDescuento":false,"StockSuficiente":false}],"SubtotalSinDescuento":120000.0,"MontoDescuentoTotal":0.0,"SubtotalConDescuento":120000.0,"ImpuestoCalculado":15600.0,"TotalCalculado":135600.0,"CantidadItems":1,"EsProforma":false,"numeroFactura":"FAC-202508-165494","fechaCreacion":"2025-08-13T23:43:11","estado":"Pendiente","nombreCliente":"Juan Perez","detallesFactura":[{"DetalleFacturaId":0,"FacturaId":0,"ProductoId":17,"NombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","DescripcionProducto":"","Cantidad":1,"PrecioUnitario":120000.0,"PorcentajeDescuento":0.0,"MontoDescuento":0.0,"Subtotal":120000.0,"StockDisponible":0,"EsLlanta":false,"MedidaLlanta":null,"MarcaLlanta":null,"ModeloLlanta":null,"SubtotalSinDescuento":120000.0,"DescuentoCalculado":0.0,"SubtotalConDescuento":120000.0,"TieneDescuento":false,"StockSuficiente":false}]}
GestionLlantera.Web.Services.FacturacionService: Information: 🌐 URL construida: https://localhost:7273/api/Facturacion/facturas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/Facturacion/facturas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/Facturacion/facturas
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Crear Facturas'
ValidarPermisoAsync: Information: 🔍 Usuario: Ulises Monge Aguilar
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
ValidarPermisoAsync: Information: 🔍 Acción: CrearFactura
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 1
ValidarPermisoAsync: Information: 🔍 Es administrador: False
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Crear Facturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Crear Facturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Crear Facturas': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Crear Facturas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Ulises Monge Aguilar, Permiso: Crear Facturas
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
API.Controllers.FacturacionController: Information: 💰 Usuario Ulises Monge Aguilar creando factura para cliente: Juan Perez
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'CompletarFacturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'CompletarFacturas': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.FacturacionController: Information: 📋 Usuario envió factura como PENDIENTE
API.Controllers.FacturacionController: Information: 🔐 Estado inicial determinado: Pendiente (Usuario puede completar: False, Estado enviado: Pendiente)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__tipoDocumento_0='?' (Size = 20), @__año_1='?' (DbType = Int32), @__mes_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
WHERE [f].[TipoDocumento] = @__tipoDocumento_0 AND DATEPART(year, [f].[FechaFactura]) = @__año_1 AND DATEPART(month, [f].[FechaFactura]) = @__mes_2
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 300), @p3='?' (Size = 200), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (Size = 50), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 200), @p13='?' (Size = 50), @p14='?' (Size = 500), @p15='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Facturas] ([ClienteId], [DescuentoGeneral], [DireccionCliente], [EmailCliente], [Estado], [FechaActualizacion], [FechaCreacion], [FechaFactura], [FechaVencimiento], [IdentificacionCliente], [MetodoPago], [MontoImpuesto], [NombreCliente], [NumeroFactura], [Observaciones], [PorcentajeImpuesto], [Subtotal], [TelefonoCliente], [TipoDocumento], [Total], [UsuarioCreadorId])
OUTPUT INSERTED.[FacturaId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
API.Controllers.FacturacionController: Information: 💳 Detalle de pago único creado: efectivo - ₡135600.000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 200), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 300), @p14='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DetallesFactura] ([Cantidad], [DescripcionProducto], [FacturaId], [MontoDescuento], [NombreProducto], [PorcentajeDescuento], [PrecioUnitario], [ProductoId], [Subtotal])
OUTPUT INSERTED.[DetalleFacturaId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [DetallesPago] ([FacturaId], [FechaPago], [MetodoPago], [Monto], [Observaciones], [Referencia])
OUTPUT INSERTED.[DetallePagoId]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 150.1433ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 152.7715ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta de API: OK - {"success":true,"message":"Factura creada exitosamente en estado PENDIENTE","numeroFactura":"FAC-202508-000043","facturaId":1326}
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Número de factura extraído: FAC-202508-000043, ID: 1326
✅ Documento creado: {success: true, data: {…}, numeroFactura: 'FAC-202508-000043', facturaId: 1326, message: 'Factura creada exitosamente'}
📋 Factura pendiente - Mostrando modal de envío a cajas
📦 === ACTUALIZANDO VISTA POST-AJUSTE ===
🧹 Limpiando estado de búsqueda...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 2
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
🔍 Iniciando búsqueda válida...
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.InventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerCostos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerUtilidades': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Ulises Monge Aguilar - VerCostos: False, VerUtilidades: False
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 48.3854ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 50.9107ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10152 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 2, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 2
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19208 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
✅ Vista principal de productos actualizada
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
📋 === MODAL FACTURA PENDIENTE ===
📋 Datos recibidos: {success: true, data: {…}, numeroFactura: 'FAC-202508-000043', facturaId: 1326, message: 'Factura creada exitosamente'}
🔢 Número de factura extraído: FAC-202508-000043
📦 === ACTUALIZANDO VISTA POST-AJUSTE ===
🧹 Limpiando estado de búsqueda...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 3
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.InventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerCostos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerUtilidades': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Ulises Monge Aguilar - VerCostos: False, VerUtilidades: False
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 48.0927ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 50.5473ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10152 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 2, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 3
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19208 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
✅ Vista principal de productos actualizada
🧹 Recursos de sidebar usuarios limpiados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 1. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.8652ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 12.0164ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
El subproceso '.NET ThreadPool Worker' (16888) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30344) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (26160) terminó con código 0 (0x0).
GestionLlantera.Web.Services.AuthService: Information: 🌐 URL construida: https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[EsTopVendedor], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Administrador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario zlktmbs334@tormails.com (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 199.7028ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 202.3849ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: zlktmbs334@tormails.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Cargando página principal del dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 👤 ID del usuario actual: 4
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 31.5495ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 34.0256ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.2752ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 31.6906ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.0176ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 32.5376ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.731ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.5899ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
📊 Módulo Dashboard cargado correctamente
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Dashboard cargado exitosamente
✅ Evento de formulario de nueva nota configurado
✅ Evento de formulario de nuevo anuncio configurado
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 34.0673ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 36.8197ms - 200
📊 Dashboard - Inicializando módulo principal
📊 Cargando alertas de stock...
📊 Cargando estadísticas de inventario total...
🏆 Cargando información del top vendedor...
👥 Cargando información de usuarios conectados...
📝 Cargando notas rápidas...
📢 Cargando anuncios del sistema...
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.NotasRapidasService: Information: 🔧 NotasRapidasService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando alertas de stock desde dashboard service
GestionLlantera.Web.Services.NotasRapidasService: Information: Obteniendo notas para usuario: 4
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener alertas de stock
GestionLlantera.Web.Services.NotasRapidasService: Information: 🌐 URL construida: https://localhost:7273/api/notasrapidas/usuario/4
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/alertas-stock
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/notasrapidas/usuario/4
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/notasrapidas/usuario/4
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
GestionLlantera.Web.Services.AnunciosService: Information: Obteniendo anuncios desde la API
API.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando top vendedor desde dashboard service
API.Controllers.NotasRapidasController: Information: Obteniendo notas para usuario: 4
GestionLlantera.Web.Services.AnunciosService: Information: 🌐 URL construida: https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener top vendedor
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Anuncios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[StockMinimo] - [p].[CantidadEnInventario] AS [Diferencia]
FROM [Productos] AS [p]
WHERE [p].[CantidadEnInventario] <= [p].[StockMinimo]
ORDER BY [p].[CantidadEnInventario]
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/top-vendedor
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [n].[NotaId], [n].[UsuarioId], [n].[Titulo], [n].[Contenido], [n].[Color], [n].[EsFavorita], [n].[FechaCreacion], [n].[FechaModificacion]
FROM [NotasRapidas] AS [n]
WHERE [n].[UsuarioId] = @__usuarioId_0 AND [n].[Eliminada] = CAST(0 AS bit)
ORDER BY [n].[EsFavorita] DESC, [n].[FechaModificacion] DESC
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Anuncios
API.Controllers.DashboardController: Information: 📊 Alertas encontradas: 8 total, 7 agotados, 1 críticos
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
API.Controllers.AnunciosController: Information: 🔔 === OBTENIENDO ANUNCIOS ===
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.9875ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[AnuncioId], [a].[UsuarioCreadorId], [u].[NombreUsuario] AS [NombreCreador], [a].[Titulo], [a].[Contenido], [a].[TipoAnuncio], [a].[Prioridad], [a].[EsImportante], [a].[Activo], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaVencimiento]
FROM [Anuncios] AS [a]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [a].[Activo] = CAST(1 AS bit)
ORDER BY [a].[EsImportante] DESC, [a].[FechaCreacion] DESC
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
API.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
API.Controllers.AnunciosController: Information: ✅ Se encontraron 1 anuncios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 16.5762ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.9749ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaInicio_0='?' (DbType = DateTime2), @__fechaFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [f].[UsuarioCreadorId] AS [UsuarioId], [u].[NombreUsuario] AS [NombreVendedor], COUNT(*) AS [TotalVentas], COALESCE(SUM([f].[Total]), 0.0) AS [MontoTotal], AVG([f].[Total]) AS [PromedioVenta]
FROM [Facturas] AS [f]
INNER JOIN [Usuarios] AS [u] ON [f].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [f].[FechaFactura] >= @__fechaInicio_0 AND [f].[FechaFactura] <= @__fechaFin_1 AND [u].[EsTopVendedor] = CAST(1 AS bit)
GROUP BY [f].[UsuarioCreadorId], [u].[NombreUsuario]
ORDER BY COUNT(*) DESC, COALESCE(SUM([f].[Total]), 0.0) DESC
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
API.Controllers.DashboardController: Information: 📊 Top vendedor: Ulises Monge Aguilar con 11 ventas por ₡3,094,872
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.5889ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 7.7362ms - 200
GestionLlantera.Web.Services.AnunciosService: Information: Respuesta de anuncios recibida: {"success":true,"anuncios":[{"anuncioId":6,"usuarioCreadorId":4,"nombreCreador":"Julissa Mejias","titulo":"Nota de Prueba","contenido":"Hay que limpiar hoy","tipoAnuncio":"Mantenimiento","prioridad":"Normal","esImportante":true,"activo":true,"fechaCreacion":"2025-08-06T21:44:12.386021","fechaModificacion":null,"fechaVencimiento":"2025-08-07T00:00:00","estaVencido":true}]}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 13.89ms - 200
GestionLlantera.Web.Services.AnunciosService: Information: ✅ 1 anuncios obtenidos correctamente
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de top vendedor recibida: {"success":true,"vendedor":"Ulises Monge Aguilar","totalVentas":11,"montoTotal":3094872.10,"promedioVenta":281352.009090,"mensaje":"Ulises Monge Aguilar lidera con 11 ventas"}
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Top vendedor obtenido correctamente
📝 Mostrando notas rápidas: (2) [{…}, {…}]
✅ Notas rápidas mostradas correctamente
✅ Notas rápidas cargadas correctamente: (2) [{…}, {…}]
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.1925ms - 200
📢 Mostrando anuncios: (1) [{…}]
👤 UserId obtenido desde meta tag: 4
🔍 Verificando permisos anuncio: {anuncioId: 6, usuarioCreadorId: 4, currentUserId: 4, esCreador: true}
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
✅ Anuncios mostrados correctamente
✅ Anuncios cargados correctamente: (1) [{…}]
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 32.9383ms - 200
🏆 Mostrando datos del top vendedor: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 11, montoTotal: 3094872.1, promedioVenta: 281352.00909, …}
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
✅ Top vendedor mostrado correctamente
✅ Top vendedor cargado correctamente: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 11, montoTotal: 3094872.1, promedioVenta: 281352.00909, …}
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta recibida: {"success":true,"totalAlertas":8,"productosAgotados":7,"productosCriticos":1,"productos":[{"productoId":20,"nombreProducto":"Llanta Agregar Marca Agrega Modelo","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1016,"nombreProducto":"Llanta Kumho Mobile","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1017,"nombreProducto":"Llanta Test","cantidadEnInventario":0,"stockMinimo":2,"diferencia":2},{"productoId":1018,"nombreProducto":"Llanta Firestone Extreme","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1021,"nombreProducto":"Llanta Kumho Miller","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1022,"nombreProducto":"Producto Ordenando URL API","cantidadEnInventario":0,"stockMinimo":1,"diferencia":1},{"productoId":1023,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1024,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":5,"stockMinimo":5,"diferencia":0}],"mensaje":"Productos requieren atención"}
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo estadísticas de inventario total para dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Alertas de stock obtenidas correctamente
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando estadísticas de inventario total desde dashboard service
📡 Respuesta del servidor: 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
✅ Datos de alertas recibidos: {success: true, data: {…}}
📊 Actualizando vista con datos: {success: true, totalAlertas: 8, productosAgotados: 7, productosCriticos: 1, productos: Array(8), …}
✅ Vista de alertas de stock actualizada correctamente
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener inventario total
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.1509ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.0018ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:43:20.263","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
API.Controllers.DashboardController: Information: 📊 Obteniendo resumen de inventario total para dashboard
👥 Mostrando datos de usuarios conectados: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
✅ Panel de usuarios conectados (bottom) actualizado
✅ Contador del sidebar actualizado: 1 usuarios
✅ Usuarios conectados mostrados correctamente
✅ Usuarios conectados cargados correctamente: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) COUNT(*) AS [TotalProductos], COALESCE(SUM([t].[CantidadEnInventario]), 0) AS [TotalCantidad], COALESCE(SUM(CAST([t].[CantidadEnInventario] AS decimal(10,2)) * [t].[Precio]), 0.0) AS [ValorTotalInventario], COUNT(CASE
    WHEN [t].[CantidadEnInventario] > 0 THEN 1
END) AS [ProductosActivos], COUNT(CASE
    WHEN [t].[CantidadEnInventario] = 0 THEN 1
END) AS [ProductosAgotados]
FROM (
    SELECT [p].[CantidadEnInventario], [p].[Precio], 1 AS [Key]
    FROM [Productos] AS [p]
) AS [t]
GROUP BY [t].[Key]
API.Controllers.DashboardController: Information: 📊 Inventario total: ₡951,400, 11 productos, 27 unidades
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.635ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.023ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de inventario total recibida: {"success":true,"valorTotal":951400.0000,"totalProductos":11,"totalCantidad":27,"productosActivos":4,"productosAgotados":7,"mensaje":"11 productos en inventario"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Estadísticas de inventario total obtenidas correctamente
📡 Respuesta del servidor (inventario): 200
✅ Datos de inventario total recibidos: {success: true, data: {…}}
📊 Actualizando tarjeta de inventario total: {success: true, valorTotal: 951400, totalProductos: 11, totalCantidad: 27, productosActivos: 4, …}
✅ Valor total actualizado: ₡951 400
✅ Detalle actualizado: 11 (27 unidades)
📊 Inicializando eventos de formularios...
🔄 Configurando refresco automático...
✅ Dashboard inicializado correctamente
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.8736ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.4046ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:43:20.263","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
🧹 Recursos de sidebar usuarios limpiados
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 === ACCESO AL MÓDULO DE FACTURACIÓN ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Usuario autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Nombre de usuario: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔍 Obteniendo información del usuario...
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Claims disponibles:
GestionLlantera.Web.Controllers.FacturacionController: Information:    - JwtToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NTE1MzgwMCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.e40bZKVzePSNs1Q9t-A5F7qgLxZYdBPtxa8mNNGvJFw
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 4
GestionLlantera.Web.Controllers.FacturacionController: Information:    - userId: 4
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Administrador
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Facturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Costos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Utilidades
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Programar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Gestion Completa
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Editar Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Eliminar Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ajustar Stock
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Reportes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Gestion Usuarios
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: VerCostos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: VerUtilidades
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: ProgramarInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Iniciar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Completar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Descargar Reportes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Editar Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: CompletarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: EditarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: AnularFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Eliminar Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - exp: 1755153800
GestionLlantera.Web.Controllers.FacturacionController: Information:    - iss: Tuco.API
GestionLlantera.Web.Controllers.FacturacionController: Information:    - aud: Tuco.Client
GestionLlantera.Web.Controllers.FacturacionController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.FacturacionController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ ID parseado de NameIdentifier: 4
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === VERIFICANDO PERMISOS DIRECTAMENTE DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos extraídos del token: Crear Facturas, Ver Costos, Ver Utilidades, Programar Inventario, Gestion Completa, Editar Productos, Eliminar Productos, Ajustar Stock, Ver Reportes, Gestion Usuarios, VerCostos, VerUtilidades, ProgramarInventario, Iniciar Inventario, Completar Inventario, Descargar Reportes, Ver Facturación, Editar Clientes, Ver Productos, CompletarFacturas, EditarFacturas, AnularFacturas, Crear Clientes, Ver Clientes, Eliminar Clientes, Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos encontrados en token: Crear Facturas, Ver Costos, Ver Utilidades, Programar Inventario, Gestion Completa, Editar Productos, Eliminar Productos, Ajustar Stock, Ver Reportes, Gestion Usuarios, VerCostos, VerUtilidades, ProgramarInventario, Iniciar Inventario, Completar Inventario, Descargar Reportes, Ver Facturación, Editar Clientes, Ver Productos, CompletarFacturas, EditarFacturas, AnularFacturas, Crear Clientes, Ver Clientes, Eliminar Clientes, Entregar Pendientes
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 1.3622ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 3.8226ms - 200
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === PERMISOS VALIDADOS DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCrearFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCompletarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeEditarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeAnularFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 esAdmin: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Configuración enviada al frontend: {"Usuario":{"usuarioId":4,"id":4,"nombre":"Julissa Mejias","nombreUsuario":"Julissa Mejias","email":"zlktmbs334@tormails.com"},"Permisos":{"puedeCrearFacturas":true,"puedeCompletarFacturas":true,"puedeEditarFacturas":true,"puedeAnularFacturas":true,"esAdmin":true},"FechaActual":"2025-08-13","HoraActual":"23:43","TokenDisponible":true}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.1663ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 31.796ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.677ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.1306ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.9555ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 32.3138ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.1166ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 31.7563ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
🖨️ Módulo de impresión térmica cargado correctamente
✅ Sistema de zoom simplificado cargado
📋 Funciones de proformas y detalles exportadas globalmente
📋 Funciones de facturas pendientes exportadas globalmente
📋 Módulo de filtros de proformas (Frontend) cargado correctamente
✅ verDetalleProducto disponible desde facturacion.js
📦 Módulo InventarioFacturacion.js cargado correctamente
🎯 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🎯 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:43', tokenDisponible: true}
❌ No se encontraron permisos en la configuración
🔧 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🔧 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:43', tokenDisponible: true}
🔧 Usuario disponible: undefined
🔧 Permisos disponibles: undefined
🔧 Token disponible: undefined
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Inicializando módulo de facturación
🚀 === INICIO inicializarFacturacion ===
🔐 Cargando permisos del usuario...
🔍 === INICIANDO CARGA DE PERMISOS EN FACTURACIÓN ===
🔍 Configuración recibida: {
  "usuario": {
    "usuarioId": 4,
    "id": 4,
    "nombre": "Julissa Mejias",
    "nombreUsuario": "Julissa Mejias",
    "email": "zlktmbs334@tormails.com"
  },
  "permisos": {
    "puedeCrearFacturas": true,
    "puedeCompletarFacturas": true,
    "puedeEditarFacturas": true,
    "puedeAnularFacturas": true,
    "esAdmin": true
  },
  "fechaActual": "2025-08-13",
  "horaActual": "23:43",
  "tokenDisponible": true
}
🔐 === PERMISOS CARGADOS CORRECTAMENTE ===
🔐 puedeCrearFacturas: true
🔐 puedeCompletarFacturas: true
🔐 puedeEditarFacturas: true
🔐 puedeAnularFacturas: true
🔐 esAdmin: true
🎯 === CONFIGURANDO INTERFAZ SEGÚN PERMISOS ===
🎯 Permisos actuales del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: true, puedeEditarFacturas: true, puedeAnularFacturas: true, esAdmin: true}
🎯 puedeCompletarFacturas: true (tipo: boolean )
🎯 puedeCrearFacturas: true (tipo: boolean )
🎯 Evaluación de permisos:
🎯   - puedeCompletar (CompletarFacturas): true
🎯   - puedeCrear (CrearFacturas): true
👑 === INTERFAZ CONFIGURADA: USUARIO CON PERMISO COMPLETAR ===
👑 Botón: Verde - "Completar Venta"
👑 Flujo: Factura pagada inmediatamente con ajuste de stock
📋 Botón Facturas Pendientes habilitado para usuario con permisos de completar
🚀 Inicializando modales...
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
🚀 Configurando eventos...
🚀 Actualizando totales...
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
🚀 Iniciando carga de productos iniciales...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 1
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
✅ Facturación inicializada correctamente
🚀 === FIN inicializarFacturacion ===
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.InventarioController: Information: 🚀 Usuario: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a VerCostos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 84.3359ms - 200
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 87.1852ms - 200
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a VerUtilidades
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Julissa Mejias - VerCostos: True, VerUtilidades: True
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Costo], [p].[PorcentajeUtilidad], CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN [p].[Costo] * ([p].[PorcentajeUtilidad] / 100.0)
    ELSE NULL
END, CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN [p].[Costo] + ([p].[Costo] * ([p].[PorcentajeUtilidad] / 100.0))
    ELSE [p].[Precio]
END, CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 87.1729ms - 200
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn w-100 btn-outline-secondary
🎯 Deshabilitado: true
🎯 Texto: Completar Venta
🎯 Título: Agrega productos y selecciona un cliente
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 90.7179ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10362 caracteres...
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 2, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 1
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19208 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
📋 === ABRIENDO MODAL DE FACTURAS PENDIENTES ===
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.1152ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.729ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:43:20.263","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
📋 *** MODAL DE FACTURAS PENDIENTES COMPLETAMENTE VISIBLE ***
📋 Elementos disponibles en el DOM:
📋 - Input búsqueda: 1
📋 - Select estado: 1
📋 - Tabla body: 1
📋 - Loading: 1
📋 - Content: 1
✅ Inicializando filtros de facturas pendientes...
🔍 === INICIALIZANDO FILTROS DE FACTURAS PENDIENTES (FRONTEND) ===
🔍 Configurando eventos de filtrado para facturas pendientes...
✅ Eventos de filtros de facturas configurados con delegación
📋 === CARGANDO TODAS LAS FACTURAS PENDIENTES ===
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Obteniendo todas las facturas desde el servicio de facturación
✅ Filtros de facturas pendientes inicializados correctamente
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📋 URL de consulta: https://localhost:7273/api/Facturacion/facturas?tamano=1000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[NumeroFactura], [t].[ClienteId], [t].[NombreCliente], [t].[IdentificacionCliente], [t].[TelefonoCliente], [t].[EmailCliente], [t].[DireccionCliente], [t].[FechaFactura], [t].[FechaVencimiento], [t].[Subtotal], [t].[DescuentoGeneral], [t].[PorcentajeImpuesto], COALESCE([t].[MontoImpuesto], 0.0), [t].[Total], [t].[Estado], [t].[TipoDocumento], [t].[MetodoPago], [t].[Observaciones], [t].[UsuarioCreadorId], [u].[NombreUsuario], [t].[FechaCreacion], [t].[FechaActualizacion], [u].[UsuarioID], [d].[DetalleFacturaId], [d].[ProductoId], [d].[NombreProducto], [d].[DescripcionProducto], [d].[Cantidad], [d].[PrecioUnitario], [d].[PorcentajeDescuento], [d].[MontoDescuento], [d].[Subtotal]
FROM (
    SELECT [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    ORDER BY [f].[FechaCreacion] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Usuarios] AS [u] ON [t].[UsuarioCreadorId] = [u].[UsuarioID]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FechaCreacion] DESC, [t].[FacturaId], [u].[UsuarioID]
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Facturas obtenidas exitosamente: 330 facturas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio: Success=True, Message=Facturas obtenidas exitosamente
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ 330 facturas obtenidas exitosamente
📋 Respuesta del servidor facturas: {success: true, facturas: Array(330), message: 'Se encontraron 330 facturas'}
✅ Facturas pendientes cargadas: 330
🔍 === APLICANDO FILTROS LOCALMENTE A FACTURAS ===
🔍 Total facturas disponibles: 330
🔍 Filtros aplicados: {texto: '', estado: 'todos', fechaDesde: '', fechaHasta: ''}
🔍 Facturas filtradas: 330
📋 === MOSTRANDO FACTURAS PENDIENTES PAGINADAS ===
📋 Total facturas a paginar: 330
📋 Facturas por página: 20
📋 Página actual: 1
📋 Facturas en esta página: 20
🔧 Configurando eventos de botones de facturas...
✅ Eventos de botones de facturas configurados correctamente
📄 === MOSTRANDO PAGINACIÓN DE FACTURAS ===
📄 Página actual: 1 Total páginas: 17
✅ Facturas pendientes mostradas en tabla
📋 Datos originales recibidos: {facturaId: 1326, numeroFactura: 'FAC-202508-000043', clienteId: 13, nombreCliente: 'Juan Perez', identificacionCliente: '3-0435-0539', …} object
⚙️ Procesar factura pendiente: {facturaId: 1326, numeroFactura: 'FAC-202508-000043', clienteId: 13, nombreCliente: 'Juan Perez', identificacionCliente: '3-0435-0539', …}
🚪 Modal de facturas pendientes cerrado al inicio del procesamiento
💰 === PROCESANDO FACTURA PENDIENTE ===
💰 Factura escapada recibida: {facturaId: 1326, numeroFactura: 'FAC-202508-000043', clienteId: 13, nombreCliente: 'Juan Perez', identificacionCliente: '3-0435-0539', …}
💰 Factura deserializada: {facturaId: 1326, numeroFactura: 'FAC-202508-000043', clienteId: 13, nombreCliente: 'Juan Perez', identificacionCliente: '3-0435-0539', …}
📦 Verificando stock de la factura...
📦 === VERIFICANDO STOCK PARA FACTURA ===
📦 Factura ID: 1326
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📦 === VERIFICANDO STOCK DE FACTURA DESDE CONTROLADOR WEB ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 📦 Factura ID: 1326
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📦 === VERIFICANDO STOCK DE FACTURA PENDIENTE ===
GestionLlantera.Web.Services.FacturacionService: Information: 📦 Factura ID: 1326
GestionLlantera.Web.Services.FacturacionService: Information: 📤 Enviando request al API: {"FacturaId":1326}
GestionLlantera.Web.Services.FacturacionService: Information: 🌐 URL construida: https://localhost:7273/api/Facturacion/verificar-stock-factura
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/Facturacion/verificar-stock-factura
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/Facturacion/verificar-stock-factura
API.Controllers.FacturacionController: Information: 📦 Verificando stock para factura: 1326
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__request_FacturaId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[ClienteId], [t].[DescuentoGeneral], [t].[DireccionCliente], [t].[EmailCliente], [t].[Estado], [t].[FechaActualizacion], [t].[FechaCreacion], [t].[FechaFactura], [t].[FechaVencimiento], [t].[IdentificacionCliente], [t].[MetodoPago], [t].[MontoImpuesto], [t].[NombreCliente], [t].[NumeroFactura], [t].[Observaciones], [t].[PorcentajeImpuesto], [t].[Subtotal], [t].[TelefonoCliente], [t].[TipoDocumento], [t].[Total], [t].[UsuarioCreadorId], [d].[DetalleFacturaId], [d].[Cantidad], [d].[DescripcionProducto], [d].[FacturaId], [d].[MontoDescuento], [d].[NombreProducto], [d].[PorcentajeDescuento], [d].[PrecioUnitario], [d].[ProductoId], [d].[Subtotal]
FROM (
    SELECT TOP(1) [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    WHERE [f].[FacturaId] = @__request_FacturaId_0
) AS [t]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FacturaId]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__detalle_ProductoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[ProductoID], [t].[CantidadEnInventario], [t].[Costo], [t].[Descripcion], [t].[FechaUltimaActualizacion], [t].[NombreProducto], [t].[PorcentajeUtilidad], [t].[Precio], [t].[StockMinimo], [i].[ImagenID], [i].[Descripcion], [i].[FechaCreacion], [i].[ProductoID], [i].[URLImagen]
FROM (
    SELECT TOP(1) [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
    FROM [Productos] AS [p]
    WHERE [p].[ProductoID] = @__detalle_ProductoId_0
) AS [t]
LEFT JOIN [ImagenesProducto] AS [i] ON [t].[ProductoID] = [i].[ProductoID]
ORDER BY [t].[ProductoID]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 58.9393ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 61.6767ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta del API: OK - {"success":true,"hayProblemasStock":false,"tieneProblemas":false,"productosConProblemas":[],"message":"Todos los productos tienen stock suficiente"}
GestionLlantera.Web.Services.FacturacionService: Information: 📦 Verificación completada - Hay problemas: False, Productos afectados: 0
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio de verificación: Success=True, Data={"hayProblemasStock":false,"productosConProblemas":[],"message":"Todos los productos tienen stock suficiente"}
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Verificación de stock exitosa para factura 1326
GestionLlantera.Web.Controllers.FacturacionController: Information: 📤 Propiedades mapeadas: hayProblemasStock=False, tieneProblemas=False, productos=0
GestionLlantera.Web.Controllers.FacturacionController: Information: 📤 Respuesta final enviada al frontend: {"success":true,"hayProblemasStock":false,"tieneProblemas":false,"productosConProblemas":[],"message":"Todos los productos tienen stock suficiente"}
📦 === RESPUESTA DEL SERVIDOR ===
📦 Resultado completo: {
  "success": true,
  "hayProblemasStock": false,
  "tieneProblemas": false,
  "productosConProblemas": [],
  "message": "Todos los productos tienen stock suficiente"
}
📦 Tipo: object
📦 Propiedades: (5) ['success', 'hayProblemasStock', 'tieneProblemas', 'productosConProblemas', 'message']
📦 === RESULTADO FINAL ===
📦 Success: true
📦 Tiene problemas: false
📦 Productos con problemas: 0
📦 Productos normalizados: (0) []
📦 Resultado verificación stock: {success: true, tieneProblemas: false, productosConProblemas: Array(0), message: 'Verificación completada'}
✅ No hay problemas de stock, procesando factura directamente
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: true, puedeFinalizarVenta: true, disabled: false, limpiarDisabled: false}
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: true, puedeFinalizarVenta: true, disabled: false, limpiarDisabled: false}
🚪 Modal de facturas pendientes cerrado antes de abrir modal finalizar
📋 === DEPURACIÓN CLIENTE SELECCIONADO ===
📋 Cliente completo: {clienteId: 13, nombre: 'Juan Perez', identificacion: '3-0435-0539', telefono: '+506 62828588', email: 'alexis@firestone.cr', …}
📋 Propiedades disponibles: (6) ['clienteId', 'nombre', 'identificacion', 'telefono', 'email', 'direccion']
📋 Factura pendiente actual: {facturaId: 1326, numeroFactura: 'FAC-202508-000043', clienteId: 13, nombreCliente: 'Juan Perez', identificacionCliente: '3-0435-0539', …}
📋 Proforma original para conversión: undefined
📋 Mostrando información de factura pendiente
🎯 === CONFIGURANDO MODAL SEGÚN PERMISOS ===
🎯 Permisos del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: true, puedeEditarFacturas: true, puedeAnularFacturas: true, esAdmin: true}
🎯 puedeCompletarFacturas: true
🎯 puedeCrearFacturas: true
🎯 esAdmin: true
🎯 Es conversión de proforma: false
🎯 Es factura pendiente: true
🎯 Botón de proforma ocultado - Es factura pendiente
👑 Modal configurado para administrador/cajero - Venta completa con ajuste de stock
📋 Datos mapeados para formulario: {nombre: 'Juan Perez', cedula: '3-0435-0539', telefono: '+506 62828588', email: 'alexis@firestone.cr', direccion: 'cartago'}
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn btn-success
🎯 Deshabilitado: false
🎯 Texto: 
                    
                    Completar y Pagar
                
🎯 Título: Procesar venta completa, marcar como pagada, ajustar stock e imprimir factura
🎯 Botón Proforma Visible: false
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
🔍 === PROCESANDO VENTA FINAL ===
🔍 Es pago múltiple: false
🔍 Detalles de pago actuales: (0) []
🔍 Es factura pendiente: true
🔍 Factura ID: 1326
✅ Completando factura pendiente ID: 1326
💰 === COMPLETANDO FACTURA EXISTENTE ===
💰 Factura ID: 1326
💰 Es pago múltiple: false
💰 Detalles de pago: (0) []
📋 Datos de completamiento para factura pendiente: {facturaId: 1326, metodoPago: 'efectivo', observaciones: '', forzarVerificacionStock: false, esProforma: false}
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Completando documento ID: 1326
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Datos de completamiento: {}
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Completando factura usando endpoint: https://localhost:7273/api/Facturacion/facturas/1326/completar
GestionLlantera.Web.Services.FacturacionService: Information: 📤 JSON enviado al API: {}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request PUT https://localhost:7273/api/Facturacion/facturas/1326/completar
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request PUT https://localhost:7273/api/Facturacion/facturas/1326/completar
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
ValidarPermisoAsync: Information: 🔍 Usuario: Julissa Mejias
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
ValidarPermisoAsync: Information: 🔍 Acción: CompletarFactura
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 4
ValidarPermisoAsync: Information: 🔍 Es administrador: True
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'CompletarFacturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a CompletarFacturas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Julissa Mejias, Permiso: CompletarFacturas
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
Microsoft.EntityFrameworkCore.Query: Warning: Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[ClienteId], [t].[DescuentoGeneral], [t].[DireccionCliente], [t].[EmailCliente], [t].[Estado], [t].[FechaActualizacion], [t].[FechaCreacion], [t].[FechaFactura], [t].[FechaVencimiento], [t].[IdentificacionCliente], [t].[MetodoPago], [t].[MontoImpuesto], [t].[NombreCliente], [t].[NumeroFactura], [t].[Observaciones], [t].[PorcentajeImpuesto], [t].[Subtotal], [t].[TelefonoCliente], [t].[TipoDocumento], [t].[Total], [t].[UsuarioCreadorId], [d].[DetalleFacturaId], [d].[Cantidad], [d].[DescripcionProducto], [d].[FacturaId], [d].[MontoDescuento], [d].[NombreProducto], [d].[PorcentajeDescuento], [d].[PrecioUnitario], [d].[ProductoId], [d].[Subtotal], [d0].[DetallePagoId], [d0].[FacturaId], [d0].[FechaPago], [d0].[MetodoPago], [d0].[Monto], [d0].[Observaciones], [d0].[Referencia]
FROM (
    SELECT TOP(1) [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    WHERE [f].[FacturaId] = @__id_0
) AS [t]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
LEFT JOIN [DetallesPago] AS [d0] ON [t].[FacturaId] = [d0].[FacturaId]
ORDER BY [t].[FacturaId], [d].[DetalleFacturaId]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] = @__p_0
API.Controllers.FacturacionController: Information: 📦 Stock actualizado para Prueba de Stock 3 Despues de eliminar imagen: -1 unidades
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Facturas] SET [Estado] = @p0, [FechaActualizacion] = @p1
OUTPUT 1
WHERE [FacturaId] = @p2;
UPDATE [Productos] SET [CantidadEnInventario] = @p3, [FechaUltimaActualizacion] = @p4
OUTPUT 1
WHERE [ProductoID] = @p5;
API.Controllers.FacturacionController: Information: ✅ Factura FAC-202508-000043 completada exitosamente por usuario Julissa Mejias
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 105.0844ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 108.2483ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta del API: OK - {"message":"Factura completada exitosamente","numeroFactura":"FAC-202508-000043","estado":"Pagada","metodoPago":"efectivo","timestamp":"2025-08-13T23:43:37.6201375-06:00"}
❌ Error completando factura existente: Error: Error al completar la factura
    at completarFacturaExistente (C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\wwwroot\js\views\facturacion\facturacion.js:2446:19)
    at async procesarVentaFinal (https://localhost:7038/js/views/facturacion/facturacion.js:2285:13) {stack: 'Error: Error al completar la factura
    at c…/js/views/facturacion/facturacion.js:2285:13)', message: 'Error al completar la factura'}

❌ Error procesando venta: Error: Error al completar la factura
    at completarFacturaExistente (C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\wwwroot\js\views\facturacion\facturacion.js:2446:19)
    at async procesarVentaFinal (https://localhost:7038/js/views/facturacion/facturacion.js:2285:13) {stack: 'Error: Error al completar la factura
    at c…/js/views/facturacion/facturacion.js:2285:13)', message: 'Error al completar la factura'}

El subproceso '.NET ThreadPool Worker' (25504) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30440) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30412) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (17316) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30448) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (33588) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34732) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34736) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34744) terminó con código 0 (0x0).
📋 === ABRIENDO MODAL DE FACTURAS PENDIENTES ===
📋 *** MODAL DE FACTURAS PENDIENTES COMPLETAMENTE VISIBLE ***
📋 Elementos disponibles en el DOM:
📋 - Input búsqueda: 1
📋 - Select estado: 1
📋 - Tabla body: 1
📋 - Loading: 1
📋 - Content: 1
✅ Inicializando filtros de facturas pendientes...
🔍 === INICIALIZANDO FILTROS DE FACTURAS PENDIENTES (FRONTEND) ===
🔍 Configurando eventos de filtrado para facturas pendientes...
✅ Eventos de filtros de facturas configurados con delegación
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
📋 === CARGANDO TODAS LAS FACTURAS PENDIENTES ===
✅ Filtros de facturas pendientes inicializados correctamente
📋 *** MODAL DE FACTURAS PENDIENTES COMPLETAMENTE VISIBLE ***
📋 Elementos disponibles en el DOM:
📋 - Input búsqueda: 1
📋 - Select estado: 1
📋 - Tabla body: 1
📋 - Loading: 1
📋 - Content: 1
✅ Inicializando filtros de facturas pendientes...
🔍 === INICIALIZANDO FILTROS DE FACTURAS PENDIENTES (FRONTEND) ===
🔍 Configurando eventos de filtrado para facturas pendientes...
✅ Eventos de filtros de facturas configurados con delegación
📋 === CARGANDO TODAS LAS FACTURAS PENDIENTES ===
✅ Filtros de facturas pendientes inicializados correctamente
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Obteniendo todas las facturas desde el servicio de facturación
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📋 URL de consulta: https://localhost:7273/api/Facturacion/facturas?tamano=1000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[NumeroFactura], [t].[ClienteId], [t].[NombreCliente], [t].[IdentificacionCliente], [t].[TelefonoCliente], [t].[EmailCliente], [t].[DireccionCliente], [t].[FechaFactura], [t].[FechaVencimiento], [t].[Subtotal], [t].[DescuentoGeneral], [t].[PorcentajeImpuesto], COALESCE([t].[MontoImpuesto], 0.0), [t].[Total], [t].[Estado], [t].[TipoDocumento], [t].[MetodoPago], [t].[Observaciones], [t].[UsuarioCreadorId], [u].[NombreUsuario], [t].[FechaCreacion], [t].[FechaActualizacion], [u].[UsuarioID], [d].[DetalleFacturaId], [d].[ProductoId], [d].[NombreProducto], [d].[DescripcionProducto], [d].[Cantidad], [d].[PrecioUnitario], [d].[PorcentajeDescuento], [d].[MontoDescuento], [d].[Subtotal]
FROM (
    SELECT [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    ORDER BY [f].[FechaCreacion] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Usuarios] AS [u] ON [t].[UsuarioCreadorId] = [u].[UsuarioID]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FechaCreacion] DESC, [t].[FacturaId], [u].[UsuarioID]
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Facturas obtenidas exitosamente: 330 facturas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio: Success=True, Message=Facturas obtenidas exitosamente
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ 330 facturas obtenidas exitosamente
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Obteniendo todas las facturas desde el servicio de facturación
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📋 URL de consulta: https://localhost:7273/api/Facturacion/facturas?tamano=1000
📋 Respuesta del servidor facturas: {success: true, facturas: Array(330), message: 'Se encontraron 330 facturas'}
✅ Facturas pendientes cargadas: 330
🔍 === APLICANDO FILTROS LOCALMENTE A FACTURAS ===
🔍 Total facturas disponibles: 330
🔍 Filtros aplicados: {texto: '', estado: 'todos', fechaDesde: '', fechaHasta: ''}
🔍 Facturas filtradas: 330
📋 === MOSTRANDO FACTURAS PENDIENTES PAGINADAS ===
📋 Total facturas a paginar: 330
📋 Facturas por página: 20
📋 Página actual: 1
📋 Facturas en esta página: 20
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
🔧 Configurando eventos de botones de facturas...
✅ Eventos de botones de facturas configurados correctamente
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[NumeroFactura], [t].[ClienteId], [t].[NombreCliente], [t].[IdentificacionCliente], [t].[TelefonoCliente], [t].[EmailCliente], [t].[DireccionCliente], [t].[FechaFactura], [t].[FechaVencimiento], [t].[Subtotal], [t].[DescuentoGeneral], [t].[PorcentajeImpuesto], COALESCE([t].[MontoImpuesto], 0.0), [t].[Total], [t].[Estado], [t].[TipoDocumento], [t].[MetodoPago], [t].[Observaciones], [t].[UsuarioCreadorId], [u].[NombreUsuario], [t].[FechaCreacion], [t].[FechaActualizacion], [u].[UsuarioID], [d].[DetalleFacturaId], [d].[ProductoId], [d].[NombreProducto], [d].[DescripcionProducto], [d].[Cantidad], [d].[PrecioUnitario], [d].[PorcentajeDescuento], [d].[MontoDescuento], [d].[Subtotal]
FROM (
    SELECT [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    ORDER BY [f].[FechaCreacion] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Usuarios] AS [u] ON [t].[UsuarioCreadorId] = [u].[UsuarioID]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FechaCreacion] DESC, [t].[FacturaId], [u].[UsuarioID]
📄 === MOSTRANDO PAGINACIÓN DE FACTURAS ===
📄 Página actual: 1 Total páginas: 17
✅ Facturas pendientes mostradas en tabla
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Facturas obtenidas exitosamente: 330 facturas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio: Success=True, Message=Facturas obtenidas exitosamente
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ 330 facturas obtenidas exitosamente
📋 Respuesta del servidor facturas: {success: true, facturas: Array(330), message: 'Se encontraron 330 facturas'}
✅ Facturas pendientes cargadas: 330
🔍 === APLICANDO FILTROS LOCALMENTE A FACTURAS ===
🔍 Total facturas disponibles: 330
🔍 Filtros aplicados: {texto: '', estado: 'todos', fechaDesde: '', fechaHasta: ''}
🔍 Facturas filtradas: 330
📋 === MOSTRANDO FACTURAS PENDIENTES PAGINADAS ===
📋 Total facturas a paginar: 330
📋 Facturas por página: 20
📋 Página actual: 1
📋 Facturas en esta página: 20
🔧 Configurando eventos de botones de facturas...
✅ Eventos de botones de facturas configurados correctamente
📄 === MOSTRANDO PAGINACIÓN DE FACTURAS ===
📄 Página actual: 1 Total páginas: 17
✅ Facturas pendientes mostradas en tabla
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153800
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 31.2655ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 34.2618ms - 200
🧹 Recursos de sidebar usuarios limpiados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 4. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.9876ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.7639ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
GestionLlantera.Web.Services.AuthService: Information: 🌐 URL construida: https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[EsTopVendedor], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Colaborador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario umongegds@gmail.com (ID: 1)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 200.5606ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 203.5095ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: umongegds@gmail.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Cargando página principal del dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 👤 ID del usuario actual: 1
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 23.3485ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 26.3589ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 23.7697ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 26.6199ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 25.5166ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 28.3947ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 23.0634ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 25.9457ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
📊 Módulo Dashboard cargado correctamente
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Dashboard cargado exitosamente
✅ Evento de formulario de nueva nota configurado
✅ Evento de formulario de nuevo anuncio configurado
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.8235ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.1651ms - 200
📊 Dashboard - Inicializando módulo principal
📊 Cargando alertas de stock...
📊 Cargando estadísticas de inventario total...
🏆 Cargando información del top vendedor...
👥 Cargando información de usuarios conectados...
📝 Cargando notas rápidas...
📢 Cargando anuncios del sistema...
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.AnunciosService: Information: Obteniendo anuncios desde la API
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.AnunciosService: Information: 🌐 URL construida: https://localhost:7273/api/Anuncios
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando top vendedor desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener top vendedor
API.Controllers.AnunciosController: Information: 🔔 === OBTENIENDO ANUNCIOS ===
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/top-vendedor
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[AnuncioId], [a].[UsuarioCreadorId], [u].[NombreUsuario] AS [NombreCreador], [a].[Titulo], [a].[Contenido], [a].[TipoAnuncio], [a].[Prioridad], [a].[EsImportante], [a].[Activo], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaVencimiento]
FROM [Anuncios] AS [a]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [a].[Activo] = CAST(1 AS bit)
ORDER BY [a].[EsImportante] DESC, [a].[FechaCreacion] DESC
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
API.Controllers.AnunciosController: Information: ✅ Se encontraron 1 anuncios
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando alertas de stock desde dashboard service
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener alertas de stock
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/alertas-stock
API.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo estadísticas de inventario total para dashboard
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaInicio_0='?' (DbType = DateTime2), @__fechaFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [f].[UsuarioCreadorId] AS [UsuarioId], [u].[NombreUsuario] AS [NombreVendedor], COUNT(*) AS [TotalVentas], COALESCE(SUM([f].[Total]), 0.0) AS [MontoTotal], AVG([f].[Total]) AS [PromedioVenta]
FROM [Facturas] AS [f]
INNER JOIN [Usuarios] AS [u] ON [f].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [f].[FechaFactura] >= @__fechaInicio_0 AND [f].[FechaFactura] <= @__fechaFin_1 AND [u].[EsTopVendedor] = CAST(1 AS bit)
GROUP BY [f].[UsuarioCreadorId], [u].[NombreUsuario]
ORDER BY COUNT(*) DESC, COALESCE(SUM([f].[Total]), 0.0) DESC
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando estadísticas de inventario total desde dashboard service
API.Controllers.DashboardController: Information: 📊 Top vendedor: Ulises Monge Aguilar con 11 ventas por ₡3,094,872
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener inventario total
API.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.NotasRapidasService: Information: 🔧 NotasRapidasService inicializado. URL base API: https://localhost:7273
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[StockMinimo] - [p].[CantidadEnInventario] AS [Diferencia]
FROM [Productos] AS [p]
WHERE [p].[CantidadEnInventario] <= [p].[StockMinimo]
ORDER BY [p].[CantidadEnInventario]
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/inventario-total
API.Controllers.DashboardController: Information: 📊 Alertas encontradas: 9 total, 7 agotados, 2 críticos
GestionLlantera.Web.Services.NotasRapidasService: Information: Obteniendo notas para usuario: 1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Services.NotasRapidasService: Information: 🌐 URL construida: https://localhost:7273/api/notasrapidas/usuario/1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/notasrapidas/usuario/1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.2268ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/notasrapidas/usuario/1
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 35.0095ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.3977ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","ultimaSesion":"2025-08-13T23:44:07.06","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 47.6574ms - 200
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
API.Controllers.DashboardController: Information: 📊 Obteniendo resumen de inventario total para dashboard
GestionLlantera.Web.Services.AnunciosService: Information: Respuesta de anuncios recibida: {"success":true,"anuncios":[{"anuncioId":6,"usuarioCreadorId":4,"nombreCreador":"Julissa Mejias","titulo":"Nota de Prueba","contenido":"Hay que limpiar hoy","tipoAnuncio":"Mantenimiento","prioridad":"Normal","esImportante":true,"activo":true,"fechaCreacion":"2025-08-06T21:44:12.386021","fechaModificacion":null,"fechaVencimiento":"2025-08-07T00:00:00","estaVencido":true}]}
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) COUNT(*) AS [TotalProductos], COALESCE(SUM([t].[CantidadEnInventario]), 0) AS [TotalCantidad], COALESCE(SUM(CAST([t].[CantidadEnInventario] AS decimal(10,2)) * [t].[Precio]), 0.0) AS [ValorTotalInventario], COUNT(CASE
    WHEN [t].[CantidadEnInventario] > 0 THEN 1
END) AS [ProductosActivos], COUNT(CASE
    WHEN [t].[CantidadEnInventario] = 0 THEN 1
END) AS [ProductosAgotados]
FROM (
    SELECT [p].[CantidadEnInventario], [p].[Precio], 1 AS [Key]
    FROM [Productos] AS [p]
) AS [t]
GROUP BY [t].[Key]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.6822ms - 200
API.Controllers.DashboardController: Information: 📊 Inventario total: ₡831,400, 11 productos, 26 unidades
API.Controllers.NotasRapidasController: Information: Obteniendo notas para usuario: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 14.1424ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 48.6259ms - 200
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [n].[NotaId], [n].[UsuarioId], [n].[Titulo], [n].[Contenido], [n].[Color], [n].[EsFavorita], [n].[FechaCreacion], [n].[FechaModificacion]
FROM [NotasRapidas] AS [n]
WHERE [n].[UsuarioId] = @__usuarioId_0 AND [n].[Eliminada] = CAST(0 AS bit)
ORDER BY [n].[EsFavorita] DESC, [n].[FechaModificacion] DESC
GestionLlantera.Web.Services.AnunciosService: Information: ✅ 1 anuncios obtenidos correctamente
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 22.7877ms - 200
👥 Mostrando datos de usuarios conectados: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
✅ Panel de usuarios conectados (bottom) actualizado
⚠️ Botón de usuarios conectados del sidebar no encontrado
✅ Usuarios conectados mostrados correctamente
✅ Usuarios conectados cargados correctamente: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
📢 Mostrando anuncios: (1) [{…}]
👤 UserId obtenido desde meta tag: 1
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de top vendedor recibida: {"success":true,"vendedor":"Ulises Monge Aguilar","totalVentas":11,"montoTotal":3094872.10,"promedioVenta":281352.009090,"mensaje":"Ulises Monge Aguilar lidera con 11 ventas"}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 32.8758ms - 200
🔍 Verificando permisos anuncio: {anuncioId: 6, usuarioCreadorId: 4, currentUserId: 1, esCreador: false}
✅ Anuncios mostrados correctamente
✅ Anuncios cargados correctamente: (1) [{…}]
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Top vendedor obtenido correctamente
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de inventario total recibida: {"success":true,"valorTotal":831400.0000,"totalProductos":11,"totalCantidad":26,"productosActivos":4,"productosAgotados":7,"mensaje":"11 productos en inventario"}
🏆 Mostrando datos del top vendedor: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 11, montoTotal: 3094872.1, promedioVenta: 281352.00909, …}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 41.2002ms - 200
✅ Top vendedor mostrado correctamente
✅ Top vendedor cargado correctamente: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 11, montoTotal: 3094872.1, promedioVenta: 281352.00909, …}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Estadísticas de inventario total obtenidas correctamente
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta recibida: {"success":true,"totalAlertas":9,"productosAgotados":7,"productosCriticos":2,"productos":[{"productoId":20,"nombreProducto":"Llanta Agregar Marca Agrega Modelo","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1016,"nombreProducto":"Llanta Kumho Mobile","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1017,"nombreProducto":"Llanta Test","cantidadEnInventario":0,"stockMinimo":2,"diferencia":2},{"productoId":1018,"nombreProducto":"Llanta Firestone Extreme","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1021,"nombreProducto":"Llanta Kumho Miller","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1022,"nombreProducto":"Producto Ordenando URL API","cantidadEnInventario":0,"stockMinimo":1,"diferencia":1},{"productoId":1023,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":17,"nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","cantidadEnInventario":1,"stockMinimo":1,"diferencia":0},{"productoId":1024,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":5,"stockMinimo":5,"diferencia":0}],"mensaje":"Productos requieren atención"}
📡 Respuesta del servidor (inventario): 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 21.5837ms - 200
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Alertas de stock obtenidas correctamente
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 37.7144ms - 200
📡 Respuesta del servidor: 200
✅ Datos de alertas recibidos: {success: true, data: {…}}
📊 Actualizando vista con datos: {success: true, totalAlertas: 9, productosAgotados: 7, productosCriticos: 2, productos: Array(9), …}
✅ Vista de alertas de stock actualizada correctamente
✅ Datos de inventario total recibidos: {success: true, data: {…}}
📊 Actualizando tarjeta de inventario total: {success: true, valorTotal: 831400, totalProductos: 11, totalCantidad: 26, productosActivos: 4, …}
✅ Valor total actualizado: ₡831 400
✅ Detalle actualizado: 11 (26 unidades)
📝 Mostrando notas rápidas: (2) [{…}, {…}]
✅ Notas rápidas mostradas correctamente
✅ Notas rápidas cargadas correctamente: (2) [{…}, {…}]
📊 Inicializando eventos de formularios...
🔄 Configurando refresco automático...
✅ Dashboard inicializado correctamente
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.1826ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.0913ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","ultimaSesion":"2025-08-13T23:44:07.06","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
⚠️ Botón de usuarios conectados del sidebar no encontrado
✅ Panel de usuarios conectados (sidebar) actualizado
🧹 Recursos de sidebar usuarios limpiados
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 === ACCESO AL MÓDULO DE FACTURACIÓN ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Usuario autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Nombre de usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔍 Obteniendo información del usuario...
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Claims disponibles:
GestionLlantera.Web.Controllers.FacturacionController: Information:    - JwtToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiVWxpc2VzIE1vbmdlIEFndWlsYXIiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ1bW9uZ2VnZHNAZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIxIiwidXNlcklkIjoiMSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6IkNvbGFib3JhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIkluaWNpYXIgSW52ZW50YXJpbyIsIlZlciBGYWN0dXJhY2nDs24iLCJWZXIgUHJvZHVjdG9zIiwiRWRpdGFyRmFjdHVyYXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIiwiTWVudV9JbnZlbnRhcmlvIiwiU3ViX01lbnVfVmVyUHJvZHVjdG9zIiwiU3ViX01lbnVfUHJvZ3JhbWFySW52ZW50YXJpbyIsIlN1Yl9NZW51X0hpc3RvcmlhbEludmVudGFyaW8iLCJNZW51X1ZlbnRhcyIsIlN1Yl9NZW51X0ZhY3R1cmFjacOzbiIsIlN1Yl9NZW51X0VudHJlZ2FzUGVuZGllbnRlcyIsIlZlciBIaXN0b3JpYWwgSW52ZW50YXJpb3MiLCJWZXIgRGV0YWxsZSBQcm9kdWN0byJdLCJleHAiOjE3NTUxNTM4NDYsImlzcyI6IlR1Y28uQVBJIiwiYXVkIjoiVHVjby5DbGllbnQifQ.Lwlv99Cs6R6lOrmXlSM9GhLQ7vA8OsjQTaM4RLKj5oQ
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: umongegds@gmail.com
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 1
GestionLlantera.Web.Controllers.FacturacionController: Information:    - userId: 1
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Colaborador
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Facturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Iniciar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: EditarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Menu_Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_VerProductos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_ProgramarInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_HistorialInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Menu_Ventas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Sub_Menu_EntregasPendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Historial Inventarios
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Detalle Producto
GestionLlantera.Web.Controllers.FacturacionController: Information:    - exp: 1755153846
GestionLlantera.Web.Controllers.FacturacionController: Information:    - iss: Tuco.API
GestionLlantera.Web.Controllers.FacturacionController: Information:    - aud: Tuco.Client
GestionLlantera.Web.Controllers.FacturacionController: Information: NameIdentifier claim: 1
GestionLlantera.Web.Controllers.FacturacionController: Information: Name claim: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information: Email claim: umongegds@gmail.com
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ ID parseado de NameIdentifier: 1
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === VERIFICANDO PERMISOS DIRECTAMENTE DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos extraídos del token: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos encontrados en token: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 1.1394ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 4.0608ms - 200
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === PERMISOS VALIDADOS DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCrearFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCompletarFacturas: False
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeEditarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeAnularFacturas: False
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 esAdmin: False
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Configuración enviada al frontend: {"Usuario":{"usuarioId":1,"id":1,"nombre":"Ulises Monge Aguilar","nombreUsuario":"Ulises Monge Aguilar","email":"umongegds@gmail.com"},"Permisos":{"puedeCrearFacturas":true,"puedeCompletarFacturas":false,"puedeEditarFacturas":true,"puedeAnularFacturas":false,"esAdmin":false},"FechaActual":"2025-08-13","HoraActual":"23:44","TokenDisponible":true}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 24.2806ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 27.4621ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 22.5864ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 25.7223ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 50 notificaciones para el usuario 1
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 23.8205ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 26.8517ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 21791 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 22.7463ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 25.947ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
🖨️ Módulo de impresión térmica cargado correctamente
✅ Sistema de zoom simplificado cargado
📋 Funciones de proformas y detalles exportadas globalmente
📋 Funciones de facturas pendientes exportadas globalmente
📋 Módulo de filtros de proformas (Frontend) cargado correctamente
✅ verDetalleProducto disponible desde facturacion.js
📦 Módulo InventarioFacturacion.js cargado correctamente
🎯 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🎯 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:44', tokenDisponible: true}
❌ No se encontraron permisos en la configuración
🔧 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🔧 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:44', tokenDisponible: true}
🔧 Usuario disponible: undefined
🔧 Permisos disponibles: undefined
🔧 Token disponible: undefined
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Inicializando módulo de facturación
🚀 === INICIO inicializarFacturacion ===
🔐 Cargando permisos del usuario...
🔍 === INICIANDO CARGA DE PERMISOS EN FACTURACIÓN ===
🔍 Configuración recibida: {
  "usuario": {
    "usuarioId": 1,
    "id": 1,
    "nombre": "Ulises Monge Aguilar",
    "nombreUsuario": "Ulises Monge Aguilar",
    "email": "umongegds@gmail.com"
  },
  "permisos": {
    "puedeCrearFacturas": true,
    "puedeCompletarFacturas": false,
    "puedeEditarFacturas": true,
    "puedeAnularFacturas": false,
    "esAdmin": false
  },
  "fechaActual": "2025-08-13",
  "horaActual": "23:44",
  "tokenDisponible": true
}
🔐 === PERMISOS CARGADOS CORRECTAMENTE ===
🔐 puedeCrearFacturas: true
🔐 puedeCompletarFacturas: false
🔐 puedeEditarFacturas: true
🔐 puedeAnularFacturas: false
🔐 esAdmin: false
🎯 === CONFIGURANDO INTERFAZ SEGÚN PERMISOS ===
🎯 Permisos actuales del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: false, puedeEditarFacturas: true, puedeAnularFacturas: false, esAdmin: false}
🎯 puedeCompletarFacturas: false (tipo: boolean )
🎯 puedeCrearFacturas: true (tipo: boolean )
🎯 Evaluación de permisos:
🎯   - puedeCompletar (CompletarFacturas): false
🎯   - puedeCrear (CrearFacturas): true
📝 === INTERFAZ CONFIGURADA: COLABORADOR ===
📝 Botón: Amarillo - "Enviar Factura"
📝 Flujo: Factura pendiente SIN ajuste de stock
📋 Botón Facturas Pendientes oculto - usuario sin permisos de completar
🚀 Inicializando modales...
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
🚀 Configurando eventos...
🚀 Actualizando totales...
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
🚀 Iniciando carga de productos iniciales...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 1
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
✅ Facturación inicializada correctamente
🚀 === FIN inicializarFacturacion ===
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn w-100 btn-warning btn-outline-secondary
🎯 Deshabilitado: true
🎯 Texto: Enviar Factura
🎯 Título: Agrega productos y selecciona un cliente
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: umongegds@gmail.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 1
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Colaborador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_VerProductos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_HistorialInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Menu_Ventas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Sub_Menu_EntregasPendientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Historial Inventarios
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Detalle Producto
API.Controllers.InventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153846
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 1
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 1 tiene 0 notificaciones no leídas
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerCostos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerUtilidades': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Ulises Monge Aguilar - VerCostos: False, VerUtilidades: False
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 40.3967ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 44.4395ms - 200
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 64.1491ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 67.7068ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10152 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 1, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 1
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19272 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
📋 === ABRIENDO MODAL DE PROFORMAS ===
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.273ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 8.2019ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":1,"nombreUsuario":"Ulises Monge Aguilar","ultimaSesion":"2025-08-13T23:44:07.06","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
⚠️ Botón de usuarios conectados del sidebar no encontrado
✅ Panel de usuarios conectados (sidebar) actualizado
📋 *** MODAL DE PROFORMAS COMPLETAMENTE VISIBLE ***
📋 Elementos disponibles en el DOM:
📋 - Input búsqueda: 1
📋 - Select estado: 1
📋 - Tabla body: 1
📋 - Loading: 1
📋 - Content: 1
📅 Ejecutando verificación automática de vencimiento...
📅 === VERIFICANDO VENCIMIENTO AUTOMÁTICAMENTE ===
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📅 Verificando vencimiento de proformas desde controlador Web
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Administrar Proformas'
ValidarPermisoAsync: Information: 🔍 Usuario: Ulises Monge Aguilar
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
ValidarPermisoAsync: Information: 🔍 Acción: VerificarVencimientoProformas
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 1
ValidarPermisoAsync: Information: 🔍 Es administrador: False
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Administrar Proformas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Administrar Proformas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Administrar Proformas': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Administrar Proformas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: False
ValidarPermisoAsync: Warning: 🚫 PERMISO DENEGADO - Usuario: Ulises Monge Aguilar, Permiso: Administrar Proformas
GestionLlantera.Web.Controllers.FacturacionController: Error: ❌ Error del API verificando vencimiento: Forbidden - {"message":"Solo usuarios con permiso 'Administrar Proformas' pueden verificar vencimiento","permisoRequerido":"Administrar Proformas","tienePermiso":false,"usuario":"Ulises Monge Aguilar","esAdministrador":false,"userId":1}
📅 Resultado verificación automática: {success: false, message: 'Error del servidor al verificar vencimiento'}
⚠️ Error en verificación automática: Error del servidor al verificar vencimiento
✅ Inicializando filtros de proformas...
🔍 === INICIALIZANDO FILTROS DE PROFORMAS (FRONTEND) ===
🔍 Configurando eventos de filtrado...
✅ Evento de búsqueda configurado
✅ Evento de estado configurado
✅ Botón limpiar configurado
✅ Evento de proformas por página configurado
📋 === CARGANDO TODAS LAS PROFORMAS ===
✅ Filtros de proformas inicializados correctamente
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Solicitud de proformas desde el controlador Web
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Parámetros: Estado=(null), Página=1, Tamaño=1000
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.FacturacionService: Information: 📋 === OBTENIENDO PROFORMAS DESDE SERVICIO ===
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Parámetros: Estado=(null), Página=1, Tamaño=1000
GestionLlantera.Web.Services.FacturacionService: Information: 📋 URL construida: https://localhost:7273/api/Facturacion/proformas?pagina=1&tamano=1000
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Ver Facturación'
ValidarPermisoAsync: Information: 🔍 Usuario: Ulises Monge Aguilar
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
ValidarPermisoAsync: Information: 🔍 Acción: ObtenerProformas
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 1
ValidarPermisoAsync: Information: 🔍 Es administrador: False
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Ver Facturación'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Facturación': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Ulises Monge Aguilar, Permiso: Ver Facturación
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
API.Controllers.FacturacionController: Information: 📋 === OBTENIENDO PROFORMAS CON FILTROS ===
API.Controllers.FacturacionController: Information: 📋 Parámetros recibidos: Estado=(null), BusquedaGeneral=(null), Busqueda=(null), Página=1, Tamaño=1000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
WHERE [f].[TipoDocumento] = N'Proforma'
API.Controllers.FacturacionController: Information: 📋 Total de proformas sin filtros: 15
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
WHERE [f].[TipoDocumento] = N'Proforma'
API.Controllers.FacturacionController: Information: 📋 Total final después de todos los filtros: 15
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[NumeroFactura], [t].[ClienteId], [t].[NombreCliente], [t].[IdentificacionCliente], [t].[TelefonoCliente], [t].[EmailCliente], [t].[DireccionCliente], [t].[FechaFactura], [t].[FechaVencimiento], [t].[Subtotal], [t].[DescuentoGeneral], [t].[PorcentajeImpuesto], COALESCE([t].[MontoImpuesto], 0.0), [t].[Total], [t].[Estado], [t].[TipoDocumento], [t].[MetodoPago], [t].[Observaciones], [t].[UsuarioCreadorId], [u].[NombreUsuario], [t].[FechaCreacion], [t].[FechaActualizacion], [u].[UsuarioID], [d].[DetalleFacturaId], [d].[ProductoId], [d].[NombreProducto], [d].[DescripcionProducto], [d].[Cantidad], [d].[PrecioUnitario], [d].[PorcentajeDescuento], [d].[MontoDescuento], [d].[Subtotal]
FROM (
    SELECT [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    WHERE [f].[TipoDocumento] = N'Proforma'
    ORDER BY [f].[FechaCreacion] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Usuarios] AS [u] ON [t].[UsuarioCreadorId] = [u].[UsuarioID]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FechaCreacion] DESC, [t].[FacturaId], [u].[UsuarioID]
API.Controllers.FacturacionController: Information: ✅ Se obtuvieron 15 proformas de 15 total
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Respuesta del API recibida exitosamente
GestionLlantera.Web.Services.FacturacionService: Information: 📋 API confirmó éxito en obtener proformas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio: Success=True, Message=Se encontraron 15 proformas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Procesando respuesta del API de proformas
📋 Respuesta del servidor: {success: true, proformas: Array(15), totalProformas: 15, pagina: 1, tamano: 1000, …}
✅ Proformas cargadas: 15
🔍 === APLICANDO FILTROS LOCALMENTE ===
🔍 Total proformas: 15
🔍 Filtros: {texto: '', estado: 'todos'}
🔍 Proformas filtradas: 15
📋 === MOSTRANDO PROFORMAS PAGINADAS ===
📋 Página actual: 1
📋 Proformas por página: 20
📋 Total páginas: 1
📋 Mostrando proformas: 0 a 20
📋 Proformas en esta página: 15
📋 === MOSTRANDO PROFORMAS EN TABLA ===
📋 Proformas a mostrar: 15
🔧 Configurando eventos de botones de proformas...
✅ Eventos de botones configurados
✅ Proformas mostradas en tabla
🖼️ Procesando imágenes para modal de producto: Llanta Continental Urban
🖼️ URL original en modal: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final en modal: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🛒 === INICIO AGREGAR PRODUCTO ===
🛒 Producto: Llanta Continental Urban
🛒 Cantidad: 1
🛒 Precio base: 33600
🛒 Stock disponible: 12
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: false}
✅ Producto agregado exitosamente
🛒 === FIN AGREGAR PRODUCTO ===
🧹 Limpiando eventos del modal de producto
El subproceso 29928 terminó con código 0 (0x0).
👥 Buscando clientes: "ju"
GestionLlantera.Web.Services.ClientesService: Information: 🔐 Token JWT configurado para buscar clientes
GestionLlantera.Web.Services.ClientesService: Information: 🌐 URL construida: https://localhost:7273/api/Clientes/buscar?termino=ju
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Clientes/buscar?termino=ju
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Clientes/buscar?termino=ju
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Clientes': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'Ver Clientes'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Ver Facturación': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Ver Facturación'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
API.Controllers.ClientesController: Information: 🔍 Buscando clientes con término: ju
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_1='?' (DbType = Int32), @__termino_0='?' (Size = 100) (DbType = AnsiString), @__termino_0_1='?' (Size = 15) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [c].[ClienteID], [c].[Contacto], [c].[Direccion], [c].[Email], [c].[NombreCliente], [c].[Telefono], [c].[UsuarioID]
FROM [Clientes] AS [c]
WHERE (@__termino_0 LIKE '') OR CHARINDEX(@__termino_0, [c].[NombreCliente]) > 0 OR (([c].[Email] IS NOT NULL) AND ((@__termino_0 LIKE '') OR CHARINDEX(@__termino_0, [c].[Email]) > 0)) OR (([c].[Telefono] IS NOT NULL) AND ((@__termino_0_1 LIKE '') OR CHARINDEX(@__termino_0_1, [c].[Telefono]) > 0)) OR (([c].[Contacto] IS NOT NULL) AND ((@__termino_0 LIKE '') OR CHARINDEX(@__termino_0, [c].[Contacto]) > 0))
ORDER BY [c].[NombreCliente]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 30.7367ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 33.9425ms - 200
GestionLlantera.Web.Services.ClientesService: Information: 🔍 Búsqueda de clientes completada: 391 caracteres
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: true, puedeFinalizarVenta: true, disabled: false, limpiarDisabled: false}
Cliente seleccionado: {id: 3, nombre: 'Julissa Mejias', email: 'jmejias@ticodevcr.com', telefono: '+506 62828588', contacto: '123', …}
📋 === DEPURACIÓN CLIENTE SELECCIONADO ===
📋 Cliente completo: {id: 3, nombre: 'Julissa Mejias', email: 'jmejias@ticodevcr.com', telefono: '+506 62828588', contacto: '123', …}
📋 Propiedades disponibles: (7) ['id', 'nombre', 'email', 'telefono', 'contacto', 'identificacion', 'direccion']
📋 Factura pendiente actual: null
📋 Proforma original para conversión: undefined
📋 Ocultando información especial
🎯 === CONFIGURANDO MODAL SEGÚN PERMISOS ===
🎯 Permisos del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: false, puedeEditarFacturas: true, puedeAnularFacturas: false, esAdmin: false}
🎯 puedeCompletarFacturas: false
🎯 puedeCrearFacturas: true
🎯 esAdmin: false
🎯 Es conversión de proforma: false
🎯 Es factura pendiente: false
🎯 Botón de proforma mostrado - No es factura pendiente
📝 Modal configurado para colaborador - Envío a caja SIN ajuste de stock
📋 Datos mapeados para formulario: {nombre: 'Julissa Mejias', cedula: '123', telefono: '+506 62828588', email: 'jmejias@ticodevcr.com', direccion: 'moin'}
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn btn-warning
🎯 Deshabilitado: false
🎯 Texto: 
                    
                    Enviar a Caja
                
🎯 Título: Crear factura pendiente y enviar a caja para procesamiento de pago (sin ajuste de stock)
🎯 Botón Proforma Visible: false
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
🔍 === PROCESANDO VENTA FINAL ===
🔍 Es pago múltiple: false
🔍 Detalles de pago actuales: (0) []
🔍 Es factura pendiente: false
🔍 Factura ID: null
🆕 Creando nueva factura
🆕 === CREANDO NUEVO DOCUMENTO ===
🆕 Tipo de documento: Factura
🆕 Es conversión de proforma: false
🔐 === VERIFICACIÓN DE PERMISOS ===
🔐 puedeCompletarFacturas: false
🔐 puedeCrearFacturas: true
🔐 tipoDocumento: Factura
📝 Procesando como colaborador - Factura pendiente para caja SIN ajuste de stock
📋 Estado determinado: {tipoDocumento: 'Factura', estadoFactura: 'Pendiente', fechaVencimiento: null, debeImprimir: false, debeAjustarInventario: false, …}
👤 === OBTENIENDO USUARIO ACTUAL EN FACTURACIÓN ===
👤 facturaConfig disponible: true
👤 Usuario encontrado en facturaConfig: {usuarioId: 1, id: 1, nombre: 'Ulises Monge Aguilar', nombreUsuario: 'Ulises Monge Aguilar', email: 'umongegds@gmail.com'}
👤 Tipo de usuario obtenido: object
👤 Propiedades del usuario: (5) ['usuarioId', 'id', 'nombre', 'nombreUsuario', 'email']
👤 ID de usuario: 1
👤 Nombre de usuario: Ulises Monge Aguilar
👤 Usuario actual para documento: {usuario: {…}, usuarioId: 1}
📋 Datos de documento preparados: {clienteId: 3, nombreCliente: 'Julissa Mejias', identificacionCliente: '123', telefonoCliente: '+506 62828588', emailCliente: 'jmejias@ticodevcr.com', …}
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🧾 === INICIO CrearFactura ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🧾 Usuario: Ulises Monge Aguilar
GestionLlantera.Web.Controllers.FacturacionController: Information: 🧾 Autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Controllers.FacturacionController: Information: 🚀 Enviando factura usando servicio: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: 📊 Total productos: 1, Total: 37968
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Token JWT disponible: 1075 caracteres
GestionLlantera.Web.Services.FacturacionService: Information: 🧾 Creando factura usando servicio de facturación
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Factura recibida para procesamiento: {"FacturaId":0,"NumeroFactura":"","ClienteId":3,"NombreCliente":"Julissa Mejias","IdentificacionCliente":"123","TelefonoCliente":"+506 62828588","EmailCliente":"jmejias@ticodevcr.com","DireccionCliente":"moin","FechaFactura":"2025-08-14T05:44:24.638Z","FechaVencimiento":null,"Subtotal":33600.0,"DescuentoGeneral":0.0,"PorcentajeImpuesto":13.0,"MontoImpuesto":4368.0,"Total":37968.0,"Estado":"Pendiente","TipoDocumento":"Factura","MetodoPago":"efectivo","DetallesPago":[],"EsPagoMultiple":false,"Observaciones":"","UsuarioCreadorId":1,"UsuarioCreadorNombre":null,"FechaCreacion":"0001-01-01T00:00:00","FechaActualizacion":null,"DetallesFactura":[{"DetalleFacturaId":0,"FacturaId":0,"ProductoId":1019,"NombreProducto":"225/50/R18 Llanta Continental Urban","DescripcionProducto":"","Cantidad":1,"PrecioUnitario":33600.0,"PorcentajeDescuento":0.0,"MontoDescuento":0.0,"Subtotal":33600.0,"StockDisponible":0,"EsLlanta":false,"MedidaLlanta":null,"MarcaLlanta":null,"ModeloLlanta":null,"SubtotalSinDescuento":33600.0,"DescuentoCalculado":0.0,"SubtotalConDescuento":33600.0,"TieneDescuento":false,"StockSuficiente":false}],"SubtotalSinDescuento":33600.0,"MontoDescuentoTotal":0.0,"SubtotalConDescuento":33600.0,"ImpuestoCalculado":4368.0,"TotalCalculado":37968.0,"CantidadItems":1,"EsProforma":false}
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Propiedades de la factura recibida:
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FacturaId: 0
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   NumeroFactura: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   ClienteId: 3
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   NombreCliente: Julissa Mejias
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   IdentificacionCliente: 123
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   TelefonoCliente: +506 62828588
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   EmailCliente: jmejias@ticodevcr.com
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DireccionCliente: moin
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaFactura: 8/14/2025 5:44:24 AM
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaVencimiento: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Subtotal: 33600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DescuentoGeneral: 0
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   PorcentajeImpuesto: 13
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   MontoImpuesto: 4368
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Total: 37968
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Estado: Pendiente
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   TipoDocumento: Factura
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   MetodoPago: efectivo
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DetallesPago: []
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   EsPagoMultiple: False
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Observaciones: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   UsuarioCreadorId: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   UsuarioCreadorNombre: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaCreacion: 1/1/0001 12:00:00 AM
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   FechaActualizacion: 
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   DetallesFactura: [
  {
    "DetalleFacturaId": 0,
    "FacturaId": 0,
    "ProductoId": 1019,
    "NombreProduct...
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   SubtotalSinDescuento: 33600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   MontoDescuentoTotal: 0
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   SubtotalConDescuento: 33600
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   ImpuestoCalculado: 4368
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   TotalCalculado: 37968
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   CantidadItems: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   EsProforma: False
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Número de Factura generado: FAC-202508-468574
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 === DEBUGGING JWT TOKEN COMPLETO ===
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Payload JWT completo: {"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":"Ulises Monge Aguilar","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress":"umongegds@gmail.com","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":"1","userId":"1","http://schemas.microsoft.com/ws/2008/06/identity/claims/role":"Colaborador","Permission":["Crear Facturas","Iniciar Inventario","Ver Facturación","Ver Productos","EditarFacturas","Entregar Pendientes","Menu_Inventario","Sub_Menu_VerProductos","Sub_Menu_ProgramarInventario","Sub_Menu_HistorialInventario","Menu_Ventas","Sub_Menu_Facturación","Sub_Menu_EntregasPendientes","Ver Historial Inventarios","Ver Detalle Producto"],"exp":1755153846,"iss":"Tuco.API","aud":"Tuco.Client"}
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Propiedades disponibles en el token:
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Ulises Monge Aguilar
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: umongegds@gmail.com
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   userId: 1
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Colaborador
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   Permission: [
  "Crear Facturas",
  "Iniciar Inventario",
  "Ver Facturación",
  "Ver Productos",
  "EditarFacturas",
  "Entregar Pendientes",
  "Menu_Inventario",
  "Sub_Menu_VerProductos",
  "Sub_Menu_...
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   exp: 1755153846
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   iss: Tuco.API
GestionLlantera.Web.Services.FacturacionService: Information: 🔍   aud: Tuco.Client
GestionLlantera.Web.Services.FacturacionService: Information: 🔍 Permisos encontrados en campo 'Permission': [
  "Crear Facturas",
  "Iniciar Inventario",
  "Ver Facturación",
  "Ver Productos",
  "EditarFacturas",
  "Entregar Pendientes",
  "Menu_Inventario",
  "Sub_Menu_VerProductos",
  "Sub_Menu_ProgramarInventario",
  "Sub_Menu_HistorialInventario",
  "Menu_Ventas",
  "Sub_Menu_Facturación",
  "Sub_Menu_EntregasPendientes",
  "Ver Historial Inventarios",
  "Ver Detalle Producto"
]
GestionLlantera.Web.Services.FacturacionService: Information: 🔐 Permisos extraídos del token: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
GestionLlantera.Web.Services.FacturacionService: Information: ⚠️ Usuario sin permisos de CompletarFacturas - Estado: Pendiente
GestionLlantera.Web.Services.FacturacionService: Information: 🔐 Roles encontrados: Colaborador
GestionLlantera.Web.Services.FacturacionService: Information: 🔐 Permisos evaluados: Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Estado de factura asignado: Pendiente
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Validación de productos exitosa: se encontraron productos en la factura
GestionLlantera.Web.Services.FacturacionService: Information: 📤 JSON enviado a API: {"FacturaId":0,"NumeroFactura":"","ClienteId":3,"NombreCliente":"Julissa Mejias","IdentificacionCliente":"123","TelefonoCliente":"+506 62828588","EmailCliente":"jmejias@ticodevcr.com","DireccionCliente":"moin","FechaFactura":"2025-08-14T05:44:24","FechaVencimiento":null,"Subtotal":33600.0,"DescuentoGeneral":0.0,"PorcentajeImpuesto":13.0,"MontoImpuesto":4368.0,"Total":37968.0,"Estado":"Pendiente","TipoDocumento":"Factura","MetodoPago":"efectivo","DetallesPago":[],"EsPagoMultiple":false,"Observaciones":"","UsuarioCreadorId":1,"UsuarioCreadorNombre":null,"FechaCreacion":"0001-01-01T00:00:00","FechaActualizacion":null,"DetallesFactura":[{"DetalleFacturaId":0,"FacturaId":0,"ProductoId":1019,"NombreProducto":"225/50/R18 Llanta Continental Urban","DescripcionProducto":"","Cantidad":1,"PrecioUnitario":33600.0,"PorcentajeDescuento":0.0,"MontoDescuento":0.0,"Subtotal":33600.0,"StockDisponible":0,"EsLlanta":false,"MedidaLlanta":null,"MarcaLlanta":null,"ModeloLlanta":null,"SubtotalSinDescuento":33600.0,"DescuentoCalculado":0.0,"SubtotalConDescuento":33600.0,"TieneDescuento":false,"StockSuficiente":false}],"SubtotalSinDescuento":33600.0,"MontoDescuentoTotal":0.0,"SubtotalConDescuento":33600.0,"ImpuestoCalculado":4368.0,"TotalCalculado":37968.0,"CantidadItems":1,"EsProforma":false,"numeroFactura":"FAC-202508-468574","fechaCreacion":"2025-08-13T23:44:24","estado":"Pendiente","nombreCliente":"Julissa Mejias","detallesFactura":[{"DetalleFacturaId":0,"FacturaId":0,"ProductoId":1019,"NombreProducto":"225/50/R18 Llanta Continental Urban","DescripcionProducto":"","Cantidad":1,"PrecioUnitario":33600.0,"PorcentajeDescuento":0.0,"MontoDescuento":0.0,"Subtotal":33600.0,"StockDisponible":0,"EsLlanta":false,"MedidaLlanta":null,"MarcaLlanta":null,"ModeloLlanta":null,"SubtotalSinDescuento":33600.0,"DescuentoCalculado":0.0,"SubtotalConDescuento":33600.0,"TieneDescuento":false,"StockSuficiente":false}]}
GestionLlantera.Web.Services.FacturacionService: Information: 🌐 URL construida: https://localhost:7273/api/Facturacion/facturas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/Facturacion/facturas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/Facturacion/facturas
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'Crear Facturas'
ValidarPermisoAsync: Information: 🔍 Usuario: Ulises Monge Aguilar
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
ValidarPermisoAsync: Information: 🔍 Acción: CrearFactura
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 1
ValidarPermisoAsync: Information: 🔍 Es administrador: False
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'Crear Facturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'Crear Facturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'Crear Facturas': True
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 TIENE permiso 'Crear Facturas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Ulises Monge Aguilar, Permiso: Crear Facturas
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
API.Controllers.FacturacionController: Information: 💰 Usuario Ulises Monge Aguilar creando factura para cliente: Julissa Mejias
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'CompletarFacturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'CompletarFacturas': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.FacturacionController: Information: 📋 Usuario envió factura como PENDIENTE
API.Controllers.FacturacionController: Information: 🔐 Estado inicial determinado: Pendiente (Usuario puede completar: False, Estado enviado: Pendiente)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__tipoDocumento_0='?' (Size = 20), @__año_1='?' (DbType = Int32), @__mes_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
WHERE [f].[TipoDocumento] = @__tipoDocumento_0 AND DATEPART(year, [f].[FechaFactura]) = @__año_1 AND DATEPART(month, [f].[FechaFactura]) = @__mes_2
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 300), @p3='?' (Size = 200), @p4='?' (Size = 20), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (Size = 50), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 200), @p13='?' (Size = 50), @p14='?' (Size = 500), @p15='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p16='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p17='?' (Size = 20), @p18='?' (Size = 20), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Facturas] ([ClienteId], [DescuentoGeneral], [DireccionCliente], [EmailCliente], [Estado], [FechaActualizacion], [FechaCreacion], [FechaFactura], [FechaVencimiento], [IdentificacionCliente], [MetodoPago], [MontoImpuesto], [NombreCliente], [NumeroFactura], [Observaciones], [PorcentajeImpuesto], [Subtotal], [TelefonoCliente], [TipoDocumento], [Total], [UsuarioCreadorId])
OUTPUT INSERTED.[FacturaId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
API.Controllers.FacturacionController: Information: 💳 Detalle de pago único creado: efectivo - ₡37968.000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 500), @p2='?' (DbType = Int32), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (Size = 200), @p5='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime2), @p11='?' (Size = 50), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (Size = 300), @p14='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DetallesFactura] ([Cantidad], [DescripcionProducto], [FacturaId], [MontoDescuento], [NombreProducto], [PorcentajeDescuento], [PrecioUnitario], [ProductoId], [Subtotal])
OUTPUT INSERTED.[DetalleFacturaId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO [DetallesPago] ([FacturaId], [FechaPago], [MetodoPago], [Monto], [Observaciones], [Referencia])
OUTPUT INSERTED.[DetallePagoId]
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 51.7504ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 54.7775ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta de API: OK - {"success":true,"message":"Factura creada exitosamente en estado PENDIENTE","numeroFactura":"FAC-202508-000044","facturaId":1327}
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Número de factura extraído: FAC-202508-000044, ID: 1327
✅ Documento creado: {success: true, data: {…}, numeroFactura: 'FAC-202508-000044', facturaId: 1327, message: 'Factura creada exitosamente'}
📋 Factura pendiente - Mostrando modal de envío a cajas
📦 === ACTUALIZANDO VISTA POST-AJUSTE ===
🧹 Limpiando estado de búsqueda...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 2
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.InventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerCostos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerUtilidades': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Ulises Monge Aguilar - VerCostos: False, VerUtilidades: False
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 80.1038ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 83.0358ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10152 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 1, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 2
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19272 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
✅ Vista principal de productos actualizada
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
📋 === MODAL FACTURA PENDIENTE ===
📋 Datos recibidos: {success: true, data: {…}, numeroFactura: 'FAC-202508-000044', facturaId: 1327, message: 'Factura creada exitosamente'}
🔢 Número de factura extraído: FAC-202508-000044
📦 === ACTUALIZANDO VISTA POST-AJUSTE ===
🧹 Limpiando estado de búsqueda...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 3
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Ulises Monge Aguilar, Longitud: 1075
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
API.Controllers.InventarioController: Information: 🚀 Usuario: Ulises Monge Aguilar
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerCostos': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Ulises Monge Aguilar
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 1
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: False
API.ServicesAPI.PermisosService: Information: 🔍 Buscando en caché con key: permisos_usuario_1
API.ServicesAPI.PermisosService: Information: ✅ Permisos encontrados en caché para usuario 1
API.ServicesAPI.PermisosService: Information: 🔍 Total permisos del usuario: 15
API.ServicesAPI.PermisosService: Information: 🔍 Permisos del usuario: [Crear Facturas, Iniciar Inventario, Ver Facturación, Ver Productos, EditarFacturas, Entregar Pendientes, Menu_Inventario, Sub_Menu_VerProductos, Sub_Menu_ProgramarInventario, Sub_Menu_HistorialInventario, Menu_Ventas, Sub_Menu_Facturación, Sub_Menu_EntregasPendientes, Ver Historial Inventarios, Ver Detalle Producto]
API.ServicesAPI.PermisosService: Information: 🔍 Coincidencia exacta con 'VerUtilidades': False
API.ServicesAPI.PermisosService: Information: 🔍 Variaciones encontradas: []
API.ServicesAPI.PermisosService: Information: 🔍 RESULTADO FINAL: Usuario 1 NO TIENE permiso 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 === FIN VERIFICACIÓN PERMISO EN SERVICE ===
TienePermisoAsync: Information: 🔎 Resultado del servicio: False
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Ulises Monge Aguilar - VerCostos: False, VerUtilidades: False
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 46.5292ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 49.5733ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10152 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 1, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 3
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19272 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
✅ Vista principal de productos actualizada
El subproceso '.NET ThreadPool Worker' (34760) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34740) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30280) terminó con código 0 (0x0).
🧹 Recursos de sidebar usuarios limpiados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/logout
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/logout
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [s].[SesionID], [s].[EstaActiva], [s].[FechaHoraInicio], [s].[FechaInvalidacion], [s].[TokenHash], [s].[UsuarioID]
FROM [SesionUsuario] AS [s]
WHERE [s].[UsuarioID] = @__usuarioId_0 AND [s].[EstaActiva] = CAST(1 AS bit)
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [SesionUsuario] SET [EstaActiva] = @p0, [FechaHoraInicio] = @p1, [FechaInvalidacion] = @p2, [TokenHash] = @p3, [UsuarioID] = @p4
OUTPUT 1
WHERE [SesionID] = @p5;
AuthController: Information: ✅ Sesiones invalidadas para usuario ID: 1. Total: 1
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 16.2892ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 19.1647ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Sesión invalidada correctamente en la base de datos
GestionLlantera.Web.Controllers.AccountController: Information: Usuario cerró sesión
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
Error al cargar conteo: SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON {stack: `SyntaxError: Unexpected token '<', "<!DOCTYPE "... is not valid JSON`, message: `Unexpected token '<', "<!DOCTYPE "... is not valid JSON`}

CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
GestionLlantera.Web.Services.AuthService: Information: 🌐 URL construida: https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/auth/login
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/auth/login
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?' (Size = 100) (DbType = AnsiString)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[UsuarioID], [u].[Activo], [u].[Contrasena], [u].[Email], [u].[EsTopVendedor], [u].[FechaCreacion], [u].[FechaExpiracionToken], [u].[NombreUsuario], [u].[PropositoToken], [u].[Token]
FROM [Usuarios] AS [u]
WHERE [u].[Email] = @__request_Email_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [r].[NombreRol]
FROM [UsuarioRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RolId] = [r].[RolID]
WHERE [u].[UsuarioId] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [RolPermisos] AS [r]
INNER JOIN [Roles] AS [r0] ON [r].[RolID] = [r0].[RolID]
INNER JOIN [Permisos] AS [p] ON [r].[PermisoID] = [p].[PermisoID]
WHERE [r0].[NombreRol] = 'Administrador'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__usuario_UsuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [p].[NombrePermiso]
FROM [UsuarioPermiso] AS [u]
INNER JOIN [Permisos] AS [p] ON [u].[PermisoID] = [p].[PermisoID]
WHERE [u].[UsuarioID] = @__usuario_UsuarioId_0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 255), @p4='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [SesionUsuario] ([EstaActiva], [FechaHoraInicio], [FechaInvalidacion], [TokenHash], [UsuarioID])
OUTPUT INSERTED.[SesionID]
VALUES (@p0, @p1, @p2, @p3, @p4);
AuthController: Information: ✅ Sesión registrada para usuario zlktmbs334@tormails.com (ID: 4)
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 200.6271ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 203.6248ms - 200
GestionLlantera.Web.Controllers.AccountController: Information: Login exitoso para usuario: zlktmbs334@tormails.com
GestionLlantera.Web.Services.PermisosService: Information: 🧹 Limpiando caché completo de permisos
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Cargando página principal del dashboard
GestionLlantera.Web.Controllers.DashboardController: Information: 👤 ID del usuario actual: 4
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.3864ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 32.0913ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.4669ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.212ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 33.9703ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 37.308ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 28.0675ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 30.8591ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
📊 Módulo Dashboard cargado correctamente
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Dashboard cargado exitosamente
✅ Evento de formulario de nueva nota configurado
✅ Evento de formulario de nuevo anuncio configurado
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 34.9561ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 38.1958ms - 200
📊 Dashboard - Inicializando módulo principal
📊 Cargando alertas de stock...
📊 Cargando estadísticas de inventario total...
🏆 Cargando información del top vendedor...
👥 Cargando información de usuarios conectados...
📝 Cargando notas rápidas...
📢 Cargando anuncios del sistema...
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.AnunciosService: Information: Obteniendo anuncios desde la API
GestionLlantera.Web.Services.NotasRapidasService: Information: 🔧 NotasRapidasService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.AnunciosService: Information: 🌐 URL construida: https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.NotasRapidasService: Information: Obteniendo notas para usuario: 4
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Anuncios
GestionLlantera.Web.Services.NotasRapidasService: Information: 🌐 URL construida: https://localhost:7273/api/notasrapidas/usuario/4
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Anuncios
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/notasrapidas/usuario/4
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/notasrapidas/usuario/4
API.Controllers.AnunciosController: Information: 🔔 === OBTENIENDO ANUNCIOS ===
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[AnuncioId], [a].[UsuarioCreadorId], [u].[NombreUsuario] AS [NombreCreador], [a].[Titulo], [a].[Contenido], [a].[TipoAnuncio], [a].[Prioridad], [a].[EsImportante], [a].[Activo], [a].[FechaCreacion], [a].[FechaModificacion], [a].[FechaVencimiento]
FROM [Anuncios] AS [a]
INNER JOIN [Usuarios] AS [u] ON [a].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [a].[Activo] = CAST(1 AS bit)
ORDER BY [a].[EsImportante] DESC, [a].[FechaCreacion] DESC
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
API.Controllers.AnunciosController: Information: ✅ Se encontraron 1 anuncios
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando alertas de stock desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.345ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 15.3614ms - 200
API.Controllers.NotasRapidasController: Information: Obteniendo notas para usuario: 4
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.AnunciosService: Information: Respuesta de anuncios recibida: {"success":true,"anuncios":[{"anuncioId":6,"usuarioCreadorId":4,"nombreCreador":"Julissa Mejias","titulo":"Nota de Prueba","contenido":"Hay que limpiar hoy","tipoAnuncio":"Mantenimiento","prioridad":"Normal","esImportante":true,"activo":true,"fechaCreacion":"2025-08-06T21:44:12.386021","fechaModificacion":null,"fechaVencimiento":"2025-08-07T00:00:00","estaVencido":true}]}
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__usuarioId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [n].[NotaId], [n].[UsuarioId], [n].[Titulo], [n].[Contenido], [n].[Color], [n].[EsFavorita], [n].[FechaCreacion], [n].[FechaModificacion]
FROM [NotasRapidas] AS [n]
WHERE [n].[UsuarioId] = @__usuarioId_0 AND [n].[Eliminada] = CAST(0 AS bit)
ORDER BY [n].[EsFavorita] DESC, [n].[FechaModificacion] DESC
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener alertas de stock
GestionLlantera.Web.Services.AnunciosService: Information: ✅ 1 anuncios obtenidos correctamente
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/alertas-stock
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
📢 Mostrando anuncios: (1) [{…}]
👤 UserId obtenido desde meta tag: 4
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/alertas-stock
🔍 Verificando permisos anuncio: {anuncioId: 6, usuarioCreadorId: 4, currentUserId: 4, esCreador: true}
✅ Anuncios mostrados correctamente
✅ Anuncios cargados correctamente: (1) [{…}]
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando top vendedor desde dashboard service
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 18.0956ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener top vendedor
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 34.2918ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/top-vendedor
API.Controllers.DashboardController: Information: 📊 Obteniendo alertas de stock para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID] AS [ProductoId], [p].[NombreProducto], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[StockMinimo] - [p].[CantidadEnInventario] AS [Diferencia]
FROM [Productos] AS [p]
WHERE [p].[CantidadEnInventario] <= [p].[StockMinimo]
ORDER BY [p].[CantidadEnInventario]
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
📝 Mostrando notas rápidas: (2) [{…}, {…}]
API.Controllers.DashboardController: Information: 📊 Alertas encontradas: 9 total, 7 agotados, 2 críticos
GestionLlantera.Web.Controllers.DashboardController: Information: 📊 Obteniendo estadísticas de inventario total para dashboard
✅ Notas rápidas mostradas correctamente
✅ Notas rápidas cargadas correctamente: (2) [{…}, {…}]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/top-vendedor
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 13.8392ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 📊 Solicitando estadísticas de inventario total desde dashboard service
API.Controllers.DashboardController: Information: 📊 Obteniendo top vendedor para dashboard
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 22.6771ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener inventario total
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaInicio_0='?' (DbType = DateTime2), @__fechaFin_1='?' (DbType = DateTime2)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [f].[UsuarioCreadorId] AS [UsuarioId], [u].[NombreUsuario] AS [NombreVendedor], COUNT(*) AS [TotalVentas], COALESCE(SUM([f].[Total]), 0.0) AS [MontoTotal], AVG([f].[Total]) AS [PromedioVenta]
FROM [Facturas] AS [f]
INNER JOIN [Usuarios] AS [u] ON [f].[UsuarioCreadorId] = [u].[UsuarioID]
WHERE [f].[FechaFactura] >= @__fechaInicio_0 AND [f].[FechaFactura] <= @__fechaFin_1 AND [u].[EsTopVendedor] = CAST(1 AS bit)
GROUP BY [f].[UsuarioCreadorId], [u].[NombreUsuario]
ORDER BY COUNT(*) DESC, COALESCE(SUM([f].[Total]), 0.0) DESC
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta recibida: {"success":true,"totalAlertas":9,"productosAgotados":7,"productosCriticos":2,"productos":[{"productoId":20,"nombreProducto":"Llanta Agregar Marca Agrega Modelo","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":1016,"nombreProducto":"Llanta Kumho Mobile","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1017,"nombreProducto":"Llanta Test","cantidadEnInventario":0,"stockMinimo":2,"diferencia":2},{"productoId":1018,"nombreProducto":"Llanta Firestone Extreme","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1021,"nombreProducto":"Llanta Kumho Miller","cantidadEnInventario":0,"stockMinimo":5,"diferencia":5},{"productoId":1022,"nombreProducto":"Producto Ordenando URL API","cantidadEnInventario":0,"stockMinimo":1,"diferencia":1},{"productoId":1023,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":0,"stockMinimo":3,"diferencia":3},{"productoId":17,"nombreProducto":"Prueba de Stock 3 Despues de eliminar imagen","cantidadEnInventario":1,"stockMinimo":1,"diferencia":0},{"productoId":1024,"nombreProducto":"Llanta Dunlop Direzza","cantidadEnInventario":5,"stockMinimo":5,"diferencia":0}],"mensaje":"Productos requieren atención"}
API.Controllers.DashboardController: Information: 📊 Top vendedor: Ulises Monge Aguilar con 12 ventas por ₡3,132,840
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/inventario-total
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Alertas de stock obtenidas correctamente
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 10.9082ms - 200
📡 Respuesta del servidor: 200
✅ Datos de alertas recibidos: {success: true, data: {…}}
📊 Actualizando vista con datos: {success: true, totalAlertas: 9, productosAgotados: 7, productosCriticos: 2, productos: Array(9), …}
✅ Vista de alertas de stock actualizada correctamente
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/inventario-total
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 45.6033ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.8721ms - 200
API.Controllers.DashboardController: Information: 📊 Obteniendo resumen de inventario total para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:44:40.677","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 22.0872ms - 200
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) COUNT(*) AS [TotalProductos], COALESCE(SUM([t].[CantidadEnInventario]), 0) AS [TotalCantidad], COALESCE(SUM(CAST([t].[CantidadEnInventario] AS decimal(10,2)) * [t].[Precio]), 0.0) AS [ValorTotalInventario], COUNT(CASE
    WHEN [t].[CantidadEnInventario] > 0 THEN 1
END) AS [ProductosActivos], COUNT(CASE
    WHEN [t].[CantidadEnInventario] = 0 THEN 1
END) AS [ProductosAgotados]
FROM (
    SELECT [p].[CantidadEnInventario], [p].[Precio], 1 AS [Key]
    FROM [Productos] AS [p]
) AS [t]
GROUP BY [t].[Key]
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de top vendedor recibida: {"success":true,"vendedor":"Ulises Monge Aguilar","totalVentas":12,"montoTotal":3132840.10,"promedioVenta":261070.008333,"mensaje":"Ulises Monge Aguilar lidera con 12 ventas"}
API.Controllers.DashboardController: Information: 📊 Inventario total: ₡831,400, 11 productos, 26 unidades
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Top vendedor obtenido correctamente
👥 Mostrando datos de usuarios conectados: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
✅ Panel de usuarios conectados (bottom) actualizado
✅ Contador del sidebar actualizado: 1 usuarios
✅ Usuarios conectados mostrados correctamente
✅ Usuarios conectados cargados correctamente: {success: true, totalUsuarios: 1, totalSesiones: 1, usuarios: Array(1), mensaje: '1 usuario conectado'}
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8.82ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14.9588ms - 200
🏆 Mostrando datos del top vendedor: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 12, montoTotal: 3132840.1, promedioVenta: 261070.008333, …}
✅ Top vendedor mostrado correctamente
✅ Top vendedor cargado correctamente: {success: true, vendedor: 'Ulises Monge Aguilar', totalVentas: 12, montoTotal: 3132840.1, promedioVenta: 261070.008333, …}
GestionLlantera.Web.Services.DashboardService: Information: 📊 Respuesta de inventario total recibida: {"success":true,"valorTotal":831400.0000,"totalProductos":11,"totalCantidad":26,"productosActivos":4,"productosAgotados":7,"mensaje":"11 productos en inventario"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Estadísticas de inventario total obtenidas correctamente
📡 Respuesta del servidor (inventario): 200
✅ Datos de inventario total recibidos: {success: true, data: {…}}
📊 Actualizando tarjeta de inventario total: {success: true, valorTotal: 831400, totalProductos: 11, totalCantidad: 26, productosActivos: 4, …}
✅ Valor total actualizado: ₡831 400
✅ Detalle actualizado: 11 (26 unidades)
📊 Inicializando eventos de formularios...
🔄 Configurando refresco automático...
✅ Dashboard inicializado correctamente
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 5.0611ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.8444ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:44:40.677","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
🧹 Recursos de sidebar usuarios limpiados
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 === ACCESO AL MÓDULO DE FACTURACIÓN ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Usuario autenticado: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🛒 Nombre de usuario: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔍 Obteniendo información del usuario...
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Claims disponibles:
GestionLlantera.Web.Controllers.FacturacionController: Information:    - JwtToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiSnVsaXNzYSBNZWppYXMiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9lbWFpbGFkZHJlc3MiOiJ6bGt0bWJzMzM0QHRvcm1haWxzLmNvbSIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiNCIsInVzZXJJZCI6IjQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbmlzdHJhZG9yIiwiUGVybWlzc2lvbiI6WyJDcmVhciBGYWN0dXJhcyIsIlZlciBDb3N0b3MiLCJWZXIgVXRpbGlkYWRlcyIsIlByb2dyYW1hciBJbnZlbnRhcmlvIiwiR2VzdGlvbiBDb21wbGV0YSIsIkVkaXRhciBQcm9kdWN0b3MiLCJFbGltaW5hciBQcm9kdWN0b3MiLCJBanVzdGFyIFN0b2NrIiwiVmVyIFJlcG9ydGVzIiwiR2VzdGlvbiBVc3VhcmlvcyIsIlZlckNvc3RvcyIsIlZlclV0aWxpZGFkZXMiLCJQcm9ncmFtYXJJbnZlbnRhcmlvIiwiSW5pY2lhciBJbnZlbnRhcmlvIiwiQ29tcGxldGFyIEludmVudGFyaW8iLCJEZXNjYXJnYXIgUmVwb3J0ZXMiLCJWZXIgRmFjdHVyYWNpw7NuIiwiRWRpdGFyIENsaWVudGVzIiwiVmVyIFByb2R1Y3RvcyIsIkNvbXBsZXRhckZhY3R1cmFzIiwiRWRpdGFyRmFjdHVyYXMiLCJBbnVsYXJGYWN0dXJhcyIsIkNyZWFyIENsaWVudGVzIiwiVmVyIENsaWVudGVzIiwiRWxpbWluYXIgQ2xpZW50ZXMiLCJFbnRyZWdhciBQZW5kaWVudGVzIl0sImV4cCI6MTc1NTE1Mzg4MCwiaXNzIjoiVHVjby5BUEkiLCJhdWQiOiJUdWNvLkNsaWVudCJ9.RHDM_rWADve0HQ0IoSP-jQ8FDplYn1u8Lhp-VqfekG0
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier: 4
GestionLlantera.Web.Controllers.FacturacionController: Information:    - userId: 4
GestionLlantera.Web.Controllers.FacturacionController: Information:    - http://schemas.microsoft.com/ws/2008/06/identity/claims/role: Administrador
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Facturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Costos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Utilidades
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Programar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Gestion Completa
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Editar Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Eliminar Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ajustar Stock
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Reportes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Gestion Usuarios
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: VerCostos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: VerUtilidades
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: ProgramarInventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Iniciar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Completar Inventario
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Descargar Reportes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Facturación
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Editar Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Productos
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: CompletarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: EditarFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: AnularFacturas
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Crear Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Ver Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Eliminar Clientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - Permission: Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information:    - exp: 1755153880
GestionLlantera.Web.Controllers.FacturacionController: Information:    - iss: Tuco.API
GestionLlantera.Web.Controllers.FacturacionController: Information:    - aud: Tuco.Client
GestionLlantera.Web.Controllers.FacturacionController: Information: NameIdentifier claim: 4
GestionLlantera.Web.Controllers.FacturacionController: Information: Name claim: Julissa Mejias
GestionLlantera.Web.Controllers.FacturacionController: Information: Email claim: zlktmbs334@tormails.com
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ ID parseado de NameIdentifier: 4
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === VERIFICANDO PERMISOS DIRECTAMENTE DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos extraídos del token: Crear Facturas, Ver Costos, Ver Utilidades, Programar Inventario, Gestion Completa, Editar Productos, Eliminar Productos, Ajustar Stock, Ver Reportes, Gestion Usuarios, VerCostos, VerUtilidades, ProgramarInventario, Iniciar Inventario, Completar Inventario, Descargar Reportes, Ver Facturación, Editar Clientes, Ver Productos, CompletarFacturas, EditarFacturas, AnularFacturas, Crear Clientes, Ver Clientes, Eliminar Clientes, Entregar Pendientes
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 Permisos encontrados en token: Crear Facturas, Ver Costos, Ver Utilidades, Programar Inventario, Gestion Completa, Editar Productos, Eliminar Productos, Ajustar Stock, Ver Reportes, Gestion Usuarios, VerCostos, VerUtilidades, ProgramarInventario, Iniciar Inventario, Completar Inventario, Descargar Reportes, Ver Facturación, Editar Clientes, Ver Productos, CompletarFacturas, EditarFacturas, AnularFacturas, Crear Clientes, Ver Clientes, Eliminar Clientes, Entregar Pendientes
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Permisos/es-administrador
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 1.1353ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 4.0995ms - 200
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 === PERMISOS VALIDADOS DESDE TOKEN JWT ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCrearFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeCompletarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeEditarFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 puedeAnularFacturas: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 🔐 esAdmin: True
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Configuración enviada al frontend: {"Usuario":{"usuarioId":4,"id":4,"nombre":"Julissa Mejias","nombreUsuario":"Julissa Mejias","email":"zlktmbs334@tormails.com"},"Permisos":{"puedeCrearFacturas":true,"puedeCompletarFacturas":true,"puedeEditarFacturas":true,"puedeAnularFacturas":true,"esAdmin":true},"FechaActual":"2025-08-13","HoraActual":"23:44","TokenDisponible":true}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.119ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 33.0753ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 29.1064ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 32.0974ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: Obteniendo notificaciones del usuario...
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/mis-notificaciones
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Obteniendo notificaciones para usuario ID: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_1) [n].[NotificacionId], [n].[Titulo], [n].[Mensaje], [n].[Tipo], [n].[Icono], [n].[Leida], [n].[FechaCreacion], [n].[FechaLectura], [n].[UrlAccion], [n].[EntidadTipo], [n].[EntidadId]
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[EsVisible] = CAST(1 AS bit)
ORDER BY [n].[FechaCreacion] DESC
API.Controllers.NotificacionesController: Information: Se encontraron 0 notificaciones para el usuario 4
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 30.1108ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 32.9469ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: Respuesta API: OK
GestionLlantera.Web.Services.NotificacionService: Information: Notificaciones recibidas: 2 caracteres
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 39.398ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 42.3314ms - 200
👥 Módulo SidebarUsuarios cargado correctamente
🖨️ Módulo de impresión térmica cargado correctamente
✅ Sistema de zoom simplificado cargado
📋 Funciones de proformas y detalles exportadas globalmente
📋 Funciones de facturas pendientes exportadas globalmente
📋 Módulo de filtros de proformas (Frontend) cargado correctamente
✅ verDetalleProducto disponible desde facturacion.js
📦 Módulo InventarioFacturacion.js cargado correctamente
🎯 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🎯 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:44', tokenDisponible: true}
❌ No se encontraron permisos en la configuración
🔧 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
🔧 Configuración completa: {usuario: {…}, permisos: {…}, fechaActual: '2025-08-13', horaActual: '23:44', tokenDisponible: true}
🔧 Usuario disponible: undefined
🔧 Permisos disponibles: undefined
🔧 Token disponible: undefined
👥 DOM cargado, inicializando sidebar usuarios...
🚀 Inicializando módulo de facturación
🚀 === INICIO inicializarFacturacion ===
🔐 Cargando permisos del usuario...
🔍 === INICIANDO CARGA DE PERMISOS EN FACTURACIÓN ===
🔍 Configuración recibida: {
  "usuario": {
    "usuarioId": 4,
    "id": 4,
    "nombre": "Julissa Mejias",
    "nombreUsuario": "Julissa Mejias",
    "email": "zlktmbs334@tormails.com"
  },
  "permisos": {
    "puedeCrearFacturas": true,
    "puedeCompletarFacturas": true,
    "puedeEditarFacturas": true,
    "puedeAnularFacturas": true,
    "esAdmin": true
  },
  "fechaActual": "2025-08-13",
  "horaActual": "23:44",
  "tokenDisponible": true
}
🔐 === PERMISOS CARGADOS CORRECTAMENTE ===
🔐 puedeCrearFacturas: true
🔐 puedeCompletarFacturas: true
🔐 puedeEditarFacturas: true
🔐 puedeAnularFacturas: true
🔐 esAdmin: true
🎯 === CONFIGURANDO INTERFAZ SEGÚN PERMISOS ===
🎯 Permisos actuales del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: true, puedeEditarFacturas: true, puedeAnularFacturas: true, esAdmin: true}
🎯 puedeCompletarFacturas: true (tipo: boolean )
🎯 puedeCrearFacturas: true (tipo: boolean )
🎯 Evaluación de permisos:
🎯   - puedeCompletar (CompletarFacturas): true
🎯   - puedeCrear (CrearFacturas): true
👑 === INTERFAZ CONFIGURADA: USUARIO CON PERMISO COMPLETAR ===
👑 Botón: Verde - "Completar Venta"
👑 Flujo: Factura pagada inmediatamente con ajuste de stock
📋 Botón Facturas Pendientes habilitado para usuario con permisos de completar
🚀 Inicializando modales...
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
🚀 Configurando eventos...
🚀 Actualizando totales...
🔄 Estado botón finalizar actualizado: {tieneProductos: false, tieneCliente: false, puedeFinalizarVenta: false, disabled: true, limpiarDisabled: true}
🚀 Iniciando carga de productos iniciales...
📦 === INICIO cargarProductosIniciales ===
📦 cargaInicialCompletada: false
📦 Iniciando carga de productos iniciales...
🔍 === INICIO buscarProductos ===
🔍 CONTADOR DE LLAMADAS: 1
🔍 Término recibido: ""
🔍 busquedaEnProceso: false
🔍 ultimaBusqueda: ""
🔍 Iniciando búsqueda válida...
✅ Facturación inicializada correctamente
🚀 === FIN inicializarFacturacion ===
📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
✅ Modal de inventario inicializado correctamente
📦 Configurando eventos del modal inventario...
📦 Configurando filtros de inventario...
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.InventarioController: Information: 🚀 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.InventarioController: Information: 🚀 Usuario: Julissa Mejias
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerCostos'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerCostos'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a VerCostos
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'VerUtilidades'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'VerUtilidades'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a VerUtilidades
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.InventarioController: Information: 🔍 Usuario Julissa Mejias - VerCostos: True, VerUtilidades: True
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Productos] AS [p]
API.Controllers.InventarioController: Information: 📊 Total de productos en base de datos: 11
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
API.Controllers.InventarioController: Information: 📦 Total de pedidos: 32, Pendientes: 0
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [DetallePedido] AS [d]
API.Controllers.InventarioController: Information: 📋 Total de detalles de pedidos: 166
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(@__p_0) [p].[PedidoID] AS [PedidoId], [p].[Estado], [p].[FechaPedido]
FROM [PedidosProveedor] AS [p]
WHERE [p].[Estado] = 'Pendiente'
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [p].[ProductoID], [p].[NombreProducto], [p].[Descripcion], [p].[Costo], [p].[PorcentajeUtilidad], CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN [p].[Costo] * ([p].[PorcentajeUtilidad] / 100.0)
    ELSE NULL
END, CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN [p].[Costo] + ([p].[Costo] * ([p].[PorcentajeUtilidad] / 100.0))
    ELSE [p].[Precio]
END, CASE
    WHEN ([p].[Costo] IS NOT NULL) AND ([p].[PorcentajeUtilidad] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [p].[Precio], [p].[CantidadEnInventario], [p].[StockMinimo], [p].[FechaUltimaActualizacion], CASE
    WHEN EXISTS (
        SELECT 1
        FROM [DetallePedido] AS [d]
        LEFT JOIN [PedidosProveedor] AS [p0] ON [d].[PedidoID] = [p0].[PedidoID]
        WHERE [d].[ProductoID] = [p].[ProductoID] AND ([p0].[PedidoID] IS NOT NULL) AND [p0].[Estado] = 'Pendiente') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [i].[ImagenID], [i].[URLImagen], [i].[Descripcion], [i].[FechaCreacion], [t0].[LlantaId], [t0].[Ancho], [t0].[Perfil], [t0].[Diametro], [t0].[Marca], [t0].[Modelo], [t0].[Capas], [t0].[IndiceVelocidad], [t0].[TipoTerreno], [t0].[c]
FROM [Productos] AS [p]
LEFT JOIN [ImagenesProducto] AS [i] ON [p].[ProductoID] = [i].[ProductoID]
LEFT JOIN (
    SELECT [t].[LlantaId], [t].[Ancho], [t].[Perfil], [t].[Diametro], [t].[Marca], [t].[Modelo], [t].[Capas], [t].[IndiceVelocidad], [t].[TipoTerreno], [t].[c], [t].[ProductoID]
    FROM (
        SELECT [l].[LlantaID] AS [LlantaId], [l].[Ancho], [l].[Perfil], [l].[Diametro], [l].[Marca], [l].[Modelo], [l].[Capas], [l].[IndiceVelocidad], [l].[TipoTerreno], 1 AS [c], [l].[ProductoID], ROW_NUMBER() OVER(PARTITION BY [l].[ProductoID] ORDER BY [l].[LlantaID]) AS [row]
        FROM [Llantas] AS [l]
    ) AS [t]
    WHERE [t].[row] <= 1
) AS [t0] ON [p].[ProductoID] = [t0].[ProductoID]
ORDER BY [p].[ProductoID]
API.Controllers.InventarioController: Information: 📦 Productos obtenidos de la consulta: 11
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.InventarioService: Information: 🔍 === INICIANDO OBTENCIÓN DE PRODUCTOS ===
GestionLlantera.Web.Services.InventarioService: Information: 🔐 Token JWT configurado para la petición
GestionLlantera.Web.Services.InventarioService: Information: 🌐 URL construida: https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Inventario/productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 40.8378ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 44.0533ms - 200
API.Controllers.InventarioController: Information: 🔥 Productos con pedido pendiente: 0
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=17, Nombre='Prueba de Stock 3 Despues de eliminar imagen', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ❌ Producto SIN pedido pendiente: ID=20, Nombre='Llanta Agregar Marca Agrega Modelo', TienePedidoPendiente=False
API.Controllers.InventarioController: Information: ✅ === PRODUCTOS OBTENIDOS EXITOSAMENTE ===
API.Controllers.InventarioController: Information: ✅ Total enviado al cliente: 11 productos
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 50.1596ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 53.6883ms - 200
GestionLlantera.Web.Services.InventarioService: Information: 📄 Respuesta recibida de la API, procesando 10362 caracteres...
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Prueba de Stock 3 Despues de eliminar imagen (ID: 17, Precio: 120000, Stock: 1, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/df842469-e12d-46c1-985c-bb53d4aec0ec_Harxon_logo.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Agregar Marca Agrega Modelo (ID: 20, Precio: 110000, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/2e87b201-a50f-46fd-951e-daf5749b973c_deca639fa6ea47f09e52d3cd99927720-free__1_-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Mobile (ID: 1016, Precio: 6240, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/abef5f29-6fb0-4865-843b-5454e4b374ef_Slam_R100_3-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Test (ID: 1017, Precio: 64200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/19020e25-aa4e-4914-a654-8f9b50b61128_ss1-removebg-preview.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/0bd3761e-6d04-47ee-9114-df9040fb3004_sun2.png
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/47bada1a-ff10-4360-b467-40dab2cb4f73_hoyoun-lee-wFUjcFocCv4-unsplash (1).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Firestone Extreme (ID: 1018, Precio: 46440, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Continental Urban (ID: 1019, Precio: 33600, Stock: 12, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/815c5daa-e255-4889-a428-7f91f88308a1_descargar.webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/9e3a03d4-3a1e-4150-a1da-e23716f15212_OIP (1).webp
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/64af8f10-7c56-4db3-97ed-fb62e9ce6875_OIP.webp
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Kumho Miller (ID: 1021, Precio: 31500, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/84a7110a-cf50-4b1d-b04f-fa71866652cb_descargar (2).jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Producto Ordenando URL API (ID: 1022, Precio: 2200, Stock: 0, Es Llanta: False)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/446768a1-6e0c-448b-b96e-2b987083e1da_al-amin-mir-jRM_bQIb_80-unsplash.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1023, Precio: 18960, Stock: 0, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Dunlop Direzza (ID: 1024, Precio: 36800, Stock: 5, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: 🖼️ Imagen procesada: https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
GestionLlantera.Web.Services.InventarioService: Information: ✅ Producto procesado: Llanta Bridgeston Turanza 6 (ID: 1025, Precio: 15525, Stock: 8, Es Llanta: True)
GestionLlantera.Web.Services.InventarioService: Information: 🎉 PROCESO COMPLETADO: 11 productos procesados exitosamente
📋 Respuesta del servidor recibida
✅ Se encontraron 4 productos disponibles
🔄 === INICIO mostrarResultadosProductos ===
🔄 CONTADOR DE LLAMADAS: 1
🔄 Productos recibidos: 4
🔄 Construyendo HTML para 4 productos
🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/4522c1e8…4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
🔧 Debug llanta: {esLlanta: false, medidaOriginal: undefined, medidaMapeada: undefined, medidaFinal: undefined, nombreProducto: 'Prueba de Stock 3 Despues de eliminar imagen'}
🖼️ Procesando imágenes para producto: Llanta Continental Urban
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp', 'https://localhost:7273/uploads/productos/53e49243-b618-4cb0-b969-18a35ad694d2_OIP (1).webp', 'https://localhost:7273/uploads/productos/708ca6c2-7544-4cb1-9a9c-eee9c5efcb4a_descargar.webp']
🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '225/50/R18', medidaFinal: '225/50/R18', nombreProducto: 'Llanta Continental Urban'}
🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
🖼️ Datos del producto: {imagenesProductos: Array(1), imagenesUrls: Array(1), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ Imágenes desde imagenesUrls: (1) ['https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '215/50/R15', medidaFinal: '215/50/R15', nombreProducto: 'Llanta Dunlop Direzza'}
🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
🖼️ Datos del producto: {imagenesProductos: Array(3), imagenesUrls: Array(3), imagenes: undefined}
🖼️ Imágenes desde imagenesProductos: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ Imágenes desde imagenesUrls: (3) ['https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_2_Llanta_Bridgeston_Turanza_6_195_50R14.jpg', 'https://localhost:7273/uploads/productos/1025_3_Llanta_Bridgeston_Turanza_6_195_50R14.jpg']
🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
🔧 Debug llanta: {esLlanta: true, medidaOriginal: undefined, medidaMapeada: '195/50/R14', medidaFinal: '195/50/R14', nombreProducto: 'Llanta Bridgeston Turanza 6'}
🔄 Actualizando DOM (longitud HTML: 19272 caracteres)
🔄 === FIN mostrarResultadosProductos ===
📦 Carga inicial marcada como completada después de primera búsqueda exitosa
📦 Productos mostrados exitosamente
🔍 === FIN buscarProductos ===
📦 Búsqueda inicial ejecutada
📦 === FIN cargarProductosIniciales (exitosa) ===
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn w-100 btn-outline-secondary
🎯 Deshabilitado: true
🎯 Texto: Completar Venta
🎯 Título: Agrega productos y selecciona un cliente
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
CSS Hot Reload ignoring https://localhost:7038/lib/bootstrap/dist/css/bootstrap.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css because it was inaccessible or had more than 7000 rules.
CSS Hot Reload ignoring https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css because it was inaccessible or had more than 7000 rules.
📋 === ABRIENDO MODAL DE FACTURAS PENDIENTES ===
👥 Inicializando módulo de usuarios conectados del sidebar
✅ Módulo de usuarios conectados del sidebar inicializado
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 4.9758ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 7.7427ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:44:40.677","sesionesActivas":1,"tiempoConectadoMinutos":0,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
📋 *** MODAL DE FACTURAS PENDIENTES COMPLETAMENTE VISIBLE ***
📋 Elementos disponibles en el DOM:
📋 - Input búsqueda: 1
📋 - Select estado: 1
📋 - Tabla body: 1
📋 - Loading: 1
📋 - Content: 1
✅ Inicializando filtros de facturas pendientes...
🔍 === INICIALIZANDO FILTROS DE FACTURAS PENDIENTES (FRONTEND) ===
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
🔍 Configurando eventos de filtrado para facturas pendientes...
✅ Eventos de filtros de facturas configurados con delegación
📋 === CARGANDO TODAS LAS FACTURAS PENDIENTES ===
✅ Filtros de facturas pendientes inicializados correctamente
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Obteniendo todas las facturas desde el servicio de facturación
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📋 URL de consulta: https://localhost:7273/api/Facturacion/facturas?tamano=1000
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Facturas] AS [f]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[NumeroFactura], [t].[ClienteId], [t].[NombreCliente], [t].[IdentificacionCliente], [t].[TelefonoCliente], [t].[EmailCliente], [t].[DireccionCliente], [t].[FechaFactura], [t].[FechaVencimiento], [t].[Subtotal], [t].[DescuentoGeneral], [t].[PorcentajeImpuesto], COALESCE([t].[MontoImpuesto], 0.0), [t].[Total], [t].[Estado], [t].[TipoDocumento], [t].[MetodoPago], [t].[Observaciones], [t].[UsuarioCreadorId], [u].[NombreUsuario], [t].[FechaCreacion], [t].[FechaActualizacion], [u].[UsuarioID], [d].[DetalleFacturaId], [d].[ProductoId], [d].[NombreProducto], [d].[DescripcionProducto], [d].[Cantidad], [d].[PrecioUnitario], [d].[PorcentajeDescuento], [d].[MontoDescuento], [d].[Subtotal]
FROM (
    SELECT [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    ORDER BY [f].[FechaCreacion] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Usuarios] AS [u] ON [t].[UsuarioCreadorId] = [u].[UsuarioID]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FechaCreacion] DESC, [t].[FacturaId], [u].[UsuarioID]
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Facturas obtenidas exitosamente: 331 facturas
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio: Success=True, Message=Facturas obtenidas exitosamente
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ 331 facturas obtenidas exitosamente
📋 Respuesta del servidor facturas: {success: true, facturas: Array(331), message: 'Se encontraron 331 facturas'}
✅ Facturas pendientes cargadas: 331
🔍 === APLICANDO FILTROS LOCALMENTE A FACTURAS ===
🔍 Total facturas disponibles: 331
🔍 Filtros aplicados: {texto: '', estado: 'todos', fechaDesde: '', fechaHasta: ''}
🔍 Facturas filtradas: 331
📋 === MOSTRANDO FACTURAS PENDIENTES PAGINADAS ===
📋 Total facturas a paginar: 331
📋 Facturas por página: 20
📋 Página actual: 1
📋 Facturas en esta página: 20
🔧 Configurando eventos de botones de facturas...
✅ Eventos de botones de facturas configurados correctamente
📄 === MOSTRANDO PAGINACIÓN DE FACTURAS ===
📄 Página actual: 1 Total páginas: 17
✅ Facturas pendientes mostradas en tabla
📋 Datos originales recibidos: {facturaId: 1327, numeroFactura: 'FAC-202508-000044', clienteId: 3, nombreCliente: 'Julissa Mejias', identificacionCliente: '123', …} object
⚙️ Procesar factura pendiente: {facturaId: 1327, numeroFactura: 'FAC-202508-000044', clienteId: 3, nombreCliente: 'Julissa Mejias', identificacionCliente: '123', …}
🚪 Modal de facturas pendientes cerrado al inicio del procesamiento
💰 === PROCESANDO FACTURA PENDIENTE ===
💰 Factura escapada recibida: {facturaId: 1327, numeroFactura: 'FAC-202508-000044', clienteId: 3, nombreCliente: 'Julissa Mejias', identificacionCliente: '123', …}
💰 Factura deserializada: {facturaId: 1327, numeroFactura: 'FAC-202508-000044', clienteId: 3, nombreCliente: 'Julissa Mejias', identificacionCliente: '123', …}
📦 Verificando stock de la factura...
📦 === VERIFICANDO STOCK PARA FACTURA ===
📦 Factura ID: 1327
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: 📦 === VERIFICANDO STOCK DE FACTURA DESDE CONTROLADOR WEB ===
GestionLlantera.Web.Controllers.FacturacionController: Information: 📦 Factura ID: 1327
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.FacturacionService: Information: 📦 === VERIFICANDO STOCK DE FACTURA PENDIENTE ===
GestionLlantera.Web.Services.FacturacionService: Information: 📦 Factura ID: 1327
GestionLlantera.Web.Services.FacturacionService: Information: 📤 Enviando request al API: {"FacturaId":1327}
GestionLlantera.Web.Services.FacturacionService: Information: 🌐 URL construida: https://localhost:7273/api/Facturacion/verificar-stock-factura
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request POST https://localhost:7273/api/Facturacion/verificar-stock-factura
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request POST https://localhost:7273/api/Facturacion/verificar-stock-factura
API.Controllers.FacturacionController: Information: 📦 Verificando stock para factura: 1327
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__request_FacturaId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[ClienteId], [t].[DescuentoGeneral], [t].[DireccionCliente], [t].[EmailCliente], [t].[Estado], [t].[FechaActualizacion], [t].[FechaCreacion], [t].[FechaFactura], [t].[FechaVencimiento], [t].[IdentificacionCliente], [t].[MetodoPago], [t].[MontoImpuesto], [t].[NombreCliente], [t].[NumeroFactura], [t].[Observaciones], [t].[PorcentajeImpuesto], [t].[Subtotal], [t].[TelefonoCliente], [t].[TipoDocumento], [t].[Total], [t].[UsuarioCreadorId], [d].[DetalleFacturaId], [d].[Cantidad], [d].[DescripcionProducto], [d].[FacturaId], [d].[MontoDescuento], [d].[NombreProducto], [d].[PorcentajeDescuento], [d].[PrecioUnitario], [d].[ProductoId], [d].[Subtotal]
FROM (
    SELECT TOP(1) [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    WHERE [f].[FacturaId] = @__request_FacturaId_0
) AS [t]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
ORDER BY [t].[FacturaId]
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (0ms) [Parameters=[@__detalle_ProductoId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[ProductoID], [t].[CantidadEnInventario], [t].[Costo], [t].[Descripcion], [t].[FechaUltimaActualizacion], [t].[NombreProducto], [t].[PorcentajeUtilidad], [t].[Precio], [t].[StockMinimo], [i].[ImagenID], [i].[Descripcion], [i].[FechaCreacion], [i].[ProductoID], [i].[URLImagen]
FROM (
    SELECT TOP(1) [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
    FROM [Productos] AS [p]
    WHERE [p].[ProductoID] = @__detalle_ProductoId_0
) AS [t]
LEFT JOIN [ImagenesProducto] AS [i] ON [t].[ProductoID] = [i].[ProductoID]
ORDER BY [t].[ProductoID]
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 6.6057ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 9.7028ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta del API: OK - {"success":true,"hayProblemasStock":false,"tieneProblemas":false,"productosConProblemas":[],"message":"Todos los productos tienen stock suficiente"}
GestionLlantera.Web.Services.FacturacionService: Information: 📦 Verificación completada - Hay problemas: False, Productos afectados: 0
GestionLlantera.Web.Controllers.FacturacionController: Information: 📋 Resultado del servicio de verificación: Success=True, Data={"hayProblemasStock":false,"productosConProblemas":[],"message":"Todos los productos tienen stock suficiente"}
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Verificación de stock exitosa para factura 1327
GestionLlantera.Web.Controllers.FacturacionController: Information: 📤 Propiedades mapeadas: hayProblemasStock=False, tieneProblemas=False, productos=0
GestionLlantera.Web.Controllers.FacturacionController: Information: 📤 Respuesta final enviada al frontend: {"success":true,"hayProblemasStock":false,"tieneProblemas":false,"productosConProblemas":[],"message":"Todos los productos tienen stock suficiente"}
📦 === RESPUESTA DEL SERVIDOR ===
📦 Resultado completo: {
  "success": true,
  "hayProblemasStock": false,
  "tieneProblemas": false,
  "productosConProblemas": [],
  "message": "Todos los productos tienen stock suficiente"
}
📦 Tipo: object
📦 Propiedades: (5) ['success', 'hayProblemasStock', 'tieneProblemas', 'productosConProblemas', 'message']
📦 === RESULTADO FINAL ===
📦 Success: true
📦 Tiene problemas: false
📦 Productos con problemas: 0
📦 Productos normalizados: (0) []
📦 Resultado verificación stock: {success: true, tieneProblemas: false, productosConProblemas: Array(0), message: 'Verificación completada'}
✅ No hay problemas de stock, procesando factura directamente
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: true, puedeFinalizarVenta: true, disabled: false, limpiarDisabled: false}
🔄 Estado botón finalizar actualizado: {tieneProductos: true, tieneCliente: true, puedeFinalizarVenta: true, disabled: false, limpiarDisabled: false}
🚪 Modal de facturas pendientes cerrado antes de abrir modal finalizar
📋 === DEPURACIÓN CLIENTE SELECCIONADO ===
📋 Cliente completo: {clienteId: 3, nombre: 'Julissa Mejias', identificacion: '123', telefono: '+506 62828588', email: 'jmejias@ticodevcr.com', …}
📋 Propiedades disponibles: (6) ['clienteId', 'nombre', 'identificacion', 'telefono', 'email', 'direccion']
📋 Factura pendiente actual: {facturaId: 1327, numeroFactura: 'FAC-202508-000044', clienteId: 3, nombreCliente: 'Julissa Mejias', identificacionCliente: '123', …}
📋 Proforma original para conversión: undefined
📋 Mostrando información de factura pendiente
🎯 === CONFIGURANDO MODAL SEGÚN PERMISOS ===
🎯 Permisos del usuario: {puedeCrearFacturas: true, puedeCompletarFacturas: true, puedeEditarFacturas: true, puedeAnularFacturas: true, esAdmin: true}
🎯 puedeCompletarFacturas: true
🎯 puedeCrearFacturas: true
🎯 esAdmin: true
🎯 Es conversión de proforma: false
🎯 Es factura pendiente: true
🎯 Botón de proforma ocultado - Es factura pendiente
👑 Modal configurado para administrador/cajero - Venta completa con ajuste de stock
📋 Datos mapeados para formulario: {nombre: 'Julissa Mejias', cedula: '123', telefono: '+506 62828588', email: 'jmejias@ticodevcr.com', direccion: 'moin'}
🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
🎯 Clases CSS: btn btn-success
🎯 Deshabilitado: false
🎯 Texto: 
                    
                    Completar y Pagar
                
🎯 Título: Procesar venta completa, marcar como pagada, ajustar stock e imprimir factura
🎯 Botón Proforma Visible: false
🎯 === FIN CONFIGURACIÓN INTERFAZ ===
El subproceso '.NET ThreadPool Worker' (34756) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34764) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (33436) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (29784) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34748) terminó con código 0 (0x0).
🔍 === PROCESANDO VENTA FINAL ===
🔍 Es pago múltiple: false
🔍 Detalles de pago actuales: (0) []
🔍 Es factura pendiente: true
🔍 Factura ID: 1327
✅ Completando factura pendiente ID: 1327
💰 === COMPLETANDO FACTURA EXISTENTE ===
💰 Factura ID: 1327
💰 Es pago múltiple: false
💰 Detalles de pago: (0) []
📋 Datos de completamiento para factura pendiente: {facturaId: 1327, metodoPago: 'efectivo', observaciones: '', forzarVerificacionStock: false, esProforma: false}
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\Microsoft Visual Studio\2022\Community\Common7\IDE\PrivateAssemblies\Runtime\Microsoft.VisualStudio.Debugger.Runtime.NetCoreApp.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\netstandard.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
El subproceso '.NET ThreadPool Worker' (11648) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (15972) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (10132) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34752) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (33584) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (29444) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (17228) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34100) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (2192) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (23140) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (33424) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (25900) terminó con código 0 (0x0).
Entrar: saltar la propiedad 'GestionLlantera.Web.Controllers.CompletarFacturaRequest.get_FacturaId'. Para entrar en las propiedades o los operadores, vaya a Herramientas->Opciones->Depuración y desactive 'Saltar propiedades y operadores (solo administrado)'.
Ir a: paso a paso por procedimientos en código '<>f__AnonymousType33..ctor' que no es de usuario
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.InventarioService: Information: 🔧 InventarioService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: 🔧 FacturacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
Entrar: saltar la propiedad 'GestionLlantera.Web.Controllers.CompletarFacturaRequest.get_FacturaId'. Para entrar en las propiedades o los operadores, vaya a Herramientas->Opciones->Depuración y desactive 'Saltar propiedades y operadores (solo administrado)'.
El subproceso '.NET ThreadPool Worker' (29456) terminó con código 0 (0x0).
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Completando documento ID: 1327
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 28628.1735ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Datos de completamiento: {}
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 29298.2968ms - 200
API.Controllers.NotificacionesController: Information: Claims del usuario:
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
El subproceso '.NET ThreadPool Worker' (29440) terminó con código 0 (0x0).
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 5065.3772ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 28839.6329ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
El subproceso '.NET ThreadPool Worker' (26856) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Completando factura usando endpoint: https://localhost:7273/api/Facturacion/facturas/1327/completar
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.FacturacionService: Information: 📤 JSON enviado al API: {}
GestionLlantera.Web.Controllers.FacturacionController: Information: ✅ Token JWT obtenido correctamente para usuario: Julissa Mejias, Longitud: 1261
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request PUT https://localhost:7273/api/Facturacion/facturas/1327/completar
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request PUT https://localhost:7273/api/Facturacion/facturas/1327/completar
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Diagnostics.StackTrace.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
ValidarPermisoAsync: Information: 🔍 Usuario: Julissa Mejias
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
ValidarPermisoAsync: Information: 🔍 Acción: CompletarFactura
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 4
ValidarPermisoAsync: Information: 🔍 Es administrador: True
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
TienePermisoAsync: Information: 🔎 Permiso: 'CompletarFacturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (3ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Reflection.Metadata.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
GestionLlantera.Web.Services.FacturacionService: Information: ✅ Completando documento ID: 1327
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 4511.3628ms - 200
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a CompletarFacturas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
API.Controllers.NotificacionesController: Information: Claims del usuario:
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Julissa Mejias, Permiso: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[ClienteId], [t].[DescuentoGeneral], [t].[DireccionCliente], [t].[EmailCliente], [t].[Estado], [t].[FechaActualizacion], [t].[FechaCreacion], [t].[FechaFactura], [t].[FechaVencimiento], [t].[IdentificacionCliente], [t].[MetodoPago], [t].[MontoImpuesto], [t].[NombreCliente], [t].[NumeroFactura], [t].[Observaciones], [t].[PorcentajeImpuesto], [t].[Subtotal], [t].[TelefonoCliente], [t].[TipoDocumento], [t].[Total], [t].[UsuarioCreadorId], [d].[DetalleFacturaId], [d].[Cantidad], [d].[DescripcionProducto], [d].[FacturaId], [d].[MontoDescuento], [d].[NombreProducto], [d].[PorcentajeDescuento], [d].[PrecioUnitario], [d].[ProductoId], [d].[Subtotal], [d0].[DetallePagoId], [d0].[FacturaId], [d0].[FechaPago], [d0].[MetodoPago], [d0].[Monto], [d0].[Observaciones], [d0].[Referencia]
FROM (
    SELECT TOP(1) [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    WHERE [f].[FacturaId] = @__id_0
) AS [t]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
LEFT JOIN [DetallesPago] AS [d0] ON [t].[FacturaId] = [d0].[FacturaId]
ORDER BY [t].[FacturaId], [d].[DetalleFacturaId]
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 28420.7063ms - 200
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Datos de completamiento: {}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [p].[ProductoID], [p].[CantidadEnInventario], [p].[Costo], [p].[Descripcion], [p].[FechaUltimaActualizacion], [p].[NombreProducto], [p].[PorcentajeUtilidad], [p].[Precio], [p].[StockMinimo]
FROM [Productos] AS [p]
WHERE [p].[ProductoID] = @__p_0
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.FacturacionController: Information: 📦 Stock actualizado para Llanta Continental Urban: -1 unidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 20), @p1='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Facturas] SET [Estado] = @p0, [FechaActualizacion] = @p1
OUTPUT 1
WHERE [FacturaId] = @p2;
UPDATE [Productos] SET [CantidadEnInventario] = @p3, [FechaUltimaActualizacion] = @p4
OUTPUT 1
WHERE [ProductoID] = @p5;
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.FacturacionController: Information: ✅ Factura FAC-202508-000044 completada exitosamente por usuario Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 8108.1521ms - 200
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 14866.4513ms - 200
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 1801.0973ms - 200
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 2909.1015ms - 200
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 1569.6408ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 2424.7081ms - 200
'GestionLlantera.Web.exe' (CoreCLR: clrhost): 'C:\Program Files\dotnet\shared\Microsoft.NETCore.App\7.0.20\System.Collections.Immutable.dll' cargado. Se omitió la carga de símbolos. El módulo está optimizado y la opción del depurador 'Sólo mi código' está habilitada.
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta del API: OK - {"message":"Factura completada exitosamente","numeroFactura":"FAC-202508-000044","estado":"Pagada","metodoPago":"efectivo","timestamp":"2025-08-13T23:47:57.7388511-06:00"}
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
El subproceso '.NET ThreadPool Worker' (26364) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (30296) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (9680) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
El subproceso '.NET ThreadPool Worker' (6196) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (34152) terminó con código 0 (0x0).
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
El subproceso '.NET ThreadPool Worker' (21672) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (3156) terminó con código 0 (0x0).
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
GestionLlantera.Web.Services.FacturacionService: Information: 📋 Completando factura usando endpoint: https://localhost:7273/api/Facturacion/facturas/1327/completar
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 3739.3436ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 22939.4363ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.FacturacionService: Information: 📤 JSON enviado al API: {}
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request PUT https://localhost:7273/api/Facturacion/facturas/1327/completar
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request PUT https://localhost:7273/api/Facturacion/facturas/1327/completar
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
ValidarPermisoAsync: Information: 🔍 === INICIO VALIDACIÓN DE PERMISO ===
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
ValidarPermisoAsync: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
ValidarPermisoAsync: Information: 🔍 Usuario: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
ValidarPermisoAsync: Information: 🔍 Controlador: FacturacionController
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
ValidarPermisoAsync: Information: 🔍 Acción: CompletarFactura
ValidarPermisoAsync: Information: 🔍 ID Usuario obtenido: 4
ValidarPermisoAsync: Information: 🔍 Es administrador: True
TienePermisoAsync: Information: 🔎 === VERIFICANDO PERMISO ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
TienePermisoAsync: Information: 🔎 Permiso: 'CompletarFacturas'
TienePermisoAsync: Information: 🔎 Usuario autenticado: Julissa Mejias
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
API.ServicesAPI.PermisosService: Information: 🔍 === INICIO VERIFICACIÓN PERMISO EN SERVICE ===
API.ServicesAPI.PermisosService: Information: 🔍 Permiso solicitado: 'CompletarFacturas'
API.ServicesAPI.PermisosService: Information: 🔍 Usuario Identity: Julissa Mejias
API.ServicesAPI.PermisosService: Information: 🔍 ID Usuario extraído: 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [SesionUsuario] AS [s]
        WHERE [s].[UsuarioID] = @__userId_Value_0 AND [s].[EstaActiva] = CAST(1 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
API.ServicesAPI.PermisosService: Information: 🔍 Es administrador: True
API.ServicesAPI.PermisosService: Information: ✅ Usuario 4 es administrador - acceso concedido a CompletarFacturas
TienePermisoAsync: Information: 🔎 Resultado del servicio: True
TienePermisoAsync: Information: 🔎 === FIN VERIFICACIÓN PERMISO ===
ValidarPermisoAsync: Information: 🔍 Resultado TienePermisoAsync: True
ValidarPermisoAsync: Information: ✅ PERMISO CONCEDIDO - Usuario: Julissa Mejias, Permiso: CompletarFacturas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 1582.8001ms - 200
ValidarPermisoAsync: Information: 🔍 === FIN VALIDACIÓN DE PERMISO (EXITOSA) ===
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[FacturaId], [t].[ClienteId], [t].[DescuentoGeneral], [t].[DireccionCliente], [t].[EmailCliente], [t].[Estado], [t].[FechaActualizacion], [t].[FechaCreacion], [t].[FechaFactura], [t].[FechaVencimiento], [t].[IdentificacionCliente], [t].[MetodoPago], [t].[MontoImpuesto], [t].[NombreCliente], [t].[NumeroFactura], [t].[Observaciones], [t].[PorcentajeImpuesto], [t].[Subtotal], [t].[TelefonoCliente], [t].[TipoDocumento], [t].[Total], [t].[UsuarioCreadorId], [d].[DetalleFacturaId], [d].[Cantidad], [d].[DescripcionProducto], [d].[FacturaId], [d].[MontoDescuento], [d].[NombreProducto], [d].[PorcentajeDescuento], [d].[PrecioUnitario], [d].[ProductoId], [d].[Subtotal], [d0].[DetallePagoId], [d0].[FacturaId], [d0].[FechaPago], [d0].[MetodoPago], [d0].[Monto], [d0].[Observaciones], [d0].[Referencia]
FROM (
    SELECT TOP(1) [f].[FacturaId], [f].[ClienteId], [f].[DescuentoGeneral], [f].[DireccionCliente], [f].[EmailCliente], [f].[Estado], [f].[FechaActualizacion], [f].[FechaCreacion], [f].[FechaFactura], [f].[FechaVencimiento], [f].[IdentificacionCliente], [f].[MetodoPago], [f].[MontoImpuesto], [f].[NombreCliente], [f].[NumeroFactura], [f].[Observaciones], [f].[PorcentajeImpuesto], [f].[Subtotal], [f].[TelefonoCliente], [f].[TipoDocumento], [f].[Total], [f].[UsuarioCreadorId]
    FROM [Facturas] AS [f]
    WHERE [f].[FacturaId] = @__id_0
) AS [t]
LEFT JOIN [DetallesFactura] AS [d] ON [t].[FacturaId] = [d].[FacturaId]
LEFT JOIN [DetallesPago] AS [d0] ON [t].[FacturaId] = [d0].[FacturaId]
ORDER BY [t].[FacturaId], [d].[DetalleFacturaId]
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 1606.8487ms - 200
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 302.8494ms - 400
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 1186.7782ms - 400
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.FacturacionService: Information: 📥 Respuesta del API: BadRequest - {"message":"La factura ya está completada"}
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
GestionLlantera.Web.Services.FacturacionService: Error: ❌ Error procesando Factura: BadRequest - {"message":"La factura ya está completada"}
El subproceso '.NET ThreadPool Worker' (28228) terminó con código 0 (0x0).
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
El subproceso '.NET ThreadPool Worker' (27128) terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
El subproceso '.NET ThreadPool Worker' (4432) terminó con código 0 (0x0).
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 19911.0761ms - 200
El subproceso '.NET ThreadPool Worker' (24896) terminó con código 0 (0x0).
Ir a: paso a paso por procedimientos en código 'GestionLlantera.Web.Middleware.JwtClaimsMiddleware.<InvokeAsync>d__3..ctor' que no es de usuario
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 23352.6822ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:44:40.677","sesionesActivas":1,"tiempoConectadoMinutos":5,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 1188.2603ms - 200
Excepción producida: 'System.Net.Http.HttpRequestException' en System.Private.CoreLib.dll
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 7967.666ms - 200
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 42.0691ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 53.0052ms - 200
GestionLlantera.Web.Services.DashboardService: Error: ❌ Error al obtener usuarios conectados

System.Net.Http.HttpRequestException: An error occurred while sending the request.
 ---> System.IO.IOException: Unable to write data to the transport connection: Se ha anulado una conexión establecida por el software en su equipo host...
 ---> System.Net.Sockets.SocketException (10053): Se ha anulado una conexión establecida por el software en su equipo host..
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.SendAsyncForNetworkStream(Socket socket, CancellationToken cancellationToken)
   at System.Net.Sockets.NetworkStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.WriteSingleChunk[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.WriteAsyncInternal[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at System.Net.Security.SslStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnection.WriteToStreamAsync(ReadOnlyMemory`1 source, Boolean async)
   at System.Net.Http.HttpConnection.FlushAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.TaskAwaiter.<>c.<OutputWaitEtwEvents>b__12_0(Action innerContinuation, Task innerTask)
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetExistingTaskResult(Task`1 task, TResult result)
   at System.Net.Http.HttpConnectionPool.HttpConnectionWaiter`1.WaitForConnectionAsync(Boolean async, CancellationToken requestCancellationToken)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Runtime.CompilerServices.TaskAwaiter.<>c.<OutputWaitEtwEvents>b__12_0(Action innerContinuation, Task innerTask)
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetExistingTaskResult(Task`1 task, TResult result)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Runtime.CompilerServices.TaskAwaiter.<>c.<OutputWaitEtwEvents>b__12_0(Action innerContinuation, Task innerTask)
   at System.Threading.Tasks.AwaitTaskContinuation.System.Threading.IThreadPoolWorkItem.Execute()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
--- End of stack trace from previous location ---

   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.<WriteSingleChunk>g__CompleteWriteAsync|153_1[TIOAdapter](ValueTask writeTask, Byte[] bufferToReturn)
   at System.Net.Security.SslStream.WriteAsyncInternal[TIOAdapter](ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendAsync>g__Core|5_0(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendAsync>g__Core|5_0(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at GestionLlantera.Web.Services.DashboardService.ObtenerUsuariosConectadosAsync(String jwtToken) in C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\Services\DashboardService.cs:line 199
GestionLlantera.Web.Controllers.DashboardController: Error: ❌ Error obteniendo usuarios conectados: Error interno al obtener usuarios conectados
❌ Error completando factura existente: Error: Error al completar la factura
    at completarFacturaExistente (C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\wwwroot\js\views\facturacion\facturacion.js:2446:19)
    at async procesarVentaFinal (https://localhost:7038/js/views/facturacion/facturacion.js:2285:13) {stack: 'Error: Error al completar la factura
    at c…/js/views/facturacion/facturacion.js:2285:13)', message: 'Error al completar la factura'}

❌ Error procesando venta: Error: Error al completar la factura
    at completarFacturaExistente (C:\Users\UMA08\source\repos\Tuco\GestionLlantera.Web\wwwroot\js\views\facturacion\facturacion.js:2446:19)
    at async procesarVentaFinal (https://localhost:7038/js/views/facturacion/facturacion.js:2285:13) {stack: 'Error: Error al completar la factura
    at c…/js/views/facturacion/facturacion.js:2285:13)', message: 'Error al completar la factura'}

⚠️ No se pudieron obtener usuarios conectados para sidebar
✅ Contador del sidebar actualizado: 0 usuarios
El subproceso '.NET ThreadPool Worker' (23132) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
El subproceso '.NET ThreadPool Worker' (28804) terminó con código 0 (0x0).
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 28.1072ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 30.7741ms - 200
El subproceso '.NET ThreadPool Worker' (18056) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (5152) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (19968) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (25576) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (13512) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (26068) terminó con código 0 (0x0).
El subproceso '.NET ThreadPool Worker' (27020) terminó con código 0 (0x0).
GestionLlantera.Web.Services.NotificacionService: Information: 🔧 NotificacionService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Services.NotificacionService: Information: Token JWT configurado en el HttpClient
GestionLlantera.Web.Services.NotificacionService: Information: 🌐 URL construida: https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/Notificaciones/conteo-no-leidas
API.Controllers.NotificacionesController: Information: Claims del usuario:
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name, Value: Julissa Mejias
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress, Value: zlktmbs334@tormails.com
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: userId, Value: 4
API.Controllers.NotificacionesController: Information: Claim Type: http://schemas.microsoft.com/ws/2008/06/identity/claims/role, Value: Administrador
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Facturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Costos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Utilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Programar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Completa
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ajustar Stock
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Gestion Usuarios
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerCostos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: VerUtilidades
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: ProgramarInventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Iniciar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Completar Inventario
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Descargar Reportes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Facturación
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Editar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Productos
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: CompletarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: EditarFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: AnularFacturas
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Crear Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Ver Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Eliminar Clientes
API.Controllers.NotificacionesController: Information: Claim Type: Permission, Value: Entregar Pendientes
API.Controllers.NotificacionesController: Information: Claim Type: exp, Value: 1755153880
API.Controllers.NotificacionesController: Information: Claim Type: iss, Value: Tuco.API
API.Controllers.NotificacionesController: Information: Claim Type: aud, Value: Tuco.Client
API.Controllers.NotificacionesController: Information: Usuario ID obtenido del claim 'userId': 4
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__userId_Value_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT COUNT(*)
FROM [Notificaciones] AS [n]
WHERE [n].[UsuarioId] = @__userId_Value_0 AND [n].[Leida] = CAST(0 AS bit) AND [n].[EsVisible] = CAST(1 AS bit)
API.Controllers.NotificacionesController: Information: Usuario 4 tiene 0 notificaciones no leídas
System.Net.Http.HttpClient.Default.ClientHandler: Information: Received HTTP response headers after 28.0954ms - 200
System.Net.Http.HttpClient.Default.LogicalHandler: Information: End processing HTTP request after 31.3281ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 🔧 DashboardService inicializado. URL base API: https://localhost:7273
GestionLlantera.Web.Controllers.DashboardController: Information: 👥 Obteniendo usuarios conectados para dashboard
GestionLlantera.Web.Services.DashboardService: Information: 👥 Solicitando usuarios conectados desde dashboard service
GestionLlantera.Web.Services.DashboardService: Information: 🔐 Token JWT configurado para obtener usuarios conectados
GestionLlantera.Web.Services.DashboardService: Information: 🌐 URL construida: https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: Start processing HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Sending HTTP request GET https://localhost:7273/api/dashboard/usuarios-conectados
API.Controllers.DashboardController: Information: 📊 Obteniendo usuarios conectados para dashboard
Microsoft.EntityFrameworkCore.Database.Command: Information: Executed DbCommand (1ms) [Parameters=[@__fechaLimite_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
SELECT [s].[UsuarioID], (
    SELECT TOP(1) [u1].[NombreUsuario]
    FROM [SesionUsuario] AS [s0]
    LEFT JOIN [Usuarios] AS [u0] ON [s0].[UsuarioID] = [u0].[UsuarioID]
    LEFT JOIN [Usuarios] AS [u1] ON [s0].[UsuarioID] = [u1].[UsuarioID]
    WHERE [s0].[EstaActiva] = CAST(1 AS bit) AND [s0].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u0].[UsuarioID] IS NOT NULL) AND ([s].[UsuarioID] = [s0].[UsuarioID] OR (([s].[UsuarioID] IS NULL) AND ([s0].[UsuarioID] IS NULL)))), MAX([s].[FechaHoraInicio]), COUNT(*), GETDATE(), COALESCE(MAX([s].[FechaHoraInicio]), GETDATE())
FROM [SesionUsuario] AS [s]
LEFT JOIN [Usuarios] AS [u] ON [s].[UsuarioID] = [u].[UsuarioID]
WHERE [s].[EstaActiva] = CAST(1 AS bit) AND [s].[FechaHoraInicio] >= @__fechaLimite_0 AND ([u].[UsuarioID] IS NOT NULL)
GROUP BY [s].[UsuarioID]
ORDER BY MAX([s].[FechaHoraInicio]) DESC
API.Controllers.DashboardController: Information: 📊 Usuarios conectados: 1 usuarios con 1 sesiones activas
System.Net.Http.HttpClient.APIClient.ClientHandler: Information: Received HTTP response headers after 9.1435ms - 200
System.Net.Http.HttpClient.APIClient.LogicalHandler: Information: End processing HTTP request after 11.87ms - 200
GestionLlantera.Web.Services.DashboardService: Information: 👥 Respuesta de usuarios conectados recibida: {"success":true,"totalUsuarios":1,"totalSesiones":1,"usuarios":[{"usuarioId":4,"nombreUsuario":"Julissa Mejias","ultimaSesion":"2025-08-13T23:44:40.677","sesionesActivas":1,"tiempoConectadoMinutos":6,"estado":"Activo"}],"mensaje":"1 usuario conectado"}
GestionLlantera.Web.Controllers.DashboardController: Information: ✅ Usuarios conectados obtenidos correctamente
✅ Contador del sidebar actualizado: 1 usuarios
✅ Panel de usuarios conectados (sidebar) actualizado
