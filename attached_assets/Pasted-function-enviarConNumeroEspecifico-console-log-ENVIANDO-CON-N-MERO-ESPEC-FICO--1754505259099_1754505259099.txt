function enviarConNumeroEspecifico() {
    console.log('üìû === ENVIANDO CON N√öMERO ESPEC√çFICO ===');

    const numeroWhatsApp = $("#numeroWhatsApp").val().replace(/\D/g, '');
    const incluirImagen = $("#incluirImagen").is(":checked");
    const producto = window.productoParaCompartir;

    if (!producto) {
        mostrarNotificacion("Error: No hay producto seleccionado para enviar.", "danger");
        return;
    }

    if (numeroWhatsApp.length !== 8) {
        mostrarNotificacion("Por favor, ingrese un n√∫mero de WhatsApp v√°lido de 8 d√≠gitos.", "warning");
        return;
    }

    try {
        // ‚úÖ CONSTRUIR MENSAJE CON FORMATO UNIFICADO
        let mensaje = `¬°Hola! Te comparto este producto:\n\n`;
        mensaje += `${producto.nombre.replace('‚Ç°', '').trim()}\n`;
        mensaje += `Precio: ${producto.precio}\n`;
        mensaje += `Stock: ${producto.stock}\n`;
        mensaje += `M√°s detalles: ${producto.urlProducto}\n\n`;
        
        if (incluirImagen && producto.urlImagen && !producto.urlImagen.includes('no-image.png')) {
            mensaje += `Imagen: ${window.location.origin}${producto.urlImagen}`;
        }

        // Construir URL de WhatsApp con n√∫mero espec√≠fico
        const urlWhatsApp = `https://wa.me/506${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;

        // Mostrar estado de carga
        const $btnEnviar = $("#btnEnviarWhatsApp");
        $btnEnviar.find('.normal-state').hide();
        $btnEnviar.find('.loading-state').show();
        $btnEnviar.prop('disabled', true);

        // Simular env√≠o y abrir WhatsApp
        setTimeout(() => {
            window.open(urlWhatsApp, '_blank');
            
            // Ocultar modal y mostrar notificaci√≥n
            $("#modalWhatsAppNumero").modal("hide");
            mostrarNotificacion("Mensaje enviado a WhatsApp correctamente", "success");

            // Restablecer estado del bot√≥n
            $btnEnviar.find('.loading-state').hide();
            $btnEnviar.find('.normal-state').show();
            $btnEnviar.prop('disabled', true);

        }, 1500);

    } catch (error) {
        console.error('‚ùå Error al enviar por WhatsApp:', error);
        mostrarNotificacion("Error al enviar por WhatsApp: " + error.message, "danger");
    }
}
