 👥 Módulo SidebarUsuarios cargado correctamente
 🖨️ Módulo de impresión térmica cargado correctamente
 ✅ Sistema de zoom simplificado cargado
 📋 Funciones de proformas y detalles exportadas globalmente
 📋 Funciones de facturas pendientes exportadas globalmente
 📋 Módulo de filtros de proformas (Frontend) cargado correctamente
 ✅ verDetalleProducto disponible desde facturacion.js
 📦 Módulo InventarioFacturacion.js cargado correctamente
 🎯 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
 🎯 Configuración completa: Object
 ❌ No se encontraron permisos en la configuración
(anónimo) @ Facturacion:2083
 🔧 === CONFIGURACIÓN DE FACTURACIÓN CARGADA ===
 🔧 Configuración completa: Object
 🔧 Usuario disponible: undefined
 🔧 Permisos disponibles: undefined
 🔧 Token disponible: undefined
 👥 DOM cargado, inicializando sidebar usuarios...
 🚀 Inicializando módulo de facturación
 🚀 === INICIO inicializarFacturacion ===
 🔐 Cargando permisos del usuario...
 🔍 === INICIANDO CARGA DE PERMISOS EN FACTURACIÓN ===
 🔍 Configuración recibida: {
  "usuario": {
    "usuarioId": 4,
    "id": 4,
    "nombre": "Julissa Mejias",
    "nombreUsuario": "Julissa Mejias",
    "email": "zlktmbs334@tormails.com"
  },
  "permisos": {
    "puedeCrearFacturas": true,
    "puedeCompletarFacturas": true,
    "puedeEditarFacturas": true,
    "puedeAnularFacturas": true,
    "esAdmin": true
  },
  "fechaActual": "2025-08-13",
  "horaActual": "18:02",
  "tokenDisponible": true
}
 🔐 === PERMISOS CARGADOS CORRECTAMENTE ===
 🔐 puedeCrearFacturas: true
 🔐 puedeCompletarFacturas: true
 🔐 puedeEditarFacturas: true
 🔐 puedeAnularFacturas: true
 🔐 esAdmin: true
 🎯 === CONFIGURANDO INTERFAZ SEGÚN PERMISOS ===
 🎯 Permisos actuales del usuario: Object
 🎯 puedeCompletarFacturas: true (tipo: boolean )
 🎯 puedeCrearFacturas: true (tipo: boolean )
 🎯 Evaluación de permisos:
 🎯   - puedeCompletar (CompletarFacturas): true
 🎯   - puedeCrear (CrearFacturas): true
 👑 === INTERFAZ CONFIGURADA: USUARIO CON PERMISO COMPLETAR ===
 👑 Botón: Verde - "Completar Venta"
 👑 Flujo: Factura pagada inmediatamente con ajuste de stock
 📋 Botón Facturas Pendientes habilitado para usuario con permisos de completar
 🚀 Inicializando modales...
 📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
 ✅ Modal de inventario inicializado correctamente
 📦 Configurando eventos del modal inventario...
 📦 Configurando filtros de inventario...
 🚀 Configurando eventos...
 🚀 Actualizando totales...
 🔄 Estado botón finalizar actualizado: Object
 🚀 Iniciando carga de productos iniciales...
 📦 === INICIO cargarProductosIniciales ===
 📦 cargaInicialCompletada: false
 📦 Iniciando carga de productos iniciales...
 🔍 === INICIO buscarProductos ===
 🔍 CONTADOR DE LLAMADAS: 1
 🔍 Término recibido: ""
 🔍 busquedaEnProceso: false
 🔍 ultimaBusqueda: ""
 🔍 Iniciando búsqueda válida...
 ✅ Facturación inicializada correctamente
 🚀 === FIN inicializarFacturacion ===
 📦 === INICIALIZANDO MODAL INVENTARIO FACTURACIÓN ===
 ✅ Modal de inventario inicializado correctamente
 📦 Configurando eventos del modal inventario...
 📦 Configurando filtros de inventario...
api/permisos/funciones:1  Failed to load resource: the server responded with a status of 404 ()
DiagnosticoPermisos/mis-permisos:1  Failed to load resource: the server responded with a status of 404 ()
 🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
 🎯 Clases CSS: btn w-100 btn-outline-secondary
 🎯 Deshabilitado: true
 🎯 Texto: Completar Venta
 🎯 Título: Agrega productos y selecciona un cliente
 🎯 === FIN CONFIGURACIÓN INTERFAZ ===
 📋 Respuesta del servidor recibida
 ✅ Se encontraron 4 productos disponibles
 🔄 === INICIO mostrarResultadosProductos ===
 🔄 CONTADOR DE LLAMADAS: 1
 🔄 Productos recibidos: 4
 🔄 Construyendo HTML para 4 productos
 🖼️ Procesando imágenes para producto: Prueba de Stock 3 Despues de eliminar imagen
 🖼️ Datos del producto: Object
 🖼️ Imágenes desde imagenesProductos: Array(1)
 🖼️ Imágenes desde imagenesUrls: Array(1)
 🖼️ URL original: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
 🖼️ URL final construida: https://localhost:7273/uploads/productos/4522c1e8-cfd8-4d4c-8bfd-80f4390dffe7_GEO_L300_8000x3125px.webp
 🔧 Debug llanta: Object
 🖼️ Procesando imágenes para producto: Llanta Continental Urban
 🖼️ Datos del producto: Object
 🖼️ Imágenes desde imagenesProductos: Array(3)
 🖼️ Imágenes desde imagenesUrls: Array(3)
 🖼️ URL original: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
 🖼️ URL final construida: https://localhost:7273/uploads/productos/3946013e-62e0-4449-aa2e-f4fc251e91b3_OIP.webp
 🔧 Debug llanta: Object
 🖼️ Procesando imágenes para producto: Llanta Dunlop Direzza
 🖼️ Datos del producto: Object
 🖼️ Imágenes desde imagenesProductos: Array(1)
 🖼️ Imágenes desde imagenesUrls: Array(1)
 🖼️ URL original: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
 🖼️ URL final construida: https://localhost:7273/uploads/productos/1024_1_Llanta_Dunlop_Direzza.jpg
 🔧 Debug llanta: Object
 🖼️ Procesando imágenes para producto: Llanta Bridgeston Turanza 6
 🖼️ Datos del producto: Object
 🖼️ Imágenes desde imagenesProductos: Array(3)
 🖼️ Imágenes desde imagenesUrls: Array(3)
 🖼️ URL original: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
 🖼️ URL final construida: https://localhost:7273/uploads/productos/1025_1_Llanta_Bridgeston_Turanza_6_195_50R14.jpg
 🔧 Debug llanta: Object
 🔄 Actualizando DOM (longitud HTML: 19144 caracteres)
 🔄 === FIN mostrarResultadosProductos ===
 📦 Carga inicial marcada como completada después de primera búsqueda exitosa
 📦 Productos mostrados exitosamente
 🔍 === FIN buscarProductos ===
 📦 Búsqueda inicial ejecutada
 📦 === FIN cargarProductosIniciales (exitosa) ===
 📋 === ABRIENDO MODAL DE FACTURAS PENDIENTES ===
 👥 Inicializando módulo de usuarios conectados del sidebar
 ✅ Módulo de usuarios conectados del sidebar inicializado
 ✅ Contador del sidebar actualizado: 1 usuarios
 ✅ Panel de usuarios conectados (sidebar) actualizado
 📋 *** MODAL DE FACTURAS PENDIENTES COMPLETAMENTE VISIBLE ***
 📋 Elementos disponibles en el DOM:
 📋 - Input búsqueda: 1
 📋 - Select estado: 1
 📋 - Tabla body: 1
 📋 - Loading: 1
 📋 - Content: 1
 ✅ Inicializando filtros de facturas pendientes...
 🔍 === INICIALIZANDO FILTROS DE FACTURAS PENDIENTES (FRONTEND) ===
 🔍 Configurando eventos de filtrado para facturas pendientes...
facturasPendientesFilter.js:107 ✅ Eventos de filtros de facturas configurados con delegación
facturasPendientesFilter.js:115 📋 === CARGANDO TODAS LAS FACTURAS PENDIENTES ===
facturasPendientesFilter.js:32 ✅ Filtros de facturas pendientes inicializados correctamente
facturasPendientesFilter.js:138 📋 Respuesta del servidor facturas: Object
facturasPendientesFilter.js:152 ✅ Facturas pendientes cargadas: 329
facturasPendientesFilter.js:190 🔍 === APLICANDO FILTROS LOCALMENTE A FACTURAS ===
facturasPendientesFilter.js:191 🔍 Total facturas disponibles: 329
facturasPendientesFilter.js:192 🔍 Filtros aplicados: Object
facturasPendientesFilter.js:251 🔍 Facturas filtradas: 329
facturasPendientesFilter.js:264 📋 === MOSTRANDO FACTURAS PENDIENTES PAGINADAS ===
facturasPendientesFilter.js:276 📋 Total facturas a paginar: 329
facturasPendientesFilter.js:277 📋 Facturas por página: 20
facturasPendientesFilter.js:278 📋 Página actual: 1
facturasPendientesFilter.js:286 📋 Facturas en esta página: 20
facturasPendientesFilter.js:577 🔧 Configurando eventos de botones de facturas...
facturasPendientesFilter.js:664 ✅ Eventos de botones de facturas configurados correctamente
facturasPendientesFilter.js:409 📄 === MOSTRANDO PAGINACIÓN DE FACTURAS ===
facturasPendientesFilter.js:410 📄 Página actual: 1 Total páginas: 17
facturasPendientesFilter.js:314 ✅ Facturas pendientes mostradas en tabla
facturasPendientesFilter.js:623 📋 Datos originales recibidos: Object object
facturasPendientesFilter.js:644 ⚙️ Procesar factura pendiente: Object
facturacion.js:7020 🚪 Modal de facturas pendientes cerrado al inicio del procesamiento
facturacion.js:7026 💰 === PROCESANDO FACTURA PENDIENTE ===
facturacion.js:7027 💰 Factura escapada recibida: Object
facturacion.js:7045 💰 Factura deserializada: Object
facturacion.js:7059 📦 Verificando stock de la factura...
facturacion.js:5808 📦 === VERIFICANDO STOCK PARA FACTURA ===
facturacion.js:5809 📦 Factura ID: 1325
facturacion.js:5828 📦 === RESPUESTA DEL SERVIDOR ===
facturacion.js:5829 📦 Resultado completo: {
  "success": true,
  "hayProblemasStock": false,
  "tieneProblemas": false,
  "productosConProblemas": [],
  "message": "Todos los productos tienen stock suficiente"
}
facturacion.js:5830 📦 Tipo: object
facturacion.js:5831 📦 Propiedades: Array(5)
facturacion.js:5884 📦 === RESULTADO FINAL ===
facturacion.js:5885 📦 Success: true
facturacion.js:5886 📦 Tiene problemas: false
facturacion.js:5887 📦 Productos con problemas: 0
facturacion.js:5888 📦 Productos normalizados: Array(0)
facturacion.js:7061 📦 Resultado verificación stock: Object
facturacion.js:7172 ✅ No hay problemas de stock, procesando factura directamente
facturacion.js:5689 🔄 Estado botón finalizar actualizado: Object
facturacion.js:5689 🔄 Estado botón finalizar actualizado: Object
facturacion.js:1631 🚪 Modal de facturas pendientes cerrado antes de abrir modal finalizar
facturacion.js:1658 📋 === DEPURACIÓN CLIENTE SELECCIONADO ===
facturacion.js:1659 📋 Cliente completo: Object
facturacion.js:1660 📋 Propiedades disponibles: Array(6)
facturacion.js:1661 📋 Factura pendiente actual: Object
facturacion.js:1662 📋 Proforma original para conversión: undefined
facturacion.js:1666 📋 Mostrando información de factura pendiente
facturacion.js:1861 🎯 === CONFIGURANDO MODAL SEGÚN PERMISOS ===
facturacion.js:1862 🎯 Permisos del usuario: Object
facturacion.js:1863 🎯 puedeCompletarFacturas: true
facturacion.js:1864 🎯 puedeCrearFacturas: true
facturacion.js:1865 🎯 esAdmin: true
facturacion.js:1866 🎯 Es conversión de proforma: false
facturacion.js:1867 🎯 Es factura pendiente: true
facturacion.js:1876 🎯 Botón de proforma ocultado - Es factura pendiente
facturacion.js:1909 👑 Modal configurado para administrador/cajero - Venta completa con ajuste de stock
facturacion.js:1729 📋 Datos mapeados para formulario: Object
facturacion.js:1952 🎯 === ESTADO FINAL DEL BOTÓN FINALIZAR ===
facturacion.js:1953 🎯 Clases CSS: btn btn-success
facturacion.js:1954 🎯 Deshabilitado: false
facturacion.js:1955 🎯 Texto: 
                    
                    Completar y Pagar
                
facturacion.js:1956 🎯 Título: Procesar venta completa, marcar como pagada, ajustar stock e imprimir factura
facturacion.js:1957 🎯 Botón Proforma Visible: false
facturacion.js:1958 🎯 === FIN CONFIGURACIÓN INTERFAZ ===
facturacion.js:2266 🔍 === PROCESANDO VENTA FINAL ===
facturacion.js:2267 🔍 Es pago múltiple: false
facturacion.js:2268 🔍 Detalles de pago actuales: Array(0)
facturacion.js:2279 🔍 Es factura pendiente: true
facturacion.js:2280 🔍 Factura ID: 1325
facturacion.js:2284 ✅ Completando factura pendiente ID: 1325
facturacion.js:2316 💰 === COMPLETANDO FACTURA EXISTENTE ===
facturacion.js:2317 💰 Factura ID: 1325
facturacion.js:2318 💰 Es pago múltiple: false
facturacion.js:2319 💰 Detalles de pago: Array(0)
facturacion.js:2344 📋 Datos de completamiento para factura pendiente: Object
facturacion.js:2450 ❌ Error completando factura existente: Error: Error al procesar factura
    at completarFacturaExistente (facturacion.js:2446:19)
    at async procesarVentaFinal (facturacion.js:2285:13)
completarFacturaExistente @ facturacion.js:2450
await in completarFacturaExistente
procesarVentaFinal @ facturacion.js:2285
(anónimo) @ facturacion.js:450
dispatch @ jquery.min.js:2
S.event.add.v.handle @ jquery.min.js:2
facturacion.js:2293 ❌ Error procesando venta: Error: Error al procesar factura
    at completarFacturaExistente (facturacion.js:2446:19)
    at async procesarVentaFinal (facturacion.js:2285:13)
procesarVentaFinal @ facturacion.js:2293
await in procesarVentaFinal
(anónimo) @ facturacion.js:450
dispatch @ jquery.min.js:2
S.event.add.v.handle @ jquery.min.js:2
Facturacion:1 Blocked aria-hidden on an element because its descendant retained focus. The focus must not be hidden from assistive technology users. Avoid using aria-hidden on a focused element or its ancestor. Consider using the inert attribute instead, which will also prevent focus. For more details, see the aria-hidden section of the WAI-ARIA specification at https://w3c.github.io/aria/#aria-hidden.
Element with focus: <button.btn-close btn-close-white>
Ancestor with aria-hidden: <div.admin-wrapper> <div class=​"admin-wrapper" aria-hidden=​"true">​…​</div>​flex
